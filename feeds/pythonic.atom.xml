<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>- Pythonic</title><link href="http://blog.zoomquiet.io/" rel="alternate"></link><link href="http://blog.zoomquiet.io/feeds/pythonic.atom.xml" rel="self"></link><id>http://blog.zoomquiet.io/</id><updated>2017-08-27T00:00:00+08:00</updated><entry><title>用 DSL 们构筑商用系统</title><link href="http://blog.zoomquiet.io/dsl-atop-openresty.html" rel="alternate"></link><published>2017-08-27T00:00:00+08:00</published><updated>2017-08-27T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2017-08-27:/dsl-atop-openresty.html</id><summary type="html">
&lt;h1 id="building-business-systems-with-dsls-for-nginx-openresty"&gt;Building Business Systems with DSLs for &lt;span class="caps"&gt;NGINX&lt;/span&gt; &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; OpenResty&lt;a class="headerlink" href="#building-business-systems-with-dsls-for-nginx-openresty" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;~ 来自春哥的分享&lt;/p&gt;
&lt;h2 id="_1"&gt;背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;5年前也听录了一次 春哥的分享:&lt;a href="http://blog-zq-org.qiniucdn.com/pyblosxom/oss/openresty-intro-2012-03-06-01-13.html"&gt;由Lua 粘合的Nginx生态环境&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;然后, 神奇的引发了各种后来的然后&lt;/li&gt;
&lt;li&gt;去年, 在 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 大会上, 春哥才真正讲出了10年前设计 OpenResty 前身时内心的宏大构想&lt;/li&gt;
&lt;li&gt;所以, 值得认真 review 一下:&lt;ul&gt;
&lt;li&gt;视频:&lt;a href="https://www.youtube.com/watch?v=w2RAZLptE-U"&gt;Building Business Systems with Domain-Specific Languages for &lt;span class="caps"&gt;NGINX&lt;/span&gt; &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; OpenResty | Cloudflare - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;文稿:&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.nginx.com/blog/building-business-systems-with-domain-specific-languages-for-nginx-openresty-part-1/"&gt;Domain-Specific Languages for &lt;span class="caps"&gt;NGINX&lt;/span&gt; &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; OpenResty, Part 1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.nginx.com/blog/building-business-systems-with-domain-specific-languages-for-nginx-openresty-part-2/"&gt;Domain-Specific Languages for …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">
&lt;h1 id="building-business-systems-with-dsls-for-nginx-openresty"&gt;Building Business Systems with DSLs for &lt;span class="caps"&gt;NGINX&lt;/span&gt; &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; OpenResty&lt;a class="headerlink" href="#building-business-systems-with-dsls-for-nginx-openresty" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;~ 来自春哥的分享&lt;/p&gt;
&lt;h2 id="_1"&gt;背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;5年前也听录了一次 春哥的分享:&lt;a href="http://blog-zq-org.qiniucdn.com/pyblosxom/oss/openresty-intro-2012-03-06-01-13.html"&gt;由Lua 粘合的Nginx生态环境&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;然后, 神奇的引发了各种后来的然后&lt;/li&gt;
&lt;li&gt;去年, 在 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 大会上, 春哥才真正讲出了10年前设计 OpenResty 前身时内心的宏大构想&lt;/li&gt;
&lt;li&gt;所以, 值得认真 review 一下:&lt;ul&gt;
&lt;li&gt;视频:&lt;a href="https://www.youtube.com/watch?v=w2RAZLptE-U"&gt;Building Business Systems with Domain-Specific Languages for &lt;span class="caps"&gt;NGINX&lt;/span&gt; &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; OpenResty | Cloudflare - YouTube&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;文稿:&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.nginx.com/blog/building-business-systems-with-domain-specific-languages-for-nginx-openresty-part-1/"&gt;Domain-Specific Languages for &lt;span class="caps"&gt;NGINX&lt;/span&gt; &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; OpenResty, Part 1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.nginx.com/blog/building-business-systems-with-domain-specific-languages-for-nginx-openresty-part-2/"&gt;Domain-Specific Languages for &lt;span class="caps"&gt;NGINX&lt;/span&gt; &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; OpenResty, Part 1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="tldr"&gt;&lt;span class="caps"&gt;TL&lt;/span&gt;;&lt;span class="caps"&gt;DR&lt;/span&gt;&lt;a class="headerlink" href="#tldr" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;img alt="p0" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide0_First-image.png"/&gt;&lt;/p&gt;
&lt;p&gt;nginx.conf 2016 春哥进行的是压轴分享,对于在主厅面对千人的演讲, 他表示了虚伪的不好意思.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p2" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide2_OpenResty.png"/&gt;&lt;/p&gt;
&lt;p&gt;OpenResty 项目发起自10年前,现在已经有完备的团队专门进行维护和开发,
twitter 官方帐号是: @OpenResty&lt;/p&gt;
&lt;p&gt;推荐关注&lt;/p&gt;
&lt;p&gt;&lt;img alt="p4" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide4_Lua-Libraries.png"/&gt;&lt;/p&gt;
&lt;p&gt;OpenResty 在 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 内嵌了 LuaJIT 环境,
得以支持丰富的 Lua 库,结合 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 原生的非阻塞机制,
支持我们可以快速的完成复杂的 web 应用系统,
当前 &lt;code&gt;lus-resty-*&lt;/code&gt; 库已经支持非常多领域功能,比如说:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;各种数据库客户端: MySQL/Pg/MongoDB/RabbitMQ/..&lt;/li&gt;
&lt;li&gt;各种 upstreams 的健康检验&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;是的, OpenResty 是成长非常迅猛的社区&lt;/p&gt;
&lt;p&gt;&lt;img alt="p5" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide5_NGINX-LuaJIT.png"/&gt;&lt;/p&gt;
&lt;p&gt;OpenResty 不仅仅将 LuaJIT 嵌入到 &lt;span class="caps"&gt;NGINX&lt;/span&gt; ,
感谢 Lus 的 &lt;code&gt;co-routines&lt;/code&gt; 特性, 我们还创造了独有的特性,比如说:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;light threads&lt;/li&gt;
&lt;li&gt;timers&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="or"&gt;&lt;span class="caps"&gt;OR&lt;/span&gt; 的世界观&lt;a class="headerlink" href="#or" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img alt="p6" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide6_The-All-Inclusive-Philosophy.png"/&gt;&lt;/p&gt;
&lt;p&gt;OpenResty 的世界观是 &lt;code&gt;全包容&lt;/code&gt; 的,
不排斥其它任何技术, 事实上 resty 用户来自从 &lt;span class="caps"&gt;JAVA&lt;/span&gt; 到 Go 各种技术人群.&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;NGINX&lt;/span&gt; 可以在后端到客户端之间作很多有趣的事儿,
所以, 在 OpenResty 帮助下, 可以很好的完成混合解决, 能和旧系统无缝衔接.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p7" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide7_Simple-Small-Fast-Flexible.png"/&gt;&lt;/p&gt;
&lt;p&gt;OpenResty 的目标是:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;简洁&lt;/li&gt;
&lt;li&gt;轻便&lt;/li&gt;
&lt;li&gt;快速&lt;/li&gt;
&lt;li&gt;灵活&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;认真研究 Lua 后, 我们发现这真是个神奇的恩物, 不仅小而且快,更加灵活,支撑复杂的大型系统也没有问题.&lt;/p&gt;
&lt;p&gt;总之这是个设计务实,发展良好,基础稳定的好语言,
OpenResty 将 Lua 和 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 深度结合, 倍增了双方的实力.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p8" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide8_Synchronously-Nonblocking.png"/&gt;&lt;/p&gt;
&lt;p&gt;OpenResty 的 I/O 模式是 &lt;code&gt;无阻塞异步&lt;/code&gt;,
虽然 异步 在现实世界中无处不在,
但是,人类的头脑只习惯同步, 当然,俺也反感回调&lt;/p&gt;
&lt;p&gt;&lt;img alt="p9" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide9_Light-Threads-Semaphores.png"/&gt;&lt;/p&gt;
&lt;p&gt;所以,我们设计了 纤程和信号 来模拟并发, 而实际上只有一个唯一的系统线程.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p10" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide10_Cosockets.png"/&gt;&lt;/p&gt;
&lt;p&gt;并发明了: ‘Cosockets’ ~ 肯接字 (哈N 年前就想翻译了, 现在才有好想法儿)&lt;/p&gt;
&lt;p&gt;类似 &lt;span class="caps"&gt;BSD&lt;/span&gt;/Lua 套接字的容器,
支持我们象写 &lt;span class="caps"&gt;PHP&lt;/span&gt; 代码一样写同步表述, 但实际运行是完全异步的.&lt;/p&gt;
&lt;p&gt;(&lt;code&gt;是也乎:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;golang 其实也借鉴了我们这一设计 )&lt;/p&gt;
&lt;p&gt;&lt;img alt="p11" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide11_Timers-and-Sleeping.png"/&gt;&lt;/p&gt;
&lt;p&gt;我们也重新定义了 计时器和睡眠原语,
将异步和下游任务在 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 中完备的分离了,
使用起来就象 cron .&lt;/p&gt;
&lt;p&gt;&lt;img alt="p12" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide12_Shm-Based-Dictionaries-and-Queues.png"/&gt;&lt;/p&gt;
&lt;p&gt;同时还发明了 &lt;code&gt;shm&lt;/code&gt; ~ 内存分享式字典和队列,
以便支持我们的应用在 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 不同进程间分享数据,
同时又不打破 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 的异步性能.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p13" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide13_Dynamic-SSL-Handshakes.png"/&gt;&lt;/p&gt;
&lt;p&gt;而且刚刚我们也开始支持 动态&lt;span class="caps"&gt;SSL&lt;/span&gt;握手, 以便支持下游的 &lt;span class="caps"&gt;HTTPS&lt;/span&gt; 事务.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p14" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide14_Dynamic-SSL-Handshakes-Example.png"/&gt;&lt;/p&gt;
&lt;p&gt;比如在 Cloudflare, 作为&lt;span class="caps"&gt;CDN&lt;/span&gt; 供应商, 有很多客户以及虚拟服务器和边缘服务器构成网络,&lt;/p&gt;
&lt;p&gt;要面对的一个主要问题就是: &lt;span class="caps"&gt;SSL&lt;/span&gt; 证书/密钥太多&lt;/p&gt;
&lt;p&gt;理论上应该根据实际请求来动态加载对应的证书/密钥,
这样我们就可以同时持有无限量的 &lt;span class="caps"&gt;SSL&lt;/span&gt; 证书/密钥,
感谢本地流量调度, 虽然不可能有单机可以查询所有用户的流量.&lt;/p&gt;
&lt;p&gt;进一步的, 在 OpenResty 可以通过 共享内存和工作级缓存中管理 &lt;span class="caps"&gt;SSL&lt;/span&gt; 证书/密钥,&lt;/p&gt;
&lt;p&gt;数据 — 比如: 证书/密钥 — 当前已支持在 &lt;a href="https://github.com/alticelabs/kyoto"&gt;Kyoto Tycoon&lt;/a&gt; 中分发,
其它后端,比如说 Redis 或其它分布式存储也当然可以了.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p15" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide15_Dynamic-Load-Balancers.png"/&gt;&lt;/p&gt;
&lt;p&gt;通过 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 中的 Lua 进行动态加载平衡也是能的.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p16" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide16_Dynamic-Load-Balancers-Ex.png"/&gt;&lt;/p&gt;
&lt;p&gt;比如这一则配置:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;几行就可以定义一系列复杂的决策&lt;/li&gt;
&lt;li&gt;动态, 意味着你可以在该级别上对每个请求灵活应用不同的均衡策略&lt;/li&gt;
&lt;li&gt;并指定重试策略:&lt;ul&gt;
&lt;li&gt;比如, 特定请求没有获得响应时&lt;/li&gt;
&lt;li&gt;可以选择忽略&lt;/li&gt;
&lt;li&gt;也可以选择请求和请求的位置&lt;/li&gt;
&lt;li&gt;等等,都在 &lt;code&gt;balancer_by_lua_block&lt;/code&gt; 中可以声明&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;同时不影响 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 各种标准模块,比如说:&lt;ul&gt;
&lt;li&gt;&lt;a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html"&gt;Proxy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html"&gt;FastCGI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://nginx.org/en/docs/http/ngx_http_uwsgi_module.html"&gt;uwsgi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;… 等等的使用&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;以及 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 核心模块,比如: keepalive,连接池等等, 也一样开箱即用&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p17" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide17_ngx_stream_lua_module-TCP-UDP.png"/&gt;&lt;/p&gt;
&lt;p&gt;最近我们创建了 &lt;a href="https://github.com/openresty/stream-lua-nginx-module"&gt;ngx_stream_lua_module&lt;/a&gt; 模块来替代以往的
&lt;a href="https://github.com/openresty/lua-nginx-module"&gt;ngx_ HTTP_lua_ module&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;通过 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 核心子系统,来支持实现通用的 &lt;span class="caps"&gt;TCP&lt;/span&gt;/&lt;span class="caps"&gt;UDP&lt;/span&gt; 服务,&lt;/p&gt;
&lt;p&gt;实际上 &lt;a href="http://openresty.org/en/"&gt;OpenResty® - Official Site&lt;/a&gt; 
本身的 &lt;span class="caps"&gt;DNS&lt;/span&gt; 服务器就由此模块支撑,
还有人拿个模块实现了类似 syslog 的 &lt;span class="caps"&gt;TCP&lt;/span&gt; 守护进程, 来接收远程的大量日志.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p18" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide18_Advanced-Debugging-Profiling-Tools-Based-on-GDB-SystemTap.png"/&gt;&lt;/p&gt;
&lt;p&gt;多年以来, 我们积累了大量的专用测试工具.&lt;/p&gt;
&lt;p&gt;在 Cloudflare, 运营有全球范围的复杂大型网络,
很多问题发生的几率仅仅有 1% 或 0.1% 甚至于 0.001%,
几乎难以复现, 必须依赖高级调试工具来完成.&lt;/p&gt;
&lt;p&gt;已经开源了很多基于 &lt;span class="caps"&gt;GDB&lt;/span&gt; 以及 SystemTap 的工具:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;GDB&lt;/span&gt; 主要调试死锁进程,借助 &lt;span class="caps"&gt;GDB&lt;/span&gt; 以及 dump 工具, Mike Pall 已经修复了10多个隐藏在 &lt;span class="caps"&gt;JIT&lt;/span&gt; 中非常深的积年老问题&lt;/li&gt;
&lt;li&gt;SystemTap 则是非常赞的 RedHat 工程师贡献的动态追踪平台,&lt;ul&gt;
&lt;li&gt;允许分享分析运行时系统, &lt;/li&gt;
&lt;li&gt;从 内核到 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 整个儿软件桟以及用户的 Lua 业务脚本, &lt;/li&gt;
&lt;li&gt;都能在对生产系统微小影响下快速分析出来,&lt;/li&gt;
&lt;li&gt;甚至于不用关闭防火墙&lt;/li&gt;
&lt;li&gt;可以直接进行线上活体分析&lt;/li&gt;
&lt;li&gt;&amp;lt;— 这才是未来系统开发的应该姿势&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(&lt;code&gt;是也乎:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;嗯哼? &lt;span class="caps"&gt;LISP&lt;/span&gt; 构造的系统, 从一开始就这样的哪?! )&lt;/p&gt;
&lt;h3 id="or_1"&gt;&lt;span class="caps"&gt;OR&lt;/span&gt; 的应用场景&lt;a class="headerlink" href="#or_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img alt="p19" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide19_C2000K.png"/&gt;&lt;/p&gt;
&lt;p&gt;随着近几个月, 我们发布的重要功能,
OpenResty 已在真实客户单主机上支持住了 200万 级别的并发请求,&lt;/p&gt;
&lt;p&gt;已经有客户在生产环境中部署了这种级别的推送系统.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p20" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide20_Web-API-and-Microservices.png"/&gt;&lt;/p&gt;
&lt;p&gt;另外一个常见领域是接口和微服务,&lt;/p&gt;
&lt;p&gt;很多人使用 OpenResty 构建这类服务,比如:
&lt;a href="https://github.com/Mashape/kong"&gt;Mashape’s Kong&lt;/a&gt;平台,
以及 &lt;a href="https://github.com/adobe-apiplatform/apigateway"&gt;Adobe’s &lt;span class="caps"&gt;API&lt;/span&gt; Gateway&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;此外, 一些美国银行使用 OpenResty 来管理路由器流量,&lt;/p&gt;
&lt;p&gt;同时, 一些更大的中国互联网公司, 在用 OpenResty 构建实时股票信息服务, 这些接口是其中流量最大的,&lt;/p&gt;
&lt;p&gt;还有用来发布实时天气信息接口的…&lt;/p&gt;
&lt;p&gt;等等吧, OpenResty 的应用可能是无限的.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p21" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide21_Web-Gateways.png"/&gt;&lt;/p&gt;
&lt;p&gt;另外一个 OpenResty 的应用场景是 web 网关,
很多 &lt;span class="caps"&gt;CDN&lt;/span&gt; 厂商都在这样使用.&lt;/p&gt;
&lt;p&gt;我们还知道有人用 OpenResty 来管理通用 &lt;span class="caps"&gt;TCP&lt;/span&gt;/&lt;span class="caps"&gt;UDP&lt;/span&gt; 流量,&lt;/p&gt;
&lt;p&gt;Lua 可以支持你的网关在运行中得以变化,
基于互联网的动态性, 
&lt;span class="caps"&gt;CDN&lt;/span&gt; 厂商必须灵活的应对客户的不同需求, 而客户的需求越来越复杂化.&lt;/p&gt;
&lt;p&gt;甚至于人们在期待可以包含业务逻辑,比如常见的想动态修订配置文件,来支持软件更新, 等等出于实际需求的要求.&lt;/p&gt;
&lt;p&gt;选择 Lua 令一切变的可能,
因为 &lt;span class="caps"&gt;JIT&lt;/span&gt; (即时编译)的机制,
可以随时根据变更的配置生成新的规则, 并根据不同的请求进行对应的流量优化…&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;NGINX&lt;/span&gt; 原先就支持基于 &lt;span class="caps"&gt;HUP&lt;/span&gt;信号 的配置重加载, 
但是, 这对于厂商而言成本太高, 因为无法精确的退出相应请求来重启.&lt;/p&gt;
&lt;p&gt;另外, 缓存也是个大问题:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;有时一个客户的缓存非常冷&lt;/li&gt;
&lt;li&gt;但是,又不能为了释放这部分数据而重启整个儿缓存&lt;/li&gt;
&lt;li&gt;这对其它用户来说太惨了…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p22" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide22_Web-Applications.png"/&gt;&lt;/p&gt;
&lt;p&gt;OpenResty 原先设计目标是支持完备的web 应用,
第一个案例是网站, 所以,有了 &lt;a href="http://openrety.org"&gt;openrety.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如今有越来越多的传统网站,在用 OpenResty 从头开始构建&lt;/p&gt;
&lt;p&gt;&lt;img alt="p23" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide23_Web-Applications-Products-Details-Page.png"/&gt;&lt;/p&gt;
&lt;p&gt;例如 京东网, 中国最大的 &lt;span class="caps"&gt;B2C&lt;/span&gt; 电子商务服务平台之一.
在各种营销日, 他们必须面对海量的请求,
类似美国的黑色星期五, 在中国则是 11.11&lt;/p&gt;
&lt;p&gt;(&lt;code&gt;是也乎:&lt;/code&gt;
问题在中国的光棍节营销流量, 是黑色日期五的几个数量级哪!!!
毕竟, 美国的打折多数是线下的… )&lt;/p&gt;
&lt;p&gt;最早他们使用 Starnet 技术, 经常崩溃,
后来迁移到 &lt;span class="caps"&gt;JAVA&lt;/span&gt; 技术桟, 全然崩溃.&lt;/p&gt;
&lt;p&gt;最终迁移到 OpenResty ,虽然后端依然是 &lt;span class="caps"&gt;JAVA&lt;/span&gt;,
但是迎接所有流量的全部是 OpenResty 了, 从此再也没有崩溃过.&lt;/p&gt;
&lt;p&gt;现在他们使用 OpenResty 来生成复杂的网页.&lt;/p&gt;
&lt;p&gt;比如这个截屏,是 iPhone 的详细产品信息页,
类似页面吸引了主要的流量, 基于 OpenResty 的模板库来生成动态页面, 这是个非常长的页面,只截取了顶部,&lt;/p&gt;
&lt;p&gt;他们内部维护了一个非常庞大的模板库,
并用 Redis 来缓存数据 ,以免流量直接击中后端的 &lt;span class="caps"&gt;JAVA&lt;/span&gt; 服务,&lt;/p&gt;
&lt;p&gt;春哥曾经询问 &lt;span class="caps"&gt;JD&lt;/span&gt;, 是否需要优化, 他们回答,速度已经足够快, 不用了,谢谢…&lt;/p&gt;
&lt;p&gt;(&lt;code&gt;是也乎:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这可能是由于性能太好而丢失定制服务的最好案例,
MySQL 只能表示 23333 了… )&lt;/p&gt;
&lt;p&gt;&lt;img alt="p24" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide24_OpenResty-Website.png"/&gt;&lt;/p&gt;
&lt;p&gt;我们自己则重构了官方网站,
整个网站使用 Lua 在 OpenResty 上重写而成,&lt;/p&gt;
&lt;p&gt;使用 PorstgreSQL 作为后端数据存储,
通过 OpenResty 直接和数据库交互,&lt;/p&gt;
&lt;p&gt;通过 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 的异步非阻塞进程来处理 &lt;span class="caps"&gt;IO&lt;/span&gt;, 非常快速并便宜,&lt;/p&gt;
&lt;p&gt;基于 Pg 内置的全文搜索而支持了网站的内部搜索功能.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p25" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide25_Distributed-Storage-Systems.png"/&gt;&lt;/p&gt;
&lt;p&gt;这是令春哥自己都惊讶的领域:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;作为中国最大的网站之一 sina.com&lt;/li&gt;
&lt;li&gt;发布有类似 Jawbox 的网络存储产品&lt;/li&gt;
&lt;li&gt;他们不仅用 OpenResty 来构建前端&lt;/li&gt;
&lt;li&gt;而且还用在后台直接处理文件 I/O&lt;/li&gt;
&lt;li&gt;对于这种操作他们非常自得&lt;/li&gt;
&lt;li&gt;也非常自豪的成为 OpenReaty 核心组件贡献方之一&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p26" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide26_Datanet.png"/&gt;&lt;/p&gt;
&lt;p&gt;Datanet 则是另外一个类似的项目,
虽然没开源, 但是,作者在努力中,&lt;/p&gt;
&lt;p&gt;创始人是 Russell Sullivan,
在 twitter 是 @jaksprats&lt;/p&gt;
&lt;p&gt;正在基于 OpenResty 构建一个分布式数据网络, 推荐大家去直接嗯哼…&lt;/p&gt;
&lt;p&gt;&lt;img alt="p27" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide27_Conflict-Free-Replicated-Data-Types.png"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;CRDT&lt;/code&gt; ~ 无冲突数据复制类型,
简单的说, 这是全新的复杂理论,
涉及复杂的算法和论文, 还在折腾中…&lt;/p&gt;
&lt;p&gt;&lt;img alt="p28" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide28_Forming-a-Stateful-Network.png"/&gt;&lt;/p&gt;
&lt;p&gt;基本上象个 &lt;code&gt;半p2p&lt;/code&gt; 网络,
每个节点都可以有状态,通过 类似 p2p 的机制完成自动同步,&lt;/p&gt;
&lt;p&gt;为什么叫 &lt;code&gt;半p2p&lt;/code&gt; 网络,因为这其中必须有某种中心,
可以是大型数据中心, 
以便支持暂时下线的节点, 重新上线时,快速发现差异完成同步….&lt;/p&gt;
&lt;p&gt;是的, 机制很复杂要说明白得额外2小时…&lt;/p&gt;
&lt;p&gt;(&lt;code&gt;是也乎:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;不就是不完备的区块链网络嘛… )&lt;/p&gt;
&lt;h3 id="sregex"&gt;大事儿: sregex&lt;a class="headerlink" href="#sregex" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img alt="p29" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide29_Sregex.png"/&gt;&lt;/p&gt;
&lt;p&gt;sregex &amp;lt;— 春哥一直在造的轮那 ~ 正则表达式引擎,&lt;/p&gt;
&lt;p&gt;当然是为了真实的业务需求&lt;/p&gt;
&lt;p&gt;(&lt;code&gt;是也乎:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;但是,这是阻止不了从头造轮子的快感的…嗯哼! )&lt;/p&gt;
&lt;p&gt;&lt;img alt="p30" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide30_web-server.png"/&gt;&lt;/p&gt;
&lt;p&gt;本质上她必须可以支撑处理流式数据,
毕竟 web 服务器要处理的数据理论上是无限大的.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p31" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide31_4KB-buffer.png"/&gt;&lt;/p&gt;
&lt;p&gt;关键问题是高速处理缓冲区块:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;缓冲总是混沌的&lt;/li&gt;
&lt;li&gt;通常很小,比如 4k&lt;/li&gt;
&lt;li&gt;数据一进入, 就必须完成处理,得到我们需要的,并作出决定:&lt;ul&gt;
&lt;li&gt;丢弃&lt;/li&gt;
&lt;li&gt;或是通过&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;而且是单向流水线&lt;ul&gt;
&lt;li&gt;一但数据块被处理&lt;/li&gt;
&lt;li&gt;立即将被下一组填充&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;这一构想很得趣, 但是,不简单&lt;/li&gt;
&lt;li&gt;算法非常困难, 传统的都不行…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p32" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide32_4KB-buffer-2.png"/&gt;&lt;/p&gt;
&lt;p&gt;回溯算法在主流正则表达式引擎中很流行,&lt;/p&gt;
&lt;p&gt;基本上, 当你找不到匹配时,就将指针逈后移动再重试.&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;PCRE&lt;/span&gt; 以及其它很多引擎都是基于这一算法的, 但是,包含了很多问题,不仅仅是固定缓冲区的要求.&lt;/p&gt;
&lt;p&gt;还可能引发非常昂贵的系统资源浪费, 
这种现象我们定义为: &lt;code&gt;病理行为&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="p33" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide33_Xregex%E2%80%99s-BFA-Engine-Performance-Benchmark.png"/&gt;&lt;/p&gt;
&lt;p&gt;春哥构建了 &lt;a href="https://en.wikipedia.org/wiki/Deterministic_finite_automaton"&gt;&lt;span class="caps"&gt;DFA&lt;/span&gt;&lt;/a&gt;
(确定性有限自动机),
当前性能尚可, 如图中所示:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;橙色-&amp;gt;Google &lt;span class="caps"&gt;RE2&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;紫色-&amp;gt;&lt;span class="caps"&gt;PCRE&lt;/span&gt; &lt;span class="caps"&gt;JIT&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;黑色-&amp;gt;&lt;span class="caps"&gt;PCRE&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;绿色-&amp;gt;&lt;span class="caps"&gt;PCRE2&lt;/span&gt;解释器&lt;/li&gt;
&lt;li&gt;蓝色-&amp;gt;&lt;span class="caps"&gt;PCRE2&lt;/span&gt; &lt;span class="caps"&gt;JIT&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;黄色-&amp;gt;sregex &lt;span class="caps"&gt;DFA&lt;/span&gt; 原型&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class="caps"&gt;PCRE&lt;/span&gt; 是 C 实现的 Perl 兼容正则表达库,性能口碑很好&lt;/p&gt;
&lt;p&gt;&lt;img alt="p34" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide34_benchmark2.png"/&gt;&lt;/p&gt;
&lt;p&gt;在这个有点儿复杂的测试案例中:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;RE2&lt;/span&gt; 比 &lt;span class="caps"&gt;PCRE&lt;/span&gt; 好&lt;/li&gt;
&lt;li&gt;甚至于比解释器版本还好&lt;/li&gt;
&lt;li&gt;但是,  sregex &lt;span class="caps"&gt;DFA&lt;/span&gt; 原型 依然更好点儿&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p35" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide35_benchmark3.png"/&gt;&lt;/p&gt;
&lt;p&gt;而在 &lt;code&gt;/d.*?d/&lt;/code&gt; 这一简单案例测试中:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;我们的原型获得了极大的优势&lt;/li&gt;
&lt;li&gt;因为 &lt;span class="caps"&gt;DFA&lt;/span&gt; 可以进行智能优化&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p36" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide36_benchmark4.png"/&gt;&lt;/p&gt;
&lt;p&gt;在 &lt;span class="caps"&gt;PCRE&lt;/span&gt; 提供的性能测试案例集中, 我们(黄色)领先一些&lt;/p&gt;
&lt;p&gt;&lt;img alt="p37" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide37_benchmark5.png"/&gt;&lt;/p&gt;
&lt;p&gt;这一正则表达式案例是从 ModSecurity 的核心规则中抽取的,
应用在 &lt;span class="caps"&gt;WAF&lt;/span&gt;(web 应用防火墙)过滤核心中.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;回溯引擎浪费了大量 &lt;span class="caps"&gt;CPU&lt;/span&gt; 资源,因为在反复回溯&lt;/li&gt;
&lt;li&gt;sregex &lt;span class="caps"&gt;DFA&lt;/span&gt; 原型则相反, 非常快&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;sregex 将是 OpenResty 接下来的重心!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;当前还不是产品状态, 只是个快速原型&lt;/li&gt;
&lt;li&gt;春哥用大约2000行 perl 代码实现了一个正则表达式引擎&lt;/li&gt;
&lt;li&gt;以便生成能被 clang/&lt;span class="caps"&gt;GCC&lt;/span&gt; 编译的 C 代码&lt;/li&gt;
&lt;li&gt;完成这些,只是为了印证设想&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们认为:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;自己的 JIT 引擎比 Clang/GCC 更好,因为优化器更通用
自己的 JIT 引擎比 Clang/GCC 更好,因为优化器更通用
自己的 JIT 引擎比 Clang/GCC 更好,因为优化器更通用
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(&lt;code&gt;好吧, 重要的事儿得说三次&lt;/code&gt;)&lt;/p&gt;
&lt;h3 id="dsl-lzsql"&gt;&lt;span class="caps"&gt;DSL&lt;/span&gt;实验: &lt;span class="caps"&gt;LZSQL&lt;/span&gt;&lt;a class="headerlink" href="#dsl-lzsql" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img alt="p38" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide38_A-Web-Platform-As-A-Virtual-Machine.png"/&gt;&lt;/p&gt;
&lt;p&gt;回到主题: 建立在 OpenResty 上的 &lt;span class="caps"&gt;DSL&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;先分享了一系列 OpenResty 的新功能,&lt;/p&gt;
&lt;p&gt;但是,更重要的是, 春哥认为:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OpenResty 可以视作 &lt;span class="caps"&gt;VM&lt;/span&gt;(虚拟机)&lt;/li&gt;
&lt;li&gt;就象 &lt;span class="caps"&gt;JVM&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;可以更加强大, 更加面向 web&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p39" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide39_lz.taobao.com_.png"/&gt;&lt;/p&gt;
&lt;p&gt;这个实验其实是7~8年前完成的,不算新鲜,但是,实验是值得回味的.&lt;/p&gt;
&lt;p&gt;那时春哥供职 taobao, 是 alibaba 集团子公司, 是中国最大的 &lt;span class="caps"&gt;B2C&lt;/span&gt; 平台,
当时在数据分析部门,
客户是 taobao 的商家, 类似 eBay 的商家就是卖家一样.&lt;/p&gt;
&lt;p&gt;客户需要一个流量分析工具, 
来统计店面的流量,和广告部署/销售间的影响力关系, 这是个非常大的产品.&lt;/p&gt;
&lt;p&gt;(&lt;code&gt;是也乎:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;为什么大? 因为要分析的数据量,相当于好几个 twitter 的数据量…. )&lt;/p&gt;
&lt;p&gt;&lt;img alt="p40" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide40_Taobao-homepage.png"/&gt;&lt;/p&gt;
&lt;p&gt;这是产品首页&lt;/p&gt;
&lt;p&gt;&lt;img alt="p41" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide41_chart.png"/&gt;&lt;/p&gt;
&lt;p&gt;给出了类似 google 分析样漂亮的图表, 所不同的是有更多数据报告.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p42" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide42_data-volume.png"/&gt;&lt;/p&gt;
&lt;p&gt;由于 yaobao 的体量,数据量很大, 非常的大&lt;/p&gt;
&lt;p&gt;&lt;img alt="p43" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide43_experiment-on-the-client-side.png"/&gt;&lt;/p&gt;
&lt;p&gt;当时春哥 放胆在客户端进行各种尝试,8年前:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;整个儿应用逻辑已经全部在前端了&lt;/li&gt;
&lt;li&gt;类似 gmail ,完全由一组运行在网页中的脚本构建&lt;/li&gt;
&lt;li&gt;还引入了客户端模板:&lt;ul&gt;
&lt;li&gt;构建了一个能从模板生成 &lt;span class="caps"&gt;JS&lt;/span&gt; 代码的引擎&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;另外也提供了 web 服务来驱动客户端应用&lt;/li&gt;
&lt;li&gt;总之, web 服务是关键,是唯一运行在服务器上的东西&lt;ul&gt;
&lt;li&gt;将 &lt;span class="caps"&gt;JSON&lt;/span&gt; 发送给客户端&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;JS&lt;/span&gt; 用编译后的模板生成页面区域&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p44" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide44_server-side-.png"/&gt;&lt;/p&gt;
&lt;p&gt;量子统计整体架构如上:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OpenResty 位于后端和浏览器之间&lt;/li&gt;
&lt;li&gt;后端是 MySQL 集群,因为数据量大, 光卷就有超过1亿个&lt;/li&gt;
&lt;li&gt;另外还有实时统计集群作支撑&lt;/li&gt;
&lt;li&gt;同时还作为一个开放平台发布 &lt;span class="caps"&gt;JSON&lt;/span&gt; 的 &lt;span class="caps"&gt;API&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;以及 Memcached 和 Tokyo Tyrant 集群来管理其它元数据&lt;/li&gt;
&lt;li&gt;但是, 相比其它系统要简洁的多,只用 &lt;span class="caps"&gt;PHP&lt;/span&gt; 来运行&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p45" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide45_-Inventing-LZSQL.png"/&gt;&lt;/p&gt;
&lt;p&gt;春哥很快意识到关键问题:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;没有足够的人力来支撑开发&lt;/li&gt;
&lt;li&gt;整个儿团队只有两个实习生&lt;/li&gt;
&lt;li&gt;但是, 不得不将原先 &lt;span class="caps"&gt;PHP&lt;/span&gt; 编写的整个儿数据分析产品迁移到 OpenResty 平台&lt;/li&gt;
&lt;li&gt;即使迫使实习生拼命写 Lua 代码,但是,面对复杂到狂乱的业务逻辑,这是个不可能的任务&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;春哥用了一个晚上思考, 决定:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基于对数据分析核心模型/模式的理解&lt;/li&gt;
&lt;li&gt;构建自己的 &lt;span class="caps"&gt;DSL&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;以便用更加自然的形式来描述业务&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;毕竟: &lt;code&gt;什么是编程?&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;本质上是和机器对话&lt;/li&gt;
&lt;li&gt;令机器理解我们的意图&lt;/li&gt;
&lt;li&gt;从而快速/便宜/可靠的完成业务&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以, 编程的关键是:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;提高同机器对话的效率
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;那么, 如果你能用两个词或是一个句子来表达一个想法,
为毛要使用十多行代码? 那也忒自虐了!&lt;/p&gt;
&lt;p&gt;所以, 春哥不喜欢 &lt;span class="caps"&gt;JAVA&lt;/span&gt;, 因为要输入的代码太多了,
Lua 也不是个好形式, 以及其它现有的所有命令式通用开发语言&lt;/p&gt;
&lt;p&gt;&lt;img alt="p46" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide46_to-convey-the-idea-to-the-machine.png"/&gt;&lt;/p&gt;
&lt;p&gt;所以有了第一个 &lt;span class="caps"&gt;DSL&lt;/span&gt;: &lt;code&gt;LZSQL&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基于&lt;span class="caps"&gt;SQL&lt;/span&gt; 的形式, 快速传达想法给系统&lt;/li&gt;
&lt;li&gt;为什么选择 &lt;span class="caps"&gt;SQL&lt;/span&gt; ? &lt;ul&gt;
&lt;li&gt;因为数据分析产品本质上是基于关系型数据模型的&lt;/li&gt;
&lt;li&gt;无论是否使用 &lt;span class="caps"&gt;SQL&lt;/span&gt; 数据库&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;我们可以在 &lt;span class="caps"&gt;SQL&lt;/span&gt; 中定义变量和用户变量, 作为第一公民&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;SQL&lt;/span&gt; 可以在一些 MySQL 后端运行&lt;/li&gt;
&lt;li&gt;也可以在 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 中运行&lt;ul&gt;
&lt;li&gt;因为实现了包含 &lt;span class="caps"&gt;SQL&lt;/span&gt; 引擎的内存数据库&lt;/li&gt;
&lt;li&gt;只有100行左右的 Lua 代码&lt;/li&gt;
&lt;li&gt;运行良好&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;复杂性来源是因为数据不得不来自很多不同的 MySQL 数据库&lt;/li&gt;
&lt;li&gt;然后在内存中重新关联, 并组合成最终结果发送到客户端&lt;/li&gt;
&lt;li&gt;这其中涉及很多棘手的问题:&lt;ul&gt;
&lt;li&gt;必须能分解 &lt;span class="caps"&gt;SQL&lt;/span&gt; 到不同节点上运行&lt;/li&gt;
&lt;li&gt;同时还能自动优化 &lt;span class="caps"&gt;SQL&lt;/span&gt; 查询 &lt;ul&gt;
&lt;li&gt;~ MySQL 自己的优化器通常无法完成海量优化&lt;/li&gt;
&lt;li&gt;特别是在 &lt;span class="caps"&gt;OLAP&lt;/span&gt; 场景中&lt;/li&gt;
&lt;li&gt;(在线分析过程)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p47" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide47_writing-the-business-logic-in-LZSQL-files.png"/&gt;&lt;/p&gt;
&lt;p&gt;最终, 实际上我们用 &lt;span class="caps"&gt;LZSQL&lt;/span&gt; 来记述业务逻辑,
用编译器生成 Lua 代码,
在线发布 Lua 代码并运行, 而线上不再需要编译器.&lt;/p&gt;
&lt;p&gt;这就是 &lt;code&gt;编译&lt;/code&gt; 的美妙所在.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p48" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide48_to-compile-the-LZSQL-files.png"/&gt;&lt;/p&gt;
&lt;p&gt;当前的, 提供 &lt;span class="caps"&gt;CLI&lt;/span&gt; 工具,
完成 &lt;span class="caps"&gt;LZSQL&lt;/span&gt; 脚本的编译, 链接到最终 Lua 应用程序.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p49" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide49_The-result.png"/&gt;&lt;/p&gt;
&lt;p&gt;其结果非常赞:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;因为编译器可以进行很多优化&lt;/li&gt;
&lt;li&gt;人通常不能, 甚至于不能正确运行&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;旧业务是 &lt;span class="caps"&gt;PHP&lt;/span&gt; 编写的,新接口由春哥编译器生成 Lua 代码,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;请求延迟下降超过 90%,&lt;/li&gt;
&lt;li&gt;甚至于这包含了 MySQL 的延迟,&lt;/li&gt;
&lt;li&gt;上图是一次完整的 接口 &lt;span class="caps"&gt;HTTP&lt;/span&gt; 延迟对比&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;值得注意的是, 这时使用的还是标准的 Lua 解释器&lt;/p&gt;
&lt;p&gt;&lt;img alt="p50" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide50_still-using-the-interpreter-only.png"/&gt;&lt;/p&gt;
&lt;p&gt;进一步的, 仅仅切换为 LuaJIT , 速度就获得进一步加强&lt;/p&gt;
&lt;p&gt;&lt;img alt="p51" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide51_4000-lines-of-Perl.png"/&gt;&lt;/p&gt;
&lt;p&gt;而实际上, &lt;span class="caps"&gt;LZSQL&lt;/span&gt; 编译器,仅仅是 4000行 Perl 代码, 但是,包含了非常复杂的优化和类型检查以及一应上下文相关的分析过程.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p52" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide52_several-code-emitters.png"/&gt;&lt;/p&gt;
&lt;p&gt;而且, 编译器包含了:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一个解析自己的解析器&lt;/li&gt;
&lt;li&gt;一个 &lt;span class="caps"&gt;AST&lt;/span&gt;(抽象语法树)&lt;/li&gt;
&lt;li&gt;一堆优化器&lt;/li&gt;
&lt;li&gt;一个代码映射器&lt;ul&gt;
&lt;li&gt;其实是多种映射器&lt;/li&gt;
&lt;li&gt;因为 &lt;span class="caps"&gt;LZSQL&lt;/span&gt; 支持多种语言后端&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p53" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide53_why-not-C-code.png"/&gt;&lt;/p&gt;
&lt;p&gt;是的, 当时可以生成 Lua 代码,
当然, 也可以生成 C 代码.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p54" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide54_generate-an-NGINX-model.png"/&gt;&lt;/p&gt;
&lt;p&gt;是的, 当时后端是一个实时数据库, 提供了非常具体和复杂的线程协议,以至难以人工完成客户端.&lt;/p&gt;
&lt;p&gt;但是, 数据库发布有一个完备的wiki 文档:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;那么为毛不让电脑可以理解文档&lt;/li&gt;
&lt;li&gt;自动生成一个 &lt;span class="caps"&gt;NGINX&lt;/span&gt; C 模块来调用呢?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;于是, 春哥实现了这个想法&lt;/p&gt;
&lt;p&gt;&lt;img alt="p55" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide55_Ticpy.png"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="p56" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide56_implementation-example.png"/&gt;&lt;/p&gt;
&lt;p&gt;是的, 嘦很小的 &lt;span class="caps"&gt;DSL&lt;/span&gt; 抽象就可以解析 wiki 文档.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p57" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide57_a-very-quick-Perl-script.png"/&gt;&lt;/p&gt;
&lt;p&gt;于是, 再再再次用 Perl 快速完成了一个编译器来从文档生成 &lt;span class="caps"&gt;NGINX&lt;/span&gt; C 模块,
可以自由的通过 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 来和数据库交互,&lt;/p&gt;
&lt;p&gt;这算 &lt;span class="caps"&gt;NGINC&lt;/span&gt; 的上游模块.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p58" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide58_just-300-lines-of-code.png"/&gt;&lt;/p&gt;
&lt;p&gt;是的, 文档只有300行, 但是生成的 C 模块有12000行代码.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p59" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide59_Writing-Programs-to-Write-Programs-to-Write-Programs.png"/&gt;&lt;/p&gt;
&lt;p&gt;这一案例说明:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;编程就是和机器沟通&lt;/li&gt;
&lt;li&gt;如果文档足够完备&lt;/li&gt;
&lt;li&gt;那么完全可以直接转换给机器&lt;/li&gt;
&lt;li&gt;从而避免了人工编程的各种糟心事儿&lt;/li&gt;
&lt;li&gt;这一切指向了一个觉悟:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;宁愿写程序上编程来生成代码
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(&lt;code&gt;是也乎:&lt;/code&gt; 也嫑直接写业务代码)&lt;/p&gt;
&lt;p&gt;&lt;img alt="p60" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide60_Test-Scaffold.png"/&gt;&lt;/p&gt;
&lt;p&gt;同时我们的测试脚手架也是基于 &lt;span class="caps"&gt;DSL&lt;/span&gt; 的:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Test::Nginx::Socket&lt;/code&gt; 被所有 OpenResty 工程引用&lt;/li&gt;
&lt;li&gt;以规范的形式来描述测试用例&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;即使你不会 Perl 也没有关系:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;嘦按照规范提供描述&lt;/li&gt;
&lt;li&gt;服务就能理解并进行对应测试&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="dsl"&gt;&lt;span class="caps"&gt;DSL&lt;/span&gt; 的爆发&lt;a class="headerlink" href="#dsl" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img alt="p61" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide61_How-About-Tests.png"/&gt;&lt;/p&gt;
&lt;p&gt;幻灯参考: http://search.cpan.org/perldoc?Cheater&lt;/p&gt;
&lt;p&gt;接下来的一件大事:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;对于新产品&lt;/li&gt;
&lt;li&gt;数据库中还没有真实的业务数据时&lt;/li&gt;
&lt;li&gt;如何进行测试?&lt;/li&gt;
&lt;li&gt;我们需要数据来测试 &lt;span class="caps"&gt;SQL&lt;/span&gt; 查询/网页/服务/…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以, 春哥再再再再次用 Perl 实现了一个类似 &lt;span class="caps"&gt;SQL&lt;/span&gt; 语言的建数据表用的 &lt;span class="caps"&gt;DSL&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="p62" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide62_Cheater.png"/&gt;&lt;/p&gt;
&lt;p&gt;就是 Cheater 工具:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用正则表达式来指定允许渲染的字段&lt;/li&gt;
&lt;li&gt;并能指定依赖的外链&lt;/li&gt;
&lt;li&gt;那么这工具就能生成满足所有约束和要求的随机数据&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p63" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide63_The-OpenResty-Model-Language.png"/&gt;&lt;/p&gt;
&lt;p&gt;回到 OpenResty 场景中, 从多年前的实验中可以学到:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可以通过设计/实现模式语言来简化开发&lt;/li&gt;
&lt;li&gt;可以在 OpenResty 中使用 &lt;span class="caps"&gt;SQL&lt;/span&gt; &lt;/li&gt;
&lt;li&gt;编译器知道在哪儿运行:&lt;ul&gt;
&lt;li&gt;本地或是远程&lt;/li&gt;
&lt;li&gt;又或是混合&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;在不同数据库中运行 &lt;span class="caps"&gt;SQL&lt;/span&gt; ,甚至于不一定是关系型数据库&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p64" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide64_The-OpenResty-View-Language.png"/&gt;&lt;/p&gt;
&lt;p&gt;另外, 也发布有 OpenResty View 语言:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基于 &lt;a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller"&gt;&lt;span class="caps"&gt;MVC&lt;/span&gt;&lt;/a&gt; 模型&lt;/li&gt;
&lt;li&gt;在 View 层:&lt;ul&gt;
&lt;li&gt;Perl 有 &lt;span class="caps"&gt;TT2&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;Python 有 Jinja2&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;现在有了自己的 &lt;span class="caps"&gt;DSL&lt;/span&gt; 就可以生成客户端 &lt;span class="caps"&gt;JS&lt;/span&gt; 或是服务端 Lua 代码&lt;/li&gt;
&lt;li&gt;这是 &lt;span class="caps"&gt;DSL&lt;/span&gt; 的优势&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p65" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide65_Jemplate-Lemplate.png"/&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Jemplate 将 Perl 的 &lt;span class="caps"&gt;TT2&lt;/span&gt; 模板转换为 &lt;span class="caps"&gt;JS&lt;/span&gt; 代码&lt;/li&gt;
&lt;li&gt;Lemplate 则编译成 OpenResty Lua 代码&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p66" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide66_The-OpenResty-Controller-Language.png"/&gt;&lt;/p&gt;
&lt;p&gt;这又是一件大事儿&lt;/p&gt;
&lt;p&gt;&lt;img alt="p67" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide67_it%E2%80%99s-a-Lua-based-language.png"/&gt;&lt;/p&gt;
&lt;p&gt;看起来是这样的:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基于规则的语言&lt;ul&gt;
&lt;li&gt;你只需要描述一系列规则&lt;/li&gt;
&lt;li&gt;箭头左侧是谓词, 类似条件&lt;/li&gt;
&lt;li&gt;箭头右侧是行为, 比如重定向/返回错误码…&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;那些谓词其实是无效的 (不会导致执行具体的行动)&lt;/li&gt;
&lt;li&gt;编译器进一步优化的话, 就能将机关的谓词合并起来&lt;/li&gt;
&lt;li&gt;多数 &lt;span class="caps"&gt;CDN&lt;/span&gt; 业务编辑都可以如此表述&amp;lt;—这就是 &lt;span class="caps"&gt;CDN&lt;/span&gt; 市场的本质&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;不同的商业模式包含共同的内在特性:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;这是可能的也是可以的&lt;/li&gt;
&lt;li&gt;比如数据分析业务共同的模式是关系模式&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;SQL&lt;/span&gt; 语言洽好是这种模式的表述形式&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对于 &lt;span class="caps"&gt;CDN&lt;/span&gt; 或是 &lt;span class="caps"&gt;WAF&lt;/span&gt; 型的业务:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;应该就是规则集的模型&lt;/li&gt;
&lt;li&gt;理论上是个 &lt;code&gt;前向链专家系统模型&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;春哥是 &lt;span class="caps"&gt;AI&lt;/span&gt; 的资深粉丝&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;高中时就研究过各种流派的 &lt;span class="caps"&gt;AI&lt;/span&gt; 实现&lt;/li&gt;
&lt;li&gt;当前机器学习是热点&lt;/li&gt;
&lt;li&gt;而专家系统是 &lt;span class="caps"&gt;AI&lt;/span&gt; 的分支, 并没有过时&lt;/li&gt;
&lt;li&gt;比如说:&lt;ul&gt;
&lt;li&gt;基于 Prolog 的语法解析, 在自然语言研究领域很流行&lt;/li&gt;
&lt;li&gt;而语义解析, 则多用 &lt;span class="caps"&gt;CLISP&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;70年代 &lt;span class="caps"&gt;NASA&lt;/span&gt; 就折腾过类似的&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p68" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide68_remove-all-the-C-comments.png"/&gt;&lt;/p&gt;
&lt;p&gt;OpenResty 也支持组合多个 正则表达式 来执行复杂的过滤:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;这样,所有替换在 &lt;span class="caps"&gt;NGNIX&lt;/span&gt; 输出过滤器中&lt;ul&gt;
&lt;li&gt;是缓冲实时完成的&lt;/li&gt;
&lt;li&gt;所以, 定长缓冲区, 无限数据流处理&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;非常 &lt;span class="caps"&gt;COOL&lt;/span&gt; , 不是嘛?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;上图是批量从 C++ 中删除注释的案例&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;你可以稍微修订就能支持 &lt;span class="caps"&gt;CSS&lt;/span&gt;/&lt;span class="caps"&gt;JS&lt;/span&gt; 的注释删除&lt;/li&gt;
&lt;li&gt;当然的,这是基于 sregex 的&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p69" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide69_-WAF-Hot.png"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;WAF&lt;/span&gt; 是热点, 公司已在为 &lt;span class="caps"&gt;NGINX&lt;/span&gt; 推出 ModSecurity 端口,&lt;/p&gt;
&lt;p&gt;春哥看来 &lt;span class="caps"&gt;WAF&lt;/span&gt; 本身就可以基于前述控制语言来完成.&lt;/p&gt;
&lt;p&gt;&lt;img alt="p70" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide70_ModSecurity-a-Horrible-DSL.png"/&gt;&lt;/p&gt;
&lt;p&gt;ModSecurity 本身作为 &lt;span class="caps"&gt;DSL&lt;/span&gt; 很可怕&lt;/p&gt;
&lt;p&gt;&lt;img alt="p71" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide72_-Example-of-a-Poor-Rule.png"/&gt;&lt;/p&gt;
&lt;p&gt;这是 ModSecurity 一个线路的描述&lt;/p&gt;
&lt;p&gt;已经复杂到天际了, 而厂商们还发明了各种更加复杂 &lt;span class="caps"&gt;WAF&lt;/span&gt; 语法,
只是为了表述类似 &lt;code&gt;if-else&lt;/code&gt; 的逻辑&lt;/p&gt;
&lt;p&gt;那么为什么不创建我们这样简洁的 &lt;span class="caps"&gt;DSL&lt;/span&gt; ?&lt;/p&gt;
&lt;p&gt;&lt;img alt="p72" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide71_it%E2%80%99s-a-Lua-based-language-2.png"/&gt;&lt;/p&gt;
&lt;p&gt;这样的语法就干净很多:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;也支持短路:如果第一条匹配了,就跳过后续的&lt;/li&gt;
&lt;li&gt;本质上只是个 &lt;code&gt;if-else&lt;/code&gt; 不必要进行深度嵌套&lt;/li&gt;
&lt;li&gt;如果查阅其它 &lt;span class="caps"&gt;CDN&lt;/span&gt; 厂商的 &lt;span class="caps"&gt;VSL&lt;/span&gt; 代码&lt;ul&gt;
&lt;li&gt;其实就是一堆堆的 &lt;code&gt;if-else&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;是的, 很疯狂&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="or_2"&gt;&lt;span class="caps"&gt;OR&lt;/span&gt; 的目标&lt;a class="headerlink" href="#or_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img alt="p73" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide73_Model-View-Controller.png"/&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;模式 ~ 不同种类的商业系统都有内在相似的模型,从而抽象为一个 &lt;span class="caps"&gt;DSL&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;视图 ~ 已经完成很多种模板语言,都是 &lt;span class="caps"&gt;DSL&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;控制 ~ 也已经展示了, 通过规则的描述可以简洁的完成 &lt;span class="caps"&gt;WAF&lt;/span&gt; 业务的定义&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p74" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide74_SportLang.png"/&gt;&lt;/p&gt;
&lt;p&gt;运动类游戏当然也可以拥有自己的语言, 来描述业务系统.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;还能更 COOL 嘛?
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们作为软件行业的专业人士,
讲真, 强迫其它行业用户(如物理/数学/建筑/哲学…)来使用计算机语言, 这本身算是种耻辱吧.&lt;/p&gt;
&lt;p&gt;理想情景中, 我们应该支持用户:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用他们熟悉的领域语言&lt;/li&gt;
&lt;li&gt;自然的描述&lt;/li&gt;
&lt;li&gt;而机器可以理解并运算&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;而且, 同时:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;DSL&lt;/span&gt; 还包含了大量的自动优化过程&lt;/li&gt;
&lt;li&gt;毕竟这不是每个程序猿都知道的技巧&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p75" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide75_The-Y-Language.png"/&gt;&lt;/p&gt;
&lt;p&gt;当前我们内部已经在使用 Y 语言:&lt;/p&gt;
&lt;p&gt;这是全新的能调试多种语言的工具, 类似 &lt;span class="caps"&gt;GDB&lt;/span&gt;, SystemTap, LuaJIT&lt;/p&gt;
&lt;p&gt;&lt;img alt="p76" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide76_CoffeeScript.png"/&gt;&lt;/p&gt;
&lt;p&gt;另外也支持 CoffeeScript :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;毕竟 CoffeeScript 很受欢迎&lt;/li&gt;
&lt;li&gt;这种 &lt;span class="caps"&gt;DSL&lt;/span&gt; 可以生成 &lt;span class="caps"&gt;JS&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;现在我们可以从 CoffeeScript 生成 OpenResty Lua 代码&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p77" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide77_A-Meta-DSL.png"/&gt;&lt;/p&gt;
&lt;p&gt;我们也有元&lt;span class="caps"&gt;DSL&lt;/span&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用来生成其它所有 &lt;span class="caps"&gt;DSL&lt;/span&gt; 的 &lt;span class="caps"&gt;DSL&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;包含 元&lt;span class="caps"&gt;DSL&lt;/span&gt; 本身&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们还有创建编译器的 &lt;span class="caps"&gt;DSL&lt;/span&gt;, 能生成:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;DSL&lt;/span&gt; 编译器&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;DSL&lt;/span&gt; 优化器&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Perl 一直是 春哥 的第一序列武器,
但是,并一定是最好的,
最终可能为构建编译创建专用 &lt;span class="caps"&gt;DSL&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="p78" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide78_Clean-Separation.png"/&gt;&lt;/p&gt;
&lt;p&gt;我们可以在业务描述和业务实现间进行清晰的隔离.&lt;/p&gt;
&lt;p&gt;这意味着我们可以一夜之间, 完成业务系统实现技术桟的切换,而不用触动具体的业务代码.&lt;/p&gt;
&lt;p&gt;比如说:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;我们可以将当前运行在 OpenResty 上的业务系统&lt;/li&gt;
&lt;li&gt;一键迁移到 C 甚至于汇编代码上&lt;/li&gt;
&lt;li&gt;而不会变动业务逻辑&lt;/li&gt;
&lt;li&gt;甚至于将来迁移到新技术桟上, 也不用改变业务代码&lt;ul&gt;
&lt;li&gt;只需要编写一个新的后端优化器&lt;/li&gt;
&lt;li&gt;并添加到现有的 &lt;span class="caps"&gt;DSL&lt;/span&gt; 编译器中就好&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="p79" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide79_Compiling-Style-Web-Frameworks.png"/&gt;&lt;/p&gt;
&lt;p&gt;此外, 我们也将获得全新的 web 应用框架:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;编译型的&lt;/li&gt;
&lt;li&gt;不再依赖一层层的嵌套, 从而令开发运行都越来越慢&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们必须同时实现美丽和效率:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;这是未来商业产品级工程的必须特性&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img alt="p80" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide80_The-Best-Language.png"/&gt;&lt;/p&gt;
&lt;p&gt;最好的语言就是 &lt;code&gt;商业语言&lt;/code&gt; 正如春哥意识到的&lt;/p&gt;
&lt;p&gt;基于商业语言开发,还有一个好处就是:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一但完成了一个 &lt;span class="caps"&gt;DSL&lt;/span&gt; &lt;/li&gt;
&lt;li&gt;将一些业务逻辑放入后&lt;/li&gt;
&lt;li&gt;如果有幸拿到客户原始需求文档&lt;/li&gt;
&lt;li&gt;两厢对比,发现接近&lt;/li&gt;
&lt;li&gt;就意味着作对了 ;-)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其实, 还有最好的方式来描述具体的领域问题:&lt;/p&gt;
&lt;p&gt;&lt;img alt="p81" src="https://cdn-1.wp.nginx.com/wp-content/uploads/2017/08/Yichun_Zhang-conf2016-slide81_The-Machine-Truly-Understands-Business-Logic.png"/&gt;&lt;/p&gt;
&lt;p&gt;是的, 只有机器真正理解你的业务逻辑, 那么:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可以获得比以往更多的嗯哼&lt;/li&gt;
&lt;li&gt;比如自动生成测试用例&lt;/li&gt;
&lt;li&gt;完成上下文分析&lt;/li&gt;
&lt;li&gt;或者干脆为你即时生成真正可运行的实例&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(&lt;code&gt;是也乎:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这, 才是 OpenResty 真正的目标:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;逼所有程序猿变成产品经理&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;)&lt;/p&gt;
&lt;h2 id="tlog"&gt;TLog&lt;a class="headerlink" href="#tlog" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;.5h 决定嗯哼&lt;/li&gt;
&lt;li&gt;2.h 完成上篇&lt;/li&gt;
&lt;li&gt;2.5h 完成下篇&lt;/li&gt;
&lt;/ul&gt;</content><category term="speech"></category><category term="openresty"></category><category term="agentzh"></category><category term="ngx"></category></entry><entry><title>PyQt4 之消失在 Sierra</title><link href="http://blog.zoomquiet.io/pyqt4macos.html" rel="alternate"></link><published>2017-08-08T00:00:00+08:00</published><updated>2017-08-08T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2017-08-08:/pyqt4macos.html</id><summary type="html">
&lt;h3 id="_1"&gt;背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;最近在折腾 Qt , 因为在 mac 中开发运行在 win10 中,
用 PyQt 是必然选择哪.&lt;/p&gt;
&lt;p&gt;只是项目是老坑, 所以,没用 Qt5 技术桟, 还是 Qt4&lt;/p&gt;
&lt;h2 id="_2"&gt;嗯哼&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;这天要折腾 &lt;span class="caps"&gt;QR&lt;/span&gt; 码识别了&lt;/li&gt;
&lt;li&gt;运行 &lt;code&gt;brew install zbar&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;然后,各种问题就爆发了,特别是:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;libjpeg.8.dylib&lt;/code&gt; 加载不到&lt;/li&gt;
&lt;li&gt;PyQt4 镜像丢失&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;重新安装 pyqt 时才发现只有 5.1 系列的 Qt/PyQt 可以安装了…&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_3"&gt;原来&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;参考:&lt;a href="https://github.com/cartr/homebrew-qt4"&gt;cartr/homebrew-qt4: Homebrew tap …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">
&lt;h3 id="_1"&gt;背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;最近在折腾 Qt , 因为在 mac 中开发运行在 win10 中,
用 PyQt 是必然选择哪.&lt;/p&gt;
&lt;p&gt;只是项目是老坑, 所以,没用 Qt5 技术桟, 还是 Qt4&lt;/p&gt;
&lt;h2 id="_2"&gt;嗯哼&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;这天要折腾 &lt;span class="caps"&gt;QR&lt;/span&gt; 码识别了&lt;/li&gt;
&lt;li&gt;运行 &lt;code&gt;brew install zbar&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;然后,各种问题就爆发了,特别是:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;libjpeg.8.dylib&lt;/code&gt; 加载不到&lt;/li&gt;
&lt;li&gt;PyQt4 镜像丢失&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;重新安装 pyqt 时才发现只有 5.1 系列的 Qt/PyQt 可以安装了…&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_3"&gt;原来&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;参考:&lt;a href="https://github.com/cartr/homebrew-qt4"&gt;cartr/homebrew-qt4: Homebrew tap for Qt4 and dependent formulae on Sierra&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/spesmilo/electrum/issues/2001"&gt;Build on macOS Sierra 10.12 without pyqt4? · Issue #2001 · spesmilo/electrum&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://gist.github.com/robdvr/271e34785c8a43b1e093d2ee8e612aee"&gt;How to install &lt;span class="caps"&gt;QT4&lt;/span&gt;, Poppler, and Cairo on MacOS Sierra 10.12&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://stackoverflow.com/questions/36615952/how-can-i-install-pyqt4-for-python-2-7"&gt;osx - How can i install PyQT4 for Python 2.7? - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;要想继续嗯哼 PyQt4:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;brew&lt;/span&gt; &lt;span class="n"&gt;tap&lt;/span&gt; &lt;span class="n"&gt;cartr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;qt4&lt;/span&gt;
&lt;span class="n"&gt;brew&lt;/span&gt; &lt;span class="n"&gt;tap&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;pin&lt;/span&gt; &lt;span class="n"&gt;cartr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;qt4&lt;/span&gt;
&lt;span class="n"&gt;brew&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;qt&lt;/span&gt;&lt;span class="mi"&gt;@4&lt;/span&gt;
&lt;span class="n"&gt;brew&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;cartr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;qt4&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pyqt&lt;/span&gt;&lt;span class="mi"&gt;@4&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后继续的:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pyenv&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;versions&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;uC2710&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;python2&lt;/span&gt;&lt;span class="mf"&gt;.7&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;packages&lt;/span&gt;&lt;span class="err"&gt;༽&lt;/span&gt;
&lt;span class="err"&gt;༄&lt;/span&gt;  &lt;span class="n"&gt;ll&lt;/span&gt; &lt;span class="n"&gt;PyQt4&lt;/span&gt;
&lt;span class="n"&gt;lrwxr&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;xr&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;zoomq&lt;/span&gt;  &lt;span class="n"&gt;staff&lt;/span&gt;  &lt;span class="mi"&gt;66&lt;/span&gt;  &lt;span class="mi"&gt;8&lt;/span&gt;  &lt;span class="mi"&gt;8&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="n"&gt;PyQt4&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Cellar&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pyqt&lt;/span&gt;&lt;span class="mi"&gt;@4&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;4.12&lt;/span&gt;&lt;span class="n"&gt;_1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;python2&lt;/span&gt;&lt;span class="mf"&gt;.7&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;packages&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;PyQt4&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;是的, 要在 pyenv 中使用 brew 安装的 pyqt 得:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在对应版本环境的 site-packages 中使用 &lt;code&gt;ln -s&lt;/code&gt; 关联到系统环境的库&lt;/li&gt;
&lt;li&gt;就 Qt 而言要链接两个东西:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;sip.so -&amp;gt; /usr/local/Cellar/sip/4.19.3_1/lib/python2.7/site-packages/sip.so&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PyQt4 -&amp;gt; /usr/local/Cellar/pyqt@4/4.12_1/lib/python2.7/site-packages/PyQt4/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class="caps"&gt;PS&lt;/span&gt;:&lt;/p&gt;
&lt;p&gt;同理: OpenCV 也一样:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;通过 brew 一致安全稳定的自动化编译安装到系统环境中&lt;/li&gt;
&lt;li&gt;然后, 手工通过链接形式加载到对应 pyenv 版本环境中&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以, macOS 本质是 &lt;span class="caps"&gt;UNIX&lt;/span&gt; 系统,
用 linux 的环境配置思路是好的,
但是,又为了易用, macOS 也进行了各种妥协, 好在程序猿界总是能第一时间给出对应的嗯哼&lt;/p&gt;
&lt;p&gt;只是不通过 google 简直了,不知道何时才能从弥散回来的文章中知道嗯哼…&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;请上苍保祐能翻墙的人民吧…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="_4"&gt;更新&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;170809 blogging&lt;/li&gt;
&lt;li&gt;170808 inti.&lt;/li&gt;
&lt;/ul&gt;</content><category term="mac"></category><category term="pyqt"></category><category term="howto"></category><category term="sierra"></category></entry><entry><title>Leo 5.4 theme custom</title><link href="http://blog.zoomquiet.io/leo5theme-key-words.html" rel="alternate"></link><published>2016-11-17T00:00:00+08:00</published><updated>2016-11-17T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2016-11-17:/leo5theme-key-words.html</id><summary type="html">
&lt;h2 id="_1"&gt;背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://blog.zoomquiet.io/leo5theme.html"&gt;Leo 5.2 theme custom&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Leo 是灵活的完全 Pythonic 的可定制 &lt;code&gt;文学化编辑环境&lt;/code&gt; …&lt;/p&gt;
&lt;p&gt;所以,其定制的进展是无限的…&lt;/p&gt;
&lt;h2 id="_2"&gt;现象&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;在完成了基本的 theme 定制后发现&lt;/li&gt;
&lt;li&gt;默认语法元素的颜色,不太理想&lt;/li&gt;
&lt;li&gt;特别是: &lt;a href="http://leoeditor.com/cheatsheet.html#id13"&gt;&amp;lt;&lt;sections&gt;&amp;gt;&lt;/sections&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;可以将下层节点放置在任何想放置的地方的引入点声明&lt;/li&gt;
&lt;li&gt;但是,这里 &lt;code&gt;&amp;lt;&amp;lt;...&amp;gt;&amp;gt;&lt;/code&gt; 两端符号的颜色是默认兰色&lt;/li&gt;
&lt;li&gt;在暗色背景中看不清楚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;可能一时没能找到配置处&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_3"&gt;解决&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;通过社区列表咨询&lt;ul&gt;
&lt;li&gt;2天后收到各种建议&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;才知道是俺使用 Leo 的配置文件过老&lt;ul&gt;
&lt;li&gt;导致新版本的全局 theme 定义节点&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lThemes: copy to last top-level setting in myLeoSettings.leo--&amp;gt;Common to all themes--&amp;gt;Colors for …&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">
&lt;h2 id="_1"&gt;背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://blog.zoomquiet.io/leo5theme.html"&gt;Leo 5.2 theme custom&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Leo 是灵活的完全 Pythonic 的可定制 &lt;code&gt;文学化编辑环境&lt;/code&gt; …&lt;/p&gt;
&lt;p&gt;所以,其定制的进展是无限的…&lt;/p&gt;
&lt;h2 id="_2"&gt;现象&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;在完成了基本的 theme 定制后发现&lt;/li&gt;
&lt;li&gt;默认语法元素的颜色,不太理想&lt;/li&gt;
&lt;li&gt;特别是: &lt;a href="http://leoeditor.com/cheatsheet.html#id13"&gt;&amp;lt;&lt;sections&gt;&amp;gt;&lt;/sections&gt;&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;可以将下层节点放置在任何想放置的地方的引入点声明&lt;/li&gt;
&lt;li&gt;但是,这里 &lt;code&gt;&amp;lt;&amp;lt;...&amp;gt;&amp;gt;&lt;/code&gt; 两端符号的颜色是默认兰色&lt;/li&gt;
&lt;li&gt;在暗色背景中看不清楚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;可能一时没能找到配置处&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_3"&gt;解决&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;通过社区列表咨询&lt;ul&gt;
&lt;li&gt;2天后收到各种建议&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;才知道是俺使用 Leo 的配置文件过老&lt;ul&gt;
&lt;li&gt;导致新版本的全局 theme 定义节点&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lThemes: copy to last top-level setting in myLeoSettings.leo--&amp;gt;Common to all themes--&amp;gt;Colors for Leo constructs (all themes)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;没有部署在 &lt;code&gt;@setting&lt;/code&gt; 下&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;立即复制过去&lt;ul&gt;
&lt;li&gt;&lt;code&gt;@color section_name_brackets_color = orange&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;就将对应符号颜色定义为 橙色 了…&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_4"&gt;记要&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;要有信心,可配置的&lt;/li&gt;
&lt;li&gt;要认真向社区咨询&lt;/li&gt;
&lt;li&gt;要大胆的实验&lt;/li&gt;
&lt;li&gt;毕竟,编辑环境任何一点的改进,都对编程过程带来无法衡量的心理支持&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="logging"&gt;logging&lt;a class="headerlink" href="#logging" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;160921 感觉到问题&lt;/li&gt;
&lt;li&gt;161011 有空尝试解决&lt;/li&gt;
&lt;li&gt;161111 通过社区解决&lt;/li&gt;
&lt;li&gt;161201 才有空补全&lt;/li&gt;
&lt;/ul&gt;</content><category term="python"></category><category term="howto"></category><category term="leo"></category><category term="theme"></category></entry><entry><title>天然样循环</title><link href="http://blog.zoomquiet.io/nedbat-loop-iter.html" rel="alternate"></link><published>2016-05-31T00:00:00+08:00</published><updated>2016-05-31T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2016-05-31:/nedbat-loop-iter.html</id><summary type="html">
&lt;p&gt;来自 @nedbat 的分享:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://nedbatchelder.com/text/iter.html"&gt;Ned Batchelder: Loop Like A Native&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="_1"&gt;迭代基础&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;C样:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;i = 0
while i &amp;lt; len(my_list):
    v = my_list[i]
    print v
    i += 1
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;偏门:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for i in range(len(my_list)):
    v = my_list[i]
    print v
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;蠎样:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for v in my_list:
    print v
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;模式:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for name in iterable:
    statements
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;可 …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">
&lt;p&gt;来自 @nedbat 的分享:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://nedbatchelder.com/text/iter.html"&gt;Ned Batchelder: Loop Like A Native&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="_1"&gt;迭代基础&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;C样:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;i = 0
while i &amp;lt; len(my_list):
    v = my_list[i]
    print v
    i += 1
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;偏门:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for i in range(len(my_list)):
    v = my_list[i]
    print v
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;蠎样:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for v in my_list:
    print v
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;模式:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for name in iterable:
    statements
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;可 &lt;code&gt;iterable&lt;/code&gt; 的对象可以生成值流&lt;/li&gt;
&lt;li&gt;对迭代对象的每次操作&lt;/li&gt;
&lt;li&gt;由对象决定是什么值&lt;/li&gt;
&lt;li&gt;Python 中太多对象可以直接迭代的…&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="list-elements"&gt;list ⇒ elements&lt;a class="headerlink" href="#list-elements" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for e in [1, 2, 3, 4]:
    print e

1
2
3
4
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="strings-characters"&gt;Strings ⇒ characters&lt;a class="headerlink" href="#strings-characters" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for c in "Hello":
    print c

H
e
l
l
o
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="dicts-keys"&gt;Dicts ⇒ keys&lt;a class="headerlink" href="#dicts-keys" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;d = { 'a': 1,  'b': 2,  'c': 3 }

for k in d:
    print k

a
c
b
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;当然顺序是没有的&lt;/li&gt;
&lt;li&gt;以及:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;for v in d.itervalues():&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;for k,v in d.iteritems():&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;专用形式&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="files-lines"&gt;Files ⇒ lines&lt;a class="headerlink" href="#files-lines" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;with open("gettysburg.txt") as f:
    for line in f:
        print repr(line)

'Four-score and seven years ago,\n'
'our fathers brought forth on this continent\n'
'a new nation,\n'
'conceived in liberty,\n'
'and dedicated to the proposition\n'
'that all men are created equal.\n'
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="_2"&gt;标准库中有趣的迭代&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;正则表达式:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for match in re.finditer(pattern, string):
    # once for each regex match...
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;文件系统:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for root, dirs, files in os.walk('/some/dir'):
    # once for each sub-directory...
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;迭代工具:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;itertools&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="c1"&gt;# once for each integer... Infinite!&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;itertools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;chain&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;repeat&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cycle&lt;/span&gt;
&lt;span class="n"&gt;seq&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;chain&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;repeat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;cycle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="c1"&gt;# 17, 17, 17, 0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3, ...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="_3"&gt;其它的迭代形式&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;new_list = list(iterable)

results = [f(x) for x in iterable]

total = sum(iterable)

smallest = min(iterable)
largest = max(iterable)

combined = "".join(iterable)
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="_4"&gt;基本设问&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="q"&gt;Q: 如何获得索引号?&lt;a class="headerlink" href="#q" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;别:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for i in range(len(my_list)):
    v = my_list[i]
    print i, v
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;赞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for i, v in enumerate(my_list):
    print i, v
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="enumerate"&gt;enumerate() 制造好用的值对&lt;a class="headerlink" href="#enumerate" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;names = ["Eiffel Tower", "Empire State", "Sears Tower"]
list(enumerate(names))

[(0, 'Eiffel Tower'), 
 (1, 'Empire State'), 
 (2, 'Sears Tower')]

for num, name in enumerate(names):
    print num, name

0 Eiffel Tower
1 Empire State
2 Sears Tower
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="vs"&gt;迭代 vs 索引&lt;a class="headerlink" href="#vs" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;受限:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for i in range(len(my_list)):
    v = my_list[i]    # indexing!
    print i, v
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;更强:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for i, v in enumerate(iterable):
    print i, v

for linenum, line in enumerate(f, start=1):
    #...
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;C样坏形:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;i = 0
for v in iterable:
    print i, v
    i += 1
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="q_1"&gt;Q: 如何对两个列表循环?&lt;a class="headerlink" href="#q_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;names = ["Eiffel Tower", "Empire State", "Sears Tower"]
heights = [324, 381, 442]

for i in range(len(names)):
    name = names[i]
    height = heights[i]
    print "%s: %s meters" % (name, height)

Eiffel Tower: 324 meters
Empire State: 381 meters
Sears Tower: 442 meters
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="zip"&gt;zip() 生成弱对关系循环&lt;a class="headerlink" href="#zip" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;将一对循环,变成一个流循环:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for name, height in zip(names, heights):
    print "%s: %s meters" % (name, height)

Eiffel Tower: 324 meters
Empire State: 381 meters
Sears Tower: 442 meters
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="dict"&gt;dict() 是接收一对流的&lt;a class="headerlink" href="#dict" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;names = ["Eiffel Tower", "Empire State", "Sears Tower"]
heights = [324, 381, 442]

dict(zip(names, heights))

{'Empire State': 381, 
 'Sears Tower': 442, 
 'Eiffel Tower': 324}
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="_5"&gt;最赞&lt;a class="headerlink" href="#_5" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;tall_buildings = {
  "Empire State": 381, "Sears Tower": 442,
  "Burj Khalifa": 828, "Taipei 101": 509,
  }

&amp;gt;&amp;gt;&amp;gt; print max(tall_buildings.values())
828

&amp;gt;&amp;gt;&amp;gt; print max(tall_buildings.items(), key=lambda b: b[1])
('Burj Khalifa', 828)

&amp;gt;&amp;gt;&amp;gt; print max(tall_buildings, key=tall_buildings.get)
'Burj Khalifa'
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="_6"&gt;自制迭代&lt;a class="headerlink" href="#_6" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="_7"&gt;生成自有迭代&lt;a class="headerlink" href="#_7" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;nums = [88, 73, 92, 72, 40, 38, 25, 20, 90, 72]
for n in nums:
    if n % 2 == 0:
        do_something(n)

def evens(stream):
    them = []
    for n in stream:
        if n % 2 == 0:
            them.append(n)
    return them

for n in evens(nums):
    do_something(n)
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="_8"&gt;生成器&lt;a class="headerlink" href="#_8" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;函式返回一个值 —&amp;gt; 生成器生成一个流&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;def hello_world():
    yield "Hello"
    yield "world"

for x in hello_world():
    print x

Hello
world
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="evens-generator"&gt;Evens generator&lt;a class="headerlink" href="#evens-generator" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;def evens(stream):
    for n in stream:
        if n % 2 == 0:
            yield n

for n in evens(nums):
    do_something(n)
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="_9"&gt;对迭代提炼&lt;a class="headerlink" href="#_9" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;~ Abstracting your iteration&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;f = open("my_config.ini")
for line in f:
    line = line.strip()
    if line.startswith('#'):
        # A comment line, skip it.
        continue
    if not line:
        # A blank line, skip it.
        continue

    # An interesting line.
    do_something(line)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;自制生成器:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;def interesting_lines(f):
    for line in f:
        line = line.strip()
        if line.startswith('#'):
            continue
        if not line:
            continue
        yield line

with open("my_config.ini") as f:
    for line in interesting_lines(f):
        do_something(line)

with open("my_other.dat") as f2:
    for line in interesting_lines(f2):
        do_something_else(line)
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="q_2"&gt;Q: 如何从两层循环中退出?&lt;a class="headerlink" href="#q_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for row in range(height):
    for col in range(width):

        value = spreadsheet.get_value(col, row)
        do_something(value)

        if this_is_my_value(value):
            break   # ← ???
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="a"&gt;A: 合并循环&lt;a class="headerlink" href="#a" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;def range_2d(width, height):
    """Produce a stream of two-D coordinates."""
    for y in range(height):
        for x in range(width):
            yield x, y

for col, row in range_2d(width, height):
    value = spreadsheet.get_value(col, row)
    do_something(value)

    if this_is_my_value(value):
        break
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="better"&gt;Better: 单元迭代&lt;a class="headerlink" href="#better" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for cell in spreadsheet.cells():
    value = cell.get_value()
    do_something(value)

    if this_is_my_value(value):
        break
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="_10"&gt;底层迭代&lt;a class="headerlink" href="#_10" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;可迭代: 能生成迭代 Iterable: produces an iterator&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;迭代器: 生成一个值流 Iterator: produces a stream of values&lt;/p&gt;
&lt;p&gt;iterator = iter(iterable)  # iterable.&lt;strong&gt;iter&lt;/strong&gt;()
value = next(iterator)     # iterator.next() or .&lt;strong&gt;next&lt;/strong&gt;()
value = next(iterator) …&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;迭代器仅有一个操作: &lt;code&gt;next()&lt;/code&gt;&lt;/p&gt;
&lt;h3 id="_11"&gt;迭代基层操作&lt;a class="headerlink" href="#_11" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;有时很有用:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;with open("blah.dat") as f:
    # Read the first line
    header_line = next(f)

    # Read the rest
    for data_line in f:
        # ...
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="_12"&gt;构造自制对象可迭代&lt;a class="headerlink" href="#_12" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kr"&gt;class&lt;/span&gt; &lt;span class="nx"&gt;ToDoList&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;object&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="nx"&gt;def&lt;/span&gt; &lt;span class="nx"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="nx"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tasks&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

    &lt;span class="nx"&gt;def&lt;/span&gt; &lt;span class="nx"&gt;__iter__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tasks&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nx"&gt;todo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;ToDoList&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;...&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;task&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nx"&gt;todo&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="p"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;仅仅需要定义 &lt;code&gt;__iter__()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="iter"&gt;&lt;strong&gt;iter&lt;/strong&gt; 生成器&lt;a class="headerlink" href="#iter" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kr"&gt;class&lt;/span&gt; &lt;span class="nx"&gt;ToDoList&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;object&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="nx"&gt;def&lt;/span&gt; &lt;span class="nx"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="nx"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tasks&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

    &lt;span class="nx"&gt;def&lt;/span&gt; &lt;span class="nx"&gt;__iter__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;task&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nx"&gt;self.tasks&lt;/span&gt;:
            &lt;span class="kt"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;not&lt;/span&gt; &lt;span class="nx"&gt;task.done&lt;/span&gt;:
                &lt;span class="kt"&gt;yield&lt;/span&gt; &lt;span class="nx"&gt;task&lt;/span&gt;

    &lt;span class="nx"&gt;def&lt;/span&gt; &lt;span class="nx"&gt;all&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tasks&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="nx"&gt;def&lt;/span&gt; &lt;span class="nx"&gt;done&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;t&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nx"&gt;t&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nx"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tasks&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;done&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="_13"&gt;(￣▽￣)&lt;a class="headerlink" href="#_13" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;迭代无处不在&lt;/li&gt;
&lt;li&gt;Python 内置了干净强大的模型支持迭代&lt;/li&gt;
&lt;li&gt;抽象和定制你的迭代吧!&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_14"&gt;是也乎&lt;a class="headerlink" href="#_14" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;160613 空先发&lt;/li&gt;
&lt;li&gt;160531 动念&lt;/li&gt;
&lt;/ul&gt;</content><category term="pythonic"></category><category term="pythoneer"></category><category term="loop"></category><category term="coder"></category></entry><entry><title>如何在 Leo 中协作?!</title><link href="http://blog.zoomquiet.io/how2collaborate-with-leo.html" rel="alternate"></link><published>2016-04-17T00:00:00+08:00</published><updated>2016-04-17T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2016-04-17:/how2collaborate-with-leo.html</id><summary type="html">
&lt;h1 id="leo"&gt;Leo?&lt;a class="headerlink" href="#leo" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;~ 嗯哼&lt;/p&gt;
&lt;p&gt;研究什么是 Leo ? 非要一句话说清查的话,只能是:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;纯 Python 构建的文学化编辑环境&lt;/code&gt;&lt;ul&gt;
&lt;li&gt;好吧, 那什么是 &lt;code&gt;文学化编辑&lt;/code&gt; ?&lt;/li&gt;
&lt;li&gt;这事儿, 俺就没办法说清楚了….&lt;/li&gt;
&lt;li&gt;根据俺一向的宣称: &lt;code&gt;教不会别人的,一定也是自己并不真正理解的&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;这点,俺认!&lt;ul&gt;
&lt;li&gt;参考: &lt;a href="http://wiki.woodpecker.org.cn/moin/LeoEnvironment"&gt;LeoEnvironment - Woodpecker Wiki for &lt;span class="caps"&gt;CPUG&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;以及 &lt;a href="http://wiki.woodpecker.org.cn/moin/ZqStudy/MyLearningSkill#Leo"&gt;ZqStudy/MyLearningSkill - Woodpecker Wiki for &lt;span class="caps"&gt;CPUG&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;就知道, 俺从 05 年上了船…就一直反复的四处宣传 Leo 的舒爽…&lt;ul&gt;
&lt;li&gt;可惜,一直就没有找到一个真正 &lt;code&gt;直指人心&lt;/code&gt; 的 文学化编辑/程 的描述姿势&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;好吧,再次尝试一下:&lt;/p&gt;
&lt;h2 id="literate-programming"&gt;Literate Programming …&lt;/h2&gt;</summary><content type="html">
&lt;h1 id="leo"&gt;Leo?&lt;a class="headerlink" href="#leo" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;~ 嗯哼&lt;/p&gt;
&lt;p&gt;研究什么是 Leo ? 非要一句话说清查的话,只能是:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;纯 Python 构建的文学化编辑环境&lt;/code&gt;&lt;ul&gt;
&lt;li&gt;好吧, 那什么是 &lt;code&gt;文学化编辑&lt;/code&gt; ?&lt;/li&gt;
&lt;li&gt;这事儿, 俺就没办法说清楚了….&lt;/li&gt;
&lt;li&gt;根据俺一向的宣称: &lt;code&gt;教不会别人的,一定也是自己并不真正理解的&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;这点,俺认!&lt;ul&gt;
&lt;li&gt;参考: &lt;a href="http://wiki.woodpecker.org.cn/moin/LeoEnvironment"&gt;LeoEnvironment - Woodpecker Wiki for &lt;span class="caps"&gt;CPUG&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;以及 &lt;a href="http://wiki.woodpecker.org.cn/moin/ZqStudy/MyLearningSkill#Leo"&gt;ZqStudy/MyLearningSkill - Woodpecker Wiki for &lt;span class="caps"&gt;CPUG&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;就知道, 俺从 05 年上了船…就一直反复的四处宣传 Leo 的舒爽…&lt;ul&gt;
&lt;li&gt;可惜,一直就没有找到一个真正 &lt;code&gt;直指人心&lt;/code&gt; 的 文学化编辑/程 的描述姿势&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;好吧,再次尝试一下:&lt;/p&gt;
&lt;h2 id="literate-programming"&gt;Literate Programming&lt;a class="headerlink" href="#literate-programming" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;~ &lt;a href="http://wiki.woodpecker.org.cn/moin/LiterateProgramming"&gt;文学编程&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;先请出 &lt;a href="http://leoeditor.com/leo_toc.html"&gt;Leo&lt;/a&gt; 创始人 令德华(&lt;a href="http://leoeditor.com/ekr.html"&gt;Edward K. Ream&lt;/a&gt;) &lt;/p&gt;
&lt;p&gt;~ 老令公 在 PyCon2013China 大会上分享的视频 &lt;a href="http://zoomq.qiniudn.com/pychina/PyCon2013China/PyConChina2013-EKR-final-v2.mp4"&gt;PyConChina2013-&lt;span class="caps"&gt;EKR&lt;/span&gt;-intro-Leo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;不那么简单的说就是:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;文学化编程, 超脱具体编程语言的语法规定&lt;/li&gt;
&lt;li&gt;以人的思维结构为记述形式, 进行好象文学创作一样的编程!&lt;/li&gt;
&lt;li&gt;其具体现实:&lt;ul&gt;
&lt;li&gt;利用类似 &lt;code&gt;&amp;lt;&amp;lt;此处有惊喜&amp;gt;&amp;gt;&lt;/code&gt; 的结构标注符&lt;/li&gt;
&lt;li&gt;在源代码中,替代各种级别的代码块&lt;/li&gt;
&lt;li&gt;将程序的编写和源文件的储存格式分离了&lt;ul&gt;
&lt;li&gt;在代码撰写界面中,面对的是完全个性化的抽象结构描述&lt;/li&gt;
&lt;li&gt;同时,又可以随时进入自定逻辑区间内, 填充标准语法的源代码&lt;/li&gt;
&lt;li&gt;最后,自动将所有 结构标注符 在输出的源文件中展开&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;这样,同时兼顾了人的自然思维表述,和严格语法要求的源代码形式 &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;是的, 这一思想源自 &lt;img alt="Donald E. Knuth" src="http://www-cs-faculty.stanford.edu/~knuth/chop.gif"&gt;, 他原创的 &lt;span class="caps"&gt;WEB&lt;/span&gt; 语言最早实现了 文学化编程&lt;/img&gt;&lt;/li&gt;
&lt;li&gt;Leo 则是 Python 实现的,可能是最易用的 文学化编辑/程 环境!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="Leo4" src="http://leoeditor.com/_static/Leo4-80-border.jpg"/&gt;&lt;/p&gt;
&lt;h2 id="collaborate-problem"&gt;collaborate problem&lt;a class="headerlink" href="#collaborate-problem" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;~ 如果前述解释看不懂,那就对了!&lt;/p&gt;
&lt;p&gt;但是,不影响,俺的故事分享…&lt;/p&gt;
&lt;p&gt;Leo 包含的编程思想这么 bigger ,一般人在 &lt;span class="caps"&gt;IDE&lt;/span&gt; 环境中,当然是无法理解,
也没有动力尝试的…
所以, 早在 2013 年, Leo 列表中, &lt;span class="caps"&gt;EKR&lt;/span&gt; 就有相应思考&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="n"&gt;Edward&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;Ream&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;edreamleo&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;gmail&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;com&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="n"&gt;reply&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="n"&gt;leo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;editor&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;googlegroups&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;com&lt;/span&gt;
&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;leo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;editor&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;googlegroups&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;com&lt;/span&gt;
&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   &lt;span class="n"&gt;Thu&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Oct&lt;/span&gt; &lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2013&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;33&lt;/span&gt; &lt;span class="n"&gt;PM&lt;/span&gt;
&lt;span class="n"&gt;subject&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="n"&gt;How&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;collaborate&lt;/span&gt; &lt;span class="n"&gt;using&lt;/span&gt; &lt;span class="n"&gt;Leo&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;为了讨论时,更加友好,老令公 创造了两个人事&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;能享受文学化编程的 Leo 用户 称为 Leonine (L Leo users, Leonard …)&lt;/li&gt;
&lt;li&gt;还没有理解 Leo 的其它程序猿 称为 Nancy (N non-Leo users)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当时,大家一致的共识:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;为了 Leo 良好工作, 最终源代码中包含的 结构注释(Sentinels) 是必须的&lt;/li&gt;
&lt;li&gt;但是, 对于 Nancy 而言 Sentinels 是无意义的混乱字符&lt;/li&gt;
&lt;li&gt;所以,若要 Leonine 们能和 Nancy 们愉快的一起工作,必须解决这一矛盾!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;三年前,俺提议的是:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;利用类似 hg/git 仓库的 hooks 机制&lt;/li&gt;
&lt;li&gt;在提交仓库前,通过 hooks 脚本,自动的完成 L-&amp;gt;N 两型代码的互转化&lt;/li&gt;
&lt;li&gt;确保, Leonine 们在 Leo 中,有正确的团队代码,以及自己的结构记述&lt;/li&gt;
&lt;li&gt;同时, Nancy 们永远不知道 Leo 的存在!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;问题在:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;版本管理系统很多,每种都有自个儿的 hooks 机制&lt;/li&gt;
&lt;li&gt;要想真正实用化这种自动机制, Leo 社区要维护越来越多的 hooks 脚本&lt;/li&gt;
&lt;li&gt;同时,还得想办法减少每次进行个团队仓库时的配置工作&lt;/li&gt;
&lt;li&gt;嗯哼,想想都是越来越多的任务…&lt;/li&gt;
&lt;li&gt;所以,当年 老令公 曰:&lt;ul&gt;
&lt;li&gt;此法妙&lt;/li&gt;
&lt;li&gt;然俺无空&lt;/li&gt;
&lt;li&gt;谁想上,谁上…&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span class="caps"&gt;PS&lt;/span&gt;:
所谓 &lt;code&gt;结构注释&lt;/code&gt; 其实就是标准注释,类似:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#@+&amp;lt;&amp;lt;imports&amp;gt;&amp;gt;
#@+node:zoomq.20160416174346.3: ** &amp;lt;&amp;lt;imports&amp;gt;&amp;gt;
#@+others
#@+node:zoomq.20160416174346.4: *3* in-build
#@+node:zoomq.20160416174346.5: *3* 3party
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;虽然吻合对应语言的注释约定 (嗯哼, Leo 可以进行任何语言的编程,不仅仅是 Py);
其实,就是将 Leo (.leo 文件本身其实就是 xml) 中,树形节点的结构描述, 转化为线性注释而已.&lt;/p&gt;
&lt;h2 id="terror-story"&gt;terror story&lt;a class="headerlink" href="#terror-story" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;~ 于是, 发生了这样的恐怖故事…&lt;/p&gt;
&lt;p&gt;之前,俺知道 Leo 中有种 &lt;code&gt;@shadow&lt;/code&gt; 指令&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在 Leo 中,标注在文件节点名前&lt;/li&gt;
&lt;li&gt;形如: &lt;code&gt;@shadow path/2/foo.py&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;进行保存时,将自动作以下操作:&lt;ul&gt;
&lt;li&gt;在 &lt;code&gt;path/2/&lt;/code&gt; 中建立 &lt;code&gt;path/2/.leo_shadow&lt;/code&gt; 隐藏目录&lt;/li&gt;
&lt;li&gt;在其中输出 &lt;code&gt;path/2/.leo_shadow/xfoo.py&lt;/code&gt; 包含 &lt;code&gt;结构注释&lt;/code&gt; 的源代码文件&lt;/li&gt;
&lt;li&gt;同时输出 &lt;code&gt;path/2/foo.py&lt;/code&gt; 干净的,不包含 &lt;code&gt;结构注释&lt;/code&gt; 的源代码文件&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;这样,通过 git 工具提交到团队仓库时&lt;ul&gt;
&lt;li&gt;Leonine 通过 &lt;code&gt;.leo_shadow&lt;/code&gt; 中的文件确保 Leo 中结构树的可用&lt;/li&gt;
&lt;li&gt;Nancy 们继续用 &lt;span class="caps"&gt;IDE&lt;/span&gt; 环境维护自然的干净的只有语法结构而没有思维结构的源代码文件&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以,在团队代码仓库中,俺自信的将 .leo 文件也放了进来,
并对管理的所有代码节点, 前缀了&lt;code&gt;@shadow&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;某天, 快乐的部署了 &lt;code&gt;git-flow&lt;/code&gt; 然后,基于 &lt;code&gt;hotfix&lt;/code&gt; 流程,进行每天的开发…&lt;/p&gt;
&lt;p&gt;杯具就这样种下了:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在俺完成了全天的开发,高兴的将上千行代码 &lt;code&gt;git flow hotfix finish&lt;/code&gt; 提交时&lt;/li&gt;
&lt;li&gt;顺利的话应该是:&lt;ul&gt;
&lt;li&gt;自动合并 &lt;code&gt;hotfix/我的修订&lt;/code&gt; 到 &lt;code&gt;develop&lt;/code&gt; 以及 &lt;code&gt;master&lt;/code&gt; 分支&lt;/li&gt;
&lt;li&gt;然后杀掉 &lt;code&gt;hotfix/我的修订&lt;/code&gt; 分支&lt;/li&gt;
&lt;li&gt;最后,人工切换到 &lt;code&gt;master&lt;/code&gt; 分支, &lt;code&gt;git push&lt;/code&gt; 就好&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;残念的是:&lt;ul&gt;
&lt;li&gt;git 无法自动合并,&lt;/li&gt;
&lt;li&gt;因为 .leo 文件在几个分支中差异冲突!&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;好吧, 这是必然的,,,虽然没有人修订 .leo 文件,但是,为了尝试各种代码&lt;ul&gt;
&lt;li&gt;过程中,进行了大量的节点调整&lt;/li&gt;
&lt;li&gt;另外, Leo 文件是无法共同维护的&lt;/li&gt;
&lt;li&gt;因为,每个人对代码内在逻辑结构的理解是不同的,不能强求&lt;/li&gt;
&lt;li&gt;所以, Leo 文件并不必须在仓库中管理&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;所以, 俺自然的想到移走 .leo 文件, 再议尝试 &lt;code&gt;hotfix finish&lt;/code&gt; 就好的哪!&lt;ul&gt;
&lt;li&gt;恐怖的是,打开 Leo 文件,一片空白!&lt;/li&gt;
&lt;li&gt;一激动按了保存,连外部的 &lt;code&gt;.leo_shadow&lt;/code&gt; 中以及仓库中所有源代码文件也都清空了!&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;傻了几分钟后, 开始补救:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;当前被 git-flow 自动跳回了 &lt;code&gt;develop&lt;/code&gt; 分支&lt;/li&gt;
&lt;li&gt;先用 &lt;code&gt;git reset --hard&lt;/code&gt; 恢复工作区状态&lt;/li&gt;
&lt;li&gt;然后, 切换到 &lt;code&gt;hotfix/我的修订&lt;/code&gt; 分支&lt;/li&gt;
&lt;li&gt;将所有 &lt;code&gt;@shadow&lt;/code&gt; 变成 &lt;code&gt;@nosent&lt;/code&gt;, 再保存 .leo 文件&lt;ul&gt;
&lt;li&gt;这才想起来 &lt;code&gt;@shadow&lt;/code&gt; 后, Leo 文件中本身就不包含代码文本了&lt;/li&gt;
&lt;li&gt;完全依赖 &lt;code&gt;.leo_shadow&lt;/code&gt; 中包含 &lt;code&gt;结构注释&lt;/code&gt; 的影子文件&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@nosent&lt;/code&gt; 则相反,输出的文件是干净的,所有信息都在 Leo 文件中&lt;ul&gt;
&lt;li&gt;主要问题在, 这是单向的&lt;/li&gt;
&lt;li&gt;如果代码在外部,由其它人员修订了&lt;/li&gt;
&lt;li&gt;Leo 是无从得知的,只能人工逐点合并进来&lt;/li&gt;
&lt;li&gt;当然 &lt;code&gt;@shadow&lt;/code&gt; 也有相同问题&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;再移出 .leo 文件, 修订其中的目录声明&lt;/li&gt;
&lt;li&gt;再次 &lt;code&gt;git flow hotfix finish&lt;/code&gt; 提交&lt;/li&gt;
&lt;li&gt;呜乎, 一切正常了…&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="clean-all"&gt;clean all&lt;a class="headerlink" href="#clean-all" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;~ 惊魂稍定,想起来当年的讨论…&lt;/p&gt;
&lt;p&gt;先回顾文档,发现:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://leoeditor.com/tutorial-programming.html#summary-clean-vs-file"&gt;Programming with Leo — Leo 5.2 documentation&lt;/a&gt; 也详细阐述了团队中协同的建议:&lt;ul&gt;
&lt;li&gt;如果全体都用 Leo 那么所有文件节点用 &lt;code&gt;@file&lt;/code&gt; 声明&lt;/li&gt;
&lt;li&gt;否则,强烈建议 Leonine 用 &lt;code&gt;@clean&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;因为, 去年刚刚完成了 &lt;a href="http://leoeditor.com/appendices.html#the-mulder-ream-update-algorithm"&gt;mulder/ream 更新算法&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;原来, Leo 一直使用内置的 &lt;code&gt;difflib&lt;/code&gt; 模块&lt;ul&gt;
&lt;li&gt;基于 &lt;code&gt;Bernhard Mulder&lt;/code&gt; 实现的文本差异算法&lt;/li&gt;
&lt;li&gt;自动将包含 &lt;code&gt;结构注释&lt;/code&gt; 文件的差异,还原入 Leo 中的节点树&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;现在, 在以往的基础上, &lt;span class="caps"&gt;EKR&lt;/span&gt; 意识到,这种差异不一定非要在实际文件中记述!&lt;/li&gt;
&lt;li&gt;所以,现在的 &lt;code&gt;@clean&lt;/code&gt; 指令进行如下神妙的处理:&lt;ul&gt;
&lt;li&gt;首先,用原先 &lt;code&gt;@file&lt;/code&gt; 指令算法将当前最新节点输出为包含 &lt;code&gt;结构注释&lt;/code&gt; 的文件&lt;/li&gt;
&lt;li&gt;再用相同算法,从外部对应文件读入,解析为 包含 &lt;code&gt;结构注释&lt;/code&gt; 的文件&lt;/li&gt;
&lt;li&gt;最后,用内置的 &lt;code&gt;difflib&lt;/code&gt; 模块对比以上两个文件&lt;/li&gt;
&lt;li&gt;获得好似原先,都用 &lt;code&gt;@file&lt;/code&gt; 指令进行协同时的差异恢复序列&lt;/li&gt;
&lt;li&gt;将外部差异,从 无 &lt;code&gt;结构注释&lt;/code&gt; 的文件合并回来!&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;ರ_ರ&lt;/code&gt; ! 
这比,俺之前建议的,通过版本系统的 hooks 进行预处理,要更加无感知哪! 老令公的脑洞依然给力哪!&lt;/p&gt;
&lt;h2 id="historic"&gt;historic&lt;a class="headerlink" href="#historic" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;~ &lt;a href="http://leoeditor.com/history.html#genesis-of-clean"&gt;History of Leo — Leo 5.2 documentation&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="EKR" src="https://d262ilb51hltx0.cloudfront.net/max/700/1*yKVZtcJyfh-FHNEtXrqjPw.jpeg"&gt; &lt;/img&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1980 接触了 &lt;span class="caps"&gt;CWEB&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;1995 决心实现类似软件&lt;/li&gt;
&lt;li&gt;1996~98 在 Apple 的 YellowBox 中尝试&lt;/li&gt;
&lt;li&gt;1999~2001 在 Borland C++ 中折腾&lt;/li&gt;
&lt;li&gt;2001 遇到 Python,快速基于 Tk 完成了软件原型!&lt;/li&gt;
&lt;li&gt;2002 使用 &lt;code&gt;@file&lt;/code&gt; 指令来完成代码的汇入/出&lt;/li&gt;
&lt;li&gt;2003 迁移工程进入 SourceForge,正式发行 Leo&lt;/li&gt;
&lt;li&gt;2004 4.2发布 解决部分 gnx (Global Node Index) 和 uA (User Attributes) 同步问题&lt;/li&gt;
&lt;li&gt;2008 增强了几百种功能&lt;/li&gt;
&lt;li&gt;2009 终于和 Tk 友尽,全面迁移到 Qt 平台&lt;/li&gt;
&lt;li&gt;2014 5.0 发布! 能和 Vim 玩在一起了&lt;/li&gt;
&lt;li&gt;2015 5.1 发布, 这年一月的 &lt;code&gt;Aha&lt;/code&gt; 事件,激发了 &lt;code&gt;@clean&lt;/code&gt; 的诞生&lt;ul&gt;
&lt;li&gt;Leo 就此能真正流行开来了!&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;以及: &lt;a href="http://leoeditor.com/leonine-world.html"&gt;The Leonine World — Leo 5.2 documentation&lt;/a&gt;&lt;/p&gt;
&lt;h1 id="summary"&gt;summary&lt;a class="headerlink" href="#summary" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;i store up this mail in gmail, but never try to fixed code flow &lt;span class="caps"&gt;EKR&lt;/span&gt;’s point. 
thanks for &lt;span class="caps"&gt;EKR&lt;/span&gt;’s Aha, 3 years question, fixed in Leo 5.2 !
notice this, just after terror story:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;i always use Leo to develop complex scripts&lt;ul&gt;
&lt;li&gt;when start PyQt4 coding, also base Leo&lt;/li&gt;
&lt;li&gt;but, this time under git-flow&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;even upgrade into Leo 5.2, but my skill stan as 4.0&lt;ul&gt;
&lt;li&gt;as one Leonine, for Nancy in teams&lt;/li&gt;
&lt;li&gt;i had usage @shadow&lt;/li&gt;
&lt;li&gt;and of course put .leo into git repository too&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;so in the beginning:&lt;ul&gt;
&lt;li&gt;after 4 hours coding, happy finished one feature develop&lt;/li&gt;
&lt;li&gt;base git-flow input:&lt;ul&gt;
&lt;li&gt;$ git flow hotfix finish &lt;span class="caps"&gt;BIG&lt;/span&gt;-&lt;span class="caps"&gt;FEATURE&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;as normal git-flow will:&lt;ul&gt;
&lt;li&gt;Latest objects have been fetched from ‘origin’&lt;/li&gt;
&lt;li&gt;Hotfix branch has been merged into ‘master’&lt;/li&gt;
&lt;li&gt;The hotfix was tagged ‘&lt;span class="caps"&gt;BIG&lt;/span&gt;-&lt;span class="caps"&gt;FEATURE&lt;/span&gt;’&lt;/li&gt;
&lt;li&gt;Hotfix branch has been back-merged into ‘develop’&lt;/li&gt;
&lt;li&gt;Hotfix branch ‘hotfix/&lt;span class="caps"&gt;BIG&lt;/span&gt;-&lt;span class="caps"&gt;FEATURE&lt;/span&gt;’ has been deleted&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;BUT&lt;/span&gt;!!! because .leo also in git&lt;ul&gt;
&lt;li&gt;and can not Auto-merging with old version&lt;/li&gt;
&lt;li&gt;the git-flow hotfix flow break&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;terror start:&lt;ul&gt;
&lt;li&gt;try move .leo out git repository, and change @path&lt;/li&gt;
&lt;li&gt;wants re-write all scripts, merge again&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;BUT&lt;/span&gt;! i forgot @shadown node &lt;span class="caps"&gt;NOT&lt;/span&gt; save data for code&lt;/li&gt;
&lt;li&gt;so, after cmd+s, i got empty .py and .leo_shadow/*.py&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;CAN&lt;/span&gt; &lt;span class="caps"&gt;MOVE&lt;/span&gt; minutes for so terror:&lt;ul&gt;
&lt;li&gt;luck remember git keep all verion in breach&lt;/li&gt;
&lt;li&gt;so revert develop breach&lt;/li&gt;
&lt;li&gt;change back ‘hotfix/&lt;span class="caps"&gt;BIG&lt;/span&gt;-&lt;span class="caps"&gt;FEATURE&lt;/span&gt;’&lt;ul&gt;
&lt;li&gt;into .leo change all @shadow to @nosent&lt;/li&gt;
&lt;li&gt;move .leo out git repository&lt;/li&gt;
&lt;li&gt;chnage @path&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;re-try &lt;code&gt;$ git flow hotfix finish BIG-FEATURE&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;kill the terror time&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;through this, i learned:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;.leo is too personal , need not put into git repositry&lt;/li&gt;
&lt;li&gt;@shadow is not strong enough&lt;/li&gt;
&lt;li&gt;nust use new directive&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;so review leo document, largh in Aha time ;-) 
and recheck : &lt;a href="http://leoeditor.com/appendices.html#the-mulder-ream-update-algorithm"&gt;Appendices — Leo 5.2 documentation&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;notice @clean, and make confirm in:
Summary: @clean vs @file -&amp;gt; &lt;a href="http://leoeditor.com/tutorial-programming.html#summary-clean-vs-file"&gt;Programming with Leo — Leo 5.2 documentation&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;for working with Nancy, i need @clean forever!&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;BUT&lt;/span&gt; the new leo-flow with git-flow is lost one command?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;how to updating @cloean nodes in Leo? need not to restart Leo?&lt;/li&gt;
&lt;li&gt;in my test:&lt;ul&gt;
&lt;li&gt;edit .py out leo, make conflict&lt;/li&gt;
&lt;li&gt;try cmd+s, leo alert:&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;… .py
 has changed outside Leo.
Overwrite the outline node?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;but try all kind of command in file menus&lt;/li&gt;
&lt;li&gt;not found withch one make Leo :&lt;ul&gt;
&lt;li&gt;read out .py&lt;/li&gt;
&lt;li&gt;base The Mulder/Ream algorithm updaing nodes&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;so i had to clode all Leo windows&lt;/li&gt;
&lt;li&gt;restart Leo, so the “Recovered Nodes” auto generated&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="_1"&gt;是也乎&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;~ 参考俺的有关演讲幻灯: &lt;a href="http://s5rst.qiniucdn.com/131101-leo-china/index.html"&gt;Leo&lt;/a&gt; 
令老爷子,长达42年的编程经历,在不少成品问世,但是,除了维持生计的商业软件,
就是 Leo 这一非常冷门的编辑器软件,
从意动,到越来越易用,坚持了 35 年! 独自坚持完善,改进!&lt;/p&gt;
&lt;p&gt;&lt;img alt="ekr-github-leo-graphs" src="http://zoomq.qiniudn.com/ZQCollection/snap/leo/ekr-github-leo-graphs.png"/&gt;&lt;/p&gt;
&lt;p&gt;08年初,工程迁移到 github (&lt;a href="https://github.com/leo-editor/leo-editor/graphs/contributors"&gt;leo-editor/leo-editor&lt;/a&gt;)至今, 12,815 次提交中,
依然绝大多数是 &lt;span class="caps"&gt;EKR&lt;/span&gt; push 的! &lt;/p&gt;
&lt;p&gt;也就是说,还没有另外一位程序猿,能替代已经至少60岁的 令德华(&lt;a href="http://leoeditor.com/ekr.html"&gt;Edward K. Ream&lt;/a&gt;), 老令公 !!!&lt;/p&gt;
&lt;p&gt;&lt;img alt="ekr2" src="http://leoeditor.com/ekr2.gif"/&gt;&lt;/p&gt;
&lt;p&gt;只能祝 &lt;strong&gt;&lt;span class="caps"&gt;LL&lt;/span&gt;&amp;amp;P&lt;/strong&gt; 了&lt;/p&gt;
&lt;p&gt;&lt;code&gt;live long and prosper&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;160417 整理分享&lt;/li&gt;
&lt;li&gt;160416 惊悚故事&lt;/li&gt;
&lt;li&gt;131024 发愿&lt;/li&gt;
&lt;/ul&gt;</content><category term="EKR"></category><category term="Leo"></category><category term="pythonic"></category></entry><entry><title>Leo 5.2 theme custom</title><link href="http://blog.zoomquiet.io/leo5theme.html" rel="alternate"></link><published>2016-04-15T00:00:00+08:00</published><updated>2016-04-15T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2016-04-15:/leo5theme.html</id><summary type="html">
&lt;h1 id="en"&gt;&lt;span class="caps"&gt;EN&lt;/span&gt;&lt;a class="headerlink" href="#en" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;thanks guys in &lt;code&gt;leo-editor@googlegroups.com&lt;/code&gt; :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Terry Brown&lt;/li&gt;
&lt;li&gt;john lunzer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;make me know how to custom Leo theme step by step:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;old versions &lt;code&gt;myLeoSettings.leo&lt;/code&gt; appended buttons :&lt;ul&gt;
&lt;li&gt;at &lt;code&gt;leo/myLeoSettings.leo#Startup--&amp;gt;Local buttons&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;need copy from  &lt;code&gt;leoSettings.leo&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;so my custome flow as:&lt;ul&gt;
&lt;li&gt;try edit some node&lt;/li&gt;
&lt;li&gt;click …&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">
&lt;h1 id="en"&gt;&lt;span class="caps"&gt;EN&lt;/span&gt;&lt;a class="headerlink" href="#en" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;thanks guys in &lt;code&gt;leo-editor@googlegroups.com&lt;/code&gt; :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Terry Brown&lt;/li&gt;
&lt;li&gt;john lunzer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;make me know how to custom Leo theme step by step:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;old versions &lt;code&gt;myLeoSettings.leo&lt;/code&gt; appended buttons :&lt;ul&gt;
&lt;li&gt;at &lt;code&gt;leo/myLeoSettings.leo#Startup--&amp;gt;Local buttons&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;need copy from  &lt;code&gt;leoSettings.leo&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;so my custome flow as:&lt;ul&gt;
&lt;li&gt;try edit some node&lt;/li&gt;
&lt;li&gt;click &lt;code&gt;reload-styles&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;open other &lt;code&gt;.leo&lt;/code&gt; , check effect&lt;/li&gt;
&lt;li&gt;close it&lt;/li&gt;
&lt;li&gt;loop up steps&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;finally all i custom in  &lt;code&gt;~/.leo/myLeoSettings.leo&lt;/code&gt; :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;appended help menus:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#@settings--&amp;gt;Menus--&amp;gt;@menus--&amp;gt;@menu &amp;amp;Help--&amp;gt;@item open-myLeoSettings-leo&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;bigger cursor:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#@settings--&amp;gt;Qt Gui Misc settings--&amp;gt;@int qt-cursor-width = 6&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;font changed:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#@settings--&amp;gt;Appearance (change these first)--&amp;gt;Qt Gui settings--&amp;gt;Fonts--&amp;gt;Basic Fonts (change these first)--&amp;gt;@string font-family = Input, Droid Sans Mono, DejaVu Sans Mono&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;body-bg dark:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#@settings--&amp;gt;Appearance (change these first)--&amp;gt;Qt Gui settings--&amp;gt;Colors--&amp;gt;Body pane colors--&amp;gt;@color body-bg = #2F3337&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;close Gutter:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#@settings--&amp;gt;Appearance (change these first)--&amp;gt;Qt Gui settings--&amp;gt;Margins &amp;amp; borders--&amp;gt;Gutter--&amp;gt;@bool use-gutter = False&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;custom border-focus-color:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;myLeoSettings.leo#@settings--&amp;gt;Appearance (change these first)--&amp;gt;Qt Gui settings--&amp;gt;Colors--&amp;gt;Border colors--&amp;gt;@color focused-border-focus-color = #85C2FF&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Python syntax coloring:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#@settings--&amp;gt;Syntax coloring--&amp;gt;Language-specific colors--&amp;gt;Python&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;appended nodes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;@color blank_color = grey
@color tab_color = red
@color label_color = red
@color keyword1_color = #268bd2
@color keyword2_color = #2aa198
@color keyword3_color = #859900
@color keyword4_color = #268bd2
@color literal1_color = #cb4b16
@color literal2_color = #b58900
@color literal3_color = #dc322f
@color literal4_color = #859900
@color markup_color = #2aa198
@color comment1_color = #557755
@color comment2_color = #557755
@color comment3_color = #557755
@color comment4_color = #557755
@color operator_color = #bbbbbb
@color function_color = #cb4b16
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;self&lt;/code&gt; with coloring&lt;ul&gt;
&lt;li&gt;fixed &lt;code&gt;path/2/installed/leo/modes/python.py&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;appended &lt;code&gt;"self": "keyword4",&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="_1"&gt;是也乎&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;~ 老问题新解决&lt;/p&gt;
&lt;h2 id="_2"&gt;背景&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://leoeditor.com/leo_toc.html"&gt;Leo&lt;/a&gt; &lt;img alt="Leo4" src="http://leoeditor.com/_static/Leo4-80-border.jpg"/&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;参考: &lt;a href="http://wiki.woodpecker.org.cn/moin/LeoEnvironment"&gt;LeoEnvironment - Woodpecker Wiki for &lt;span class="caps"&gt;CPUG&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;从 05 年开始使用&lt;/li&gt;
&lt;li&gt;从笔记到工程管理,都用的非常欢实&lt;/li&gt;
&lt;li&gt;是 令德华(&lt;a href="http://leoeditor.com/ekr.html"&gt;Edward K. Ream&lt;/a&gt;) 独立创建并长期维护的,完备的文学化编辑环境&lt;/li&gt;
&lt;li&gt;09年从 Tk 迁移到 Qt 后平滑的跟随俺转战 M$/Ubuntu/&lt;span class="caps"&gt;MAC&lt;/span&gt; 所有桌面系统&lt;/li&gt;
&lt;li&gt;嗯哼,完全基于 Python 开发的…&lt;/li&gt;
&lt;li&gt;详细介绍,参考 &lt;a href="http://zoomq.qiniudn.com/pychina/PyCon2013China/PyConChina2013-EKR-final-v2.mp4"&gt;PyConChina2013-&lt;span class="caps"&gt;EKR&lt;/span&gt;-final-v2&lt;/a&gt; ~ 老令公 在 PyCon2013China 大会上分享的视频&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_3"&gt;问题&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;但是,使用最性感的编辑器 sublime text 后, 对 Leo 默认的界面就万般难以忍受了…&lt;/p&gt;
&lt;p&gt;终于决心折腾一下样式!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Leo 基于几个配置文件:&lt;ul&gt;
&lt;li&gt;默认配置 &lt;code&gt;path/2/installed/Leo/config/leoSettings.leo&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;用户配置 &lt;code&gt;~/.leo/myLeoSettings.leo&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;俺从 3.1 版本开始使用 Leo, 现在的稳定版本是 5.2&lt;/li&gt;
&lt;li&gt;所以, &lt;code&gt;~/.leo/myLeoSettings.leo&lt;/code&gt; 和官方的默认有较大偏差&lt;/li&gt;
&lt;li&gt;那么如何解决:&lt;ul&gt;
&lt;li&gt;启用&lt;a href="http://leoeditor.com/what-is-new.html#what-s-new-in-leo-4-11"&gt;Leo 4.11&lt;/a&gt; 开始有的 &lt;code&gt;sublime Text 2, a dark colorizing theme&lt;/code&gt;?&lt;/li&gt;
&lt;li&gt;如何令 &lt;code&gt;self&lt;/code&gt; 也有语法颜色?&lt;/li&gt;
&lt;li&gt;如何改变默认的 &lt;code&gt;cursor&lt;/code&gt; 尺寸?&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_4"&gt;过程&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;简单的说,手上的配置文件有这几种:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;~/.leo/myLeoSettings.leo&lt;/code&gt; 混杂了增补多年配置的可能不兼容配置&lt;/li&gt;
&lt;li&gt;&lt;code&gt;path/2/installed/Leo/config/leoSettings.leo&lt;/code&gt; 5.2 最新版本配置&lt;/li&gt;
&lt;li&gt;&lt;code&gt;path/2/installed/Leo/config/exampleSettings.leo&lt;/code&gt; 5.2 内置配置示例&lt;/li&gt;
&lt;li&gt;&lt;code&gt;path/2/installed/Leo/config/themes.leo&lt;/code&gt; 5.2 内置 theme 定制示例&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;先后进行的尝试:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在 &lt;code&gt;exampleSettings.leo&lt;/code&gt; 基础上&lt;ul&gt;
&lt;li&gt;先完成积累的习惯配置&lt;/li&gt;
&lt;li&gt;再进行 theme 配置&lt;/li&gt;
&lt;li&gt;失败! 原先的配置点太多:&lt;ul&gt;
&lt;li&gt;快捷键&lt;/li&gt;
&lt;li&gt;窗口布局&lt;/li&gt;
&lt;li&gt;字体&lt;/li&gt;
&lt;li&gt;颜色&lt;/li&gt;
&lt;li&gt;菜单…&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;在 &lt;code&gt;leoSettings.leo&lt;/code&gt; 基础上&lt;ul&gt;
&lt;li&gt;先完成积累的习惯配置&lt;/li&gt;
&lt;li&gt;再进行 theme 配置&lt;/li&gt;
&lt;li&gt;失败! 原因同上&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;最终只好一边询问社区列表,一边基于 &lt;code&gt;~/.leo/myLeoSettings.leo&lt;/code&gt; 进行配置&lt;ul&gt;
&lt;li&gt;从 &lt;code&gt;leoSettings.leo&lt;/code&gt; 复制相应最新配置树过来&lt;/li&gt;
&lt;li&gt;参考原先的进行对应配置&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_5"&gt;要点&lt;a class="headerlink" href="#_5" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;~成功将 &lt;img alt="leoeditor" src="http://leoeditor.com/screen-shots/render-svg-sources.png"&gt;
变成:
&lt;img alt="leo5.2_darktheme" src="http://zoomq.qiniudn.com/ZQCollection/snap/leo/leo5.2_darktheme.png"/&gt;&lt;/img&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;myLeoSettings.leo&lt;/code&gt; 的控制按钮:&lt;ul&gt;
&lt;li&gt;来自 &lt;code&gt;leo/myLeoSettings.leo#Startup--&amp;gt;Local buttons&lt;/code&gt;, 要从  &lt;code&gt;leoSettings.leo&lt;/code&gt; 复制&lt;/li&gt;
&lt;li&gt;这样进行之后的配置尝试时的流程才能固化为:&lt;ul&gt;
&lt;li&gt;进行对应 node 的修订&lt;/li&gt;
&lt;li&gt;点击 &lt;code&gt;reload-styles&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;打开另外一个 &lt;code&gt;.leo&lt;/code&gt; 观察效果&lt;/li&gt;
&lt;li&gt;关闭&lt;/li&gt;
&lt;li&gt;重复以上&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;相关 &lt;code&gt;~/.leo/myLeoSettings.leo&lt;/code&gt; 的配置点:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;追加帮助菜单:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#@settings--&amp;gt;Menus--&amp;gt;@menus--&amp;gt;@menu &amp;amp;Help--&amp;gt;@item open-myLeoSettings-leo&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;光标加粗:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#@settings--&amp;gt;Qt Gui Misc settings--&amp;gt;@int qt-cursor-width = 6&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;字体指定:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#@settings--&amp;gt;Appearance (change these first)--&amp;gt;Qt Gui settings--&amp;gt;Fonts--&amp;gt;Basic Fonts (change these first)--&amp;gt;@string font-family = Input, Droid Sans Mono, DejaVu Sans Mono&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;编辑窗口底色:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#@settings--&amp;gt;Appearance (change these first)--&amp;gt;Qt Gui settings--&amp;gt;Colors--&amp;gt;Body pane colors--&amp;gt;@color body-bg = #2F3337&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;关闭行数:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#@settings--&amp;gt;Appearance (change these first)--&amp;gt;Qt Gui settings--&amp;gt;Margins &amp;amp; borders--&amp;gt;Gutter--&amp;gt;@bool use-gutter = False&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;修订窗格激活提醒框&lt;ul&gt;
&lt;li&gt;&lt;code&gt;myLeoSettings.leo#@settings--&amp;gt;Appearance (change these first)--&amp;gt;Qt Gui settings--&amp;gt;Colors--&amp;gt;Border colors--&amp;gt;@color focused-border-focus-color = #85C2FF&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Python 语法颜色自定:&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#@settings--&amp;gt;Syntax coloring--&amp;gt;Language-specific colors--&amp;gt;Python&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;逐一追加 node:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;@color blank_color = grey
@color tab_color = red
@color label_color = red
@color keyword1_color = #268bd2
@color keyword2_color = #2aa198
@color keyword3_color = #859900
@color keyword4_color = #268bd2
@color literal1_color = #cb4b16
@color literal2_color = #b58900
@color literal3_color = #dc322f
@color literal4_color = #859900
@color markup_color = #2aa198
@color comment1_color = #557755
@color comment2_color = #557755
@color comment3_color = #557755
@color comment4_color = #557755
@color operator_color = #bbbbbb
@color function_color = #cb4b16
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;self&lt;/code&gt; 非关键词追加语法颜色&lt;ul&gt;
&lt;li&gt;修订 &lt;code&gt;path/2/installed/leo/modes/python.py&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;追加 &lt;code&gt;"self": "keyword4",&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;感谢 &lt;code&gt;leo-editor@googlegroups.com&lt;/code&gt; 列表中好人的大力帮助:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Terry Brown&lt;/li&gt;
&lt;li&gt;john lunzer&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="timing"&gt;timing&lt;a class="headerlink" href="#timing" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;+ 1.5h 根据记忆折腾
+ .5h 官方列表提问
+ 2h 使用官方配置折腾
+ 1h 使用列表提示检验
+ .5h 完成心目中的配置

~ 6h 才完成...
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;140909 才算完成一个可以看的版本&lt;/li&gt;
&lt;li&gt;140711 完成所有功能,启动文档回顾&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="todo"&gt;&lt;span class="caps"&gt;TODO&lt;/span&gt;&lt;a class="headerlink" href="#todo" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;subl theme 到 Leo theme 的转换脚本&lt;/li&gt;
&lt;li&gt;进一步的样式化:&lt;ul&gt;
&lt;li&gt;髙亮当前行&lt;/li&gt;
&lt;li&gt;提纲界面的 dark theme&lt;/li&gt;
&lt;li&gt;log 界面的 dark theme&lt;/li&gt;
&lt;li&gt;find 界面的 dark theme&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;参考颜色: &lt;a href="http://leo-editor.github.io/snippets/colormap.html"&gt;Leo Color Map&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="python"></category><category term="howto"></category><category term="leo"></category><category term="theme"></category></entry><entry><title>Linux 后的思想</title><link href="http://blog.zoomquiet.io/linux-linus-not-only-be-fun.html" rel="alternate"></link><published>2016-04-10T00:00:00+08:00</published><updated>2016-04-10T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2016-04-10:/linux-linus-not-only-be-fun.html</id><summary type="html">
&lt;p&gt;来自 &lt;span class="caps"&gt;TED2016&lt;/span&gt; 的分享:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.ted.com/talks/linus_torvalds_the_mind_behind_linux"&gt;Linus Torvalds: The mind behind Linux | &lt;span class="caps"&gt;TED&lt;/span&gt; Talk | &lt;span class="caps"&gt;TED&lt;/span&gt;.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;戳中泪点的:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;所有项目,只是因为我需要&lt;/li&gt;
&lt;li&gt;最困难的不是完成大项目,而是令人们在一起工作,即使相互不接受&lt;/li&gt;
&lt;li&gt;Linux 并不是选择了开源,只是那时刚好有开源吻合 Linux 项目&lt;/li&gt;
&lt;li&gt;….&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;是的,为什么 Linux 发展的如此快,而更加早的 &lt;span class="caps"&gt;GNU&lt;/span&gt; 项目反而越来越没有存在感了!?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;RMS&lt;/span&gt; 太聪明,总是戳到关键点&lt;/li&gt;
&lt;li&gt;Linus 明智的多,只作自己能控制的,其它的给更加聪明的人折腾吧&lt;/li&gt;
&lt;li&gt;嗯哼,这就是失控控制法&lt;/li&gt;
&lt;li&gt;不控制的控制才是最好的控制&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;</summary><content type="html">
&lt;p&gt;来自 &lt;span class="caps"&gt;TED2016&lt;/span&gt; 的分享:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.ted.com/talks/linus_torvalds_the_mind_behind_linux"&gt;Linus Torvalds: The mind behind Linux | &lt;span class="caps"&gt;TED&lt;/span&gt; Talk | &lt;span class="caps"&gt;TED&lt;/span&gt;.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;戳中泪点的:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;所有项目,只是因为我需要&lt;/li&gt;
&lt;li&gt;最困难的不是完成大项目,而是令人们在一起工作,即使相互不接受&lt;/li&gt;
&lt;li&gt;Linux 并不是选择了开源,只是那时刚好有开源吻合 Linux 项目&lt;/li&gt;
&lt;li&gt;….&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;是的,为什么 Linux 发展的如此快,而更加早的 &lt;span class="caps"&gt;GNU&lt;/span&gt; 项目反而越来越没有存在感了!?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;RMS&lt;/span&gt; 太聪明,总是戳到关键点&lt;/li&gt;
&lt;li&gt;Linus 明智的多,只作自己能控制的,其它的给更加聪明的人折腾吧&lt;/li&gt;
&lt;li&gt;嗯哼,这就是失控控制法&lt;/li&gt;
&lt;li&gt;不控制的控制才是最好的控制&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;</content><category term="geek"></category><category term="linux"></category><category term="floss"></category></entry><entry><title>再见了 Python</title><link href="http://blog.zoomquiet.io/saying-ggodby-python-zh.html" rel="alternate"></link><published>2015-01-10T00:00:00+08:00</published><updated>2015-01-10T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2015-01-10:/saying-ggodby-python-zh.html</id><summary type="html">&lt;p&gt;原文: &lt;a href="http://www.ianbicking.org/blog/2014/02/saying-goodbye-to-python.html"&gt;Saying Goodbye&amp;nbsp;To Python&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This post is long overdue; this isn’t a declaration of intent (any intent was long ago made real), just my reflection about my own path. I left the Python world a long time ago but I never took a chance to say&amp;nbsp;goodbye.&lt;/p&gt;
&lt;p&gt;While …&lt;/p&gt;</summary><content type="html">&lt;p&gt;原文: &lt;a href="http://www.ianbicking.org/blog/2014/02/saying-goodbye-to-python.html"&gt;Saying Goodbye&amp;nbsp;To Python&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This post is long overdue; this isn’t a declaration of intent (any intent was long ago made real), just my reflection about my own path. I left the Python world a long time ago but I never took a chance to say&amp;nbsp;goodbye.&lt;/p&gt;
&lt;p&gt;While I had moved on from Python years ago, I felt a certain attachment to it well past then, not quite admitting to myself that I wasn’t coming back. When my proposal for PyCon 2013 was rejected I was frustrated (it was going to be a fun talk!) but for some reason that made me fully realized that I wasn’t part of the Python community&amp;nbsp;anymore.&lt;/p&gt;
&lt;p&gt;Python was the first — and I sometimes wonder if the only — programming community I was part of. Coming to Python was a conscious choice. In college I was interested in Scheme and Smalltalk. High-minded languages with interesting ideas, but hard to find practical uses. Scheme was always too underserved by its libraries and sparse academic community. In contrast Smalltalk was productive — it was built by and for people who loved to build things. (More credit here should probably go to Dan Ingalls than Alan Kay — I can sense in Dan Ingalls’s work a real passion for making things, and a pure but unproductive language would not have satisfied him.) But Smalltalk was and is a world of its own. It was culturally and technically pre-internet, pre-open-source, pre-online-community. And despite all the great things about the Smalltalk environment and language it couldn’t fulfill these then-new potentials, even as it tried to adapt. (I wrote a couple posts about this, intended as a sort of sympathetic explanation of why I couldn’t stick with Smalltalk: Where Smalltalk Went Wrong and a&amp;nbsp;followup.)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://en.wikipedia.org/wiki/Daniel_Henry_Holmes_Ingalls,_Jr."&gt;Dan&amp;nbsp;Ingalls&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://en.wikipedia.org/wiki/Alan_Kay"&gt;Alan&amp;nbsp;Kay&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.ianbicking.org/where-smalltalk-went-wrong.html"&gt;Where Smalltalk Went&amp;nbsp;Wrong&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.ianbicking.org/where-smalltalk-went-wrong-2.html"&gt;a&amp;nbsp;followup&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;At the end of my college career (1999ish) I consciously looked for a new home. I flirted with Perl, C, but knew they weren’t for me. Somewhere along the way I came upon Python, and it was good enough that I didn’t look for anything better. I can’t say I fell in love with Python like I had with Scheme and Smalltalk — Scheme was like an opening up of the world after going far beyond what anyone should ask of &lt;span class="caps"&gt;GW&lt;/span&gt;-&lt;span class="caps"&gt;BASIC&lt;/span&gt;, and Squeak/Smalltalk was a deep mysterious world, like coming upon the ruins of an ancient and advanced civilization. Python in comparison was practical — but I wasn’t in the mood at that time to discover, I wanted to&amp;nbsp;build.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://en.wikipedia.org/wiki/GW-BASIC"&gt;&lt;span class="caps"&gt;GW&lt;/span&gt; - &lt;span class="caps"&gt;BASIC&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And I built a lot of things in Python. I was doing workaday web programming and my enthusiasm went more towards building tools to build stuff than in the building itself. I did build some cool products in those days, not just libraries, but for some reason it’s only the smaller units that I was able to push out. And I found a community in&amp;nbsp;Python.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.ianbicking.org/projects.html"&gt;built a lot of things in&amp;nbsp;Python&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And I built. Back in the days I contributed to Webware, what felt like a completely different generation of web development in Python than today. I wrote SQLObject, my first foray into a oh-shit-people-are-using-this-I’m-not-sure-how-I-feel-about-that library. But SQLObject explored a lot of metaprogramming concepts that were quite novel in the Python world at that time. At the same time maintaining it felt like a terrible burden. It took me far too long to resolve that, and only once interest had died down (in no small part due to my lack of attention) did I hand it over to Oleg who has been a far more steady hand. This would be a pattern I would unfortunately repeat. But if SQLObject helped the next generation be better that’s good enough for&amp;nbsp;me.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.webwareforpython.org/"&gt;Webware&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://sqlobject.org/"&gt;SQLObject&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://phdru.name/"&gt;Oleg&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.sqlalchemy.org/"&gt;next&amp;nbsp;generation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Later came &lt;span class="caps"&gt;WSGI&lt;/span&gt; which excited me with its subtly functional basis. I built a whole web framework toolkit (or a framework for building web frameworks?) in Paste. Few people really understood what I was trying to do with Paste — at times including me. Some people like Ben Bangert were able to see the principles underneath the code, and get them out into the world in the kind of usable state that I intended to enable. (And along the way I sometimes felt like I was doing the same for &lt;span class="caps"&gt;PJE&lt;/span&gt;.) Python web frameworks were a mess back then; ultimately reaching for the crown using a monolithic approach was a more successful technique than trying to build bridges as I attempted with Paste. I’m still not sure what lesson to take from that. Not a general lesson, but more understanding the landscape. And understanding what you can bring to a problem, and who you can bring with. I feel like I’m only now really understanding the importance of vision combined with a diverse group of skills and perspectives, and I have even more to learn about how to actually assemble and coordinate the right group of people in the right environment to&amp;nbsp;succeed.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://wsgi.readthedocs.org/"&gt;&lt;span class="caps"&gt;WSGI&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://pythonpaste.org/"&gt;Paste&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://groovie.org/"&gt;Ben&amp;nbsp;Bangert&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.djangoproject.com/"&gt;reaching for the&amp;nbsp;crown&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Somewhere around here I feel like I reached my 10,000 hours of Python coding. I wrote WebOb, taking the lessons of Paste and a better intuition for library design. I still think it’s the best mapping of &lt;span class="caps"&gt;HTTP&lt;/span&gt; to Python. Other libraries include more aspects of web development in their scope, or have better documentation, and more users, but when viewed with a particular lens I’m still very proud of WebOb. And it’s been an important building block in a lot of people’s explorations into building a web framework. Other libraries from this period are lxml.html, smaller things like WebTest, ScriptTest, MiniMock, Tempita, perhaps the over-ambition (or just mis-ambition) of Deliverance. That period felt like a clearing out of my system, unloading a bunch of&amp;nbsp;ideas.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://webob.org/"&gt;WebOb&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://docs.webob.org/en/latest/do-it-yourself.html"&gt;building a web&amp;nbsp;framework&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://lxml.de/lxmlhtml.html"&gt;lxml.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://webtest.pythonpaste.org/"&gt;WebTest&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://pythonpaste.org/scripttest/"&gt;ScriptTest&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pypi.python.org/pypi/MiniMock"&gt;MiniMock&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://pythonpaste.org/tempita/"&gt;Tempita&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.coactivate.org/projects/deliverance/introduction"&gt;Deliverance&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;But for whatever reason my most successful tools were virtualenv and pip. These were never my greatest passions, or even close. They were about: (a) fixing personal annoyances in deployment (virtualenv), and (b) getting people to stop fucking whining about Setuptools and easy_install (pip). I’m not sure whether I blame the uneasy success of these tools on broad appeal, or that they are in a sense user-visible tools and not libraries, or that I didn’t like doing them because no one liked doing them and so there was a vacuum waiting to be&amp;nbsp;filled.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.virtualenv.org/"&gt;virtualenv&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.pip-installer.org/"&gt;pip&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And then my last project, Silver Lining. It was early on in the devops revolution, an attempt to think about what a generic container for web applications might look like. It was in a sense going deeper down the hole of virtualenv and pip, but with an aim to build a full product and not just a set of eclectic tools. No one cared. And I only cared a little — I cared because it was completing some ideas I’d long had about deployment, because for a certain kind of web application development it felt nimble and reliable, because it removed or automated tasks I didn’t like to do. But I didn’t care, no more than I cared about virtualenv or pip. I’d gone down a path that was about code and technical design, but if I stepped back it was&amp;nbsp;unexciting.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://bitbucket.org/ianb/silverlining/src"&gt;Silver&amp;nbsp;Lining&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And when I did step back there wasn’t anything in Python that excited me. Python was doing great, my interest had nothing to jumping on or off bandwagons. Python is doing great — better than ever (minor bumps with versions aside). But I think in my mind I’d always imagined I could build up just the right toolset, and using that toolset create the product I actually wanted to create — what exactly that product was, I don’t know, but with the right tools I imagined I could move fast enough and confidently enough to find&amp;nbsp;it.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://plus.google.com/+IanBicking/posts/iEVXdcfXkz7"&gt;minor bumps with versions&amp;nbsp;aside&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sometimes when I’m feeling particularly excited about an idea, like really excited, I have to take a break. I need to calm down. Try to wrap my head around the ideas, because I know if I push forward directly that I’ll just muddle things up and feel disappointed. No, I don’t know that is true: maybe I don’t want to have to confront, in that moment, that the idea is not as cool as I think it is, or as possible as I think it is. But often I do step back into the problem, with ideas that are more mature for having thought more deeply about them. In a sense I think creating tools and libraries was a similar process: I felt too excited about creating something great, because I worried I’d muddle everything up, or afraid I just couldn’t pull it off, and so I stepped away and would work on&amp;nbsp;tools.&lt;/p&gt;
&lt;p&gt;I always directed my attention to the web, even if I got bogged down in the server. Somehow I skipped native GUIs, even as a user. But pure data processing without consideration for what you do with the data felt unexciting. And ops — that’s just the worst. I was, and am, a true believer in Free Software; and I was, and am, a true believer in the web. That is, I don’t see either as simply a means to an ends. But not for the same reasons, and I can believe in a web that isn’t open source, and open source that isn’t for the web. And yet writing it down I realize I don’t care about open source that isn’t for the&amp;nbsp;web.&lt;/p&gt;
&lt;p&gt;When I stepped back Python no longer seemed relevant to the web, at least not the part of the web that interested me. The tools I had built were no longer relevant either, they were not the tools with which I could realize my ambitions. The database-backed website, or the dynamic-&lt;span class="caps"&gt;HTTP&lt;/span&gt;-based web application, templates and deployments, anything you’d call “&lt;span class="caps"&gt;REST&lt;/span&gt;” — none of it seemed like the future, and whatever this vague thing was that I’d been looking for, I wasn’t going to find it&amp;nbsp;there.&lt;/p&gt;
&lt;p&gt;This wasn’t an actual revelation, I’m constructing it in retrospect. If you’d asked me I would have agreed with this notion even years earlier, and it’s not like I came up with some unique idea, if anything I would call it self-evident, don’t we all know this is where the world is going? And so I started to look towards Javascript and the browser and the &lt;span class="caps"&gt;DOM&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Somewhat before this I also joined Mozilla. But it would be backwards to say that Mozilla induced this change in perspective, that it tempted me away from Python. In fact I would have had a much easier time of it if I had just stuck with doing Python backend stuff at&amp;nbsp;Mozilla.&lt;/p&gt;
&lt;p&gt;The last few years of transition have been a struggle. With Python and the server I knew what I was doing. I was good at it, I felt competent. I could construct an opinion with confidence about all kinds of design questions. I was respected and my opinion would be listened to. I’d put in my 10,000 hours, I had achieved&amp;nbsp;mastery.&lt;/p&gt;
&lt;p&gt;Moving to Javascript none of this was true, and most of it still isn’t true. It might be easier to pull off this change if I was doing web development, surrounded with people making similar transitions, a little fish in the little pond of whatever group I was working with. But Mozilla is not that kind of environment. Which is okay — if I had felt confident it would only be because there was no one to correct&amp;nbsp;me.&lt;/p&gt;
&lt;p&gt;It’s oddly common to see people talk about how a programmer can pick up something new in the matter of a few days or months. To find programmers that consider all that knowledge transferable (for instance). I don’t know what to make of it — my less forgiving self thinks these people have never known what real mastery is. I don’t think it takes another 10,000 hours to get mastery in a new language and environment… but it definitely takes some thousands of hours, some years of hard work. I only now feel like I’m getting&amp;nbsp;close.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://news.ycombinator.com/item?id=7204515"&gt;for&amp;nbsp;instance&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Maybe it’s my perspective on what mastery is. Deciding to do something and then doing it is good. It is not mastery. You have to pick the right problem to solve. You have to pick the right way to solve it. You need to know when to revise that plan, and understand the constraints that inform that revision. You need both large scale and small scale intuitions. And you need to be good enough at all the details of programming in that environment that you don’t get overwhelmed with the “easy” stuff, so you have mental energy to spare on the big stuff. The jump from Python to Javascript isn’t that big, the languages have a very similar shape. And the browser was already the environment focused on. And yet redeveloping my intuition for this new environment has taken&amp;nbsp;time.&lt;/p&gt;
&lt;p&gt;Sadly I’m not going to get back where I was, because Javascript is not Python. If there’s a Javascript community I haven’t found it, or it’s at least not a single entity. There is no community that created Javascript like the Python community created Python. Python comes from the internet in a way Javascript does not; Javascript was built for the internet, but Python was built on the internet. And I do miss the Python community, you’re good&amp;nbsp;people.&lt;/p&gt;
&lt;p&gt;But also whatever language partisanship I had is gone, and won’t come back in the guise of a new favorite language. This shouldn’t be confused with a disinterest in language. I still get as annoyed as ever by “use the right tool for the job” — the bland truism meant to shut down critical discussion and engagement with the tasks and choices in software engineering, replacing it with a weak passionless technical&amp;nbsp;fatalism.&lt;/p&gt;
&lt;p&gt;I suppose it is the platform that I am drawn to now before language. And the browser seems like the most interesting platform, not because it’s novel (though it is, it’s a runtime like few others), but because of how concrete it is, and of course how relevant it is to… anything. And the browser is no longer just the servant of a server, I prefer now to think of the browser as an independent agent, connecting to services instead of servers. Obviously that doesn’t describe a great number of running web sites, but it’s the model I see for the future, and a better perspective for understanding future&amp;nbsp;architectures.&lt;/p&gt;
&lt;p&gt;Still this only addresses which direction I’m looking towards, I still have to walk the path. I don’t want to get caught up in the weeds again, building tools for something I never manage to make. Right now I think I’m on to something in the area of collaboration, first with TogetherJS and now I’m thinking bigger with a new experiment. But while I feel like I’ve reached some competence in executing on these projects, programming is only one piece of bringing forward a larger vision. I still have a lot of learning to do, skills for which I haven’t put in the necessary time. How to recruit support, how to manage the project, how to negotiate between feasibility and user value, how to negotiate compromises in strategy and design. And collaboration itself is a whole domain of expertise. I’ve learned a lot, I can do things, but I am definitely not yet experienced enough to choose to do the right thing in these areas. And at this moment I’m worried I won’t have the room to learn these things, it feels like time is running out just when I’m pulling stuff&amp;nbsp;together.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://togetherjs.com/"&gt;TogetherJS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://github.com/mozilla/hotdish"&gt;new&amp;nbsp;experiment&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Anyway, that’s where I am now. No longer a language partisan, unclear of what community I am even participating in, I am less sure how to identify and self-identify myself. How do I describe myself now? Even as I find my technical footing I am still adrift. And so it’s hard to say goodbye. So instead I’ll say, Pythonistas: until we meet again. Maybe I’ll meet some of you over&amp;nbsp;here.&lt;/p&gt;
&lt;h2 id="changelog"&gt;Changelog&lt;a class="headerlink" href="#changelog" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;161201 是也乎,(￣▽￣)&lt;ul&gt;
&lt;li&gt;发现也没有必要逐字翻译&lt;/li&gt;
&lt;li&gt;作者是位勤劳的 Pythonista, 创造了从 SQLObject 到 Silver Lining&amp;nbsp;等等一系列&lt;/li&gt;
&lt;li&gt;不成功的模块/工具/工程&lt;/li&gt;
&lt;li&gt;现在是 &lt;code&gt;TogetherJS&lt;/code&gt; 发起人&lt;/li&gt;
&lt;li&gt;之所以从 Python 转进 &lt;span class="caps"&gt;JS&lt;/span&gt; 世界,只是因为感觉在 Python&amp;nbsp;中无论折腾什么都会进入混乱的竞争&lt;/li&gt;
&lt;li&gt;细思恐极&amp;#8230;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;150112 整理到个人&amp;nbsp;blog&lt;/li&gt;
&lt;li&gt;150110&amp;nbsp;从周刊中发现,决定翻译&lt;/li&gt;
&lt;/ul&gt;</content><category term="Weekly"></category><category term="Zh"></category></entry><entry><title>如何将 ipynb 发布到 blog 中?</title><link href="http://blog.zoomquiet.io/141127-ipynb-into-blog.html" rel="alternate"></link><published>2014-11-27T00:00:00+08:00</published><updated>2014-11-27T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2014-11-27:/141127-ipynb-into-blog.html</id><summary type="html">&lt;p&gt;原文: &lt;a href="http://prooffreaderplus.blogspot.ca/2014/11/how-to-quickly-turn-ipython-notebook.html"&gt;prooffreader plus: How to quickly turn an IPython notebook into a blog&amp;nbsp;post&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;IPython notebooks are great for many things, but they&amp;#8217;re a little awkward to embed in blog post platforms like Blogger, Wordpress, etc. When the nbconvert feature was a standalone command-line tool, there was a blog …&lt;/p&gt;</summary><content type="html">&lt;p&gt;原文: &lt;a href="http://prooffreaderplus.blogspot.ca/2014/11/how-to-quickly-turn-ipython-notebook.html"&gt;prooffreader plus: How to quickly turn an IPython notebook into a blog&amp;nbsp;post&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;IPython notebooks are great for many things, but they&amp;#8217;re a little awkward to embed in blog post platforms like Blogger, Wordpress, etc. When the nbconvert feature was a standalone command-line tool, there was a blog export template, but that seems to have disappeared now that nbconvert has been folded within&amp;nbsp;IPython.&lt;/p&gt;
&lt;p&gt;Out of the box, nbconvert just has two html export&amp;nbsp;options:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;--html
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;which includes a lot of &lt;span class="caps"&gt;CSS&lt;/span&gt; that interferes with a blog&amp;#8217;s &lt;span class="caps"&gt;CSS&lt;/span&gt;,&amp;nbsp;and:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;--html --template basic
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;which has no &lt;span class="caps"&gt;CSS&lt;/span&gt; and so pretty much negates the benefit of using an IPython notebook. However, it does have &lt;span class="caps"&gt;CSS&lt;/span&gt; classess in the&amp;nbsp;text.&lt;/p&gt;
&lt;p&gt;My solution was to whip up a quick &lt;span class="caps"&gt;CSS&lt;/span&gt; stylesheet that could be included in the blog post. It seems to work pretty well; you can have a look&amp;nbsp;at:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;an &lt;a href="http://nbviewer.ipython.org/github/Prooffreader/Misc_ipynb/blob/master/top_10_python_idioms.ipynb"&gt;IPython notebook in nbviewer&lt;/a&gt; of a recent blog post of&amp;nbsp;mine&lt;/li&gt;
&lt;li&gt;the &lt;a href="http://prooffreaderplus.blogspot.ca/2014/11/top-10-python-idioms-i-wished-id.html"&gt;blog version&lt;/a&gt; after applying this&amp;nbsp;stylesheet.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note that, for aesthetic reasons, I removed all&amp;nbsp;the&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;In [1]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;-style tags because of the narrow columns on this blog. Your mileage may&amp;nbsp;vary.&lt;/p&gt;
&lt;h2 id="1-convert-ipynb-notebook-to-html"&gt;1. Convert .ipynb notebook to &lt;span class="caps"&gt;HTML&lt;/span&gt;&lt;a class="headerlink" href="#1-convert-ipynb-notebook-to-html" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;In the terminal, navigate to the folder containing the .ipynb file and&amp;nbsp;type:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ipython nbconvert --to html --template basic filename.ipynb
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="2-paste-html-in-blog"&gt;2. Paste &lt;span class="caps"&gt;HTML&lt;/span&gt; in blog&lt;a class="headerlink" href="#2-paste-html-in-blog" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Note: if you&amp;#8217;re using the Blogger platform, never switch back to the Compose interface after you use the &lt;span class="caps"&gt;HTML&lt;/span&gt; interface, it changes all your&amp;nbsp;tags.&lt;/p&gt;
&lt;h2 id="3-add-css-to-blog-html"&gt;3. Add &lt;span class="caps"&gt;CSS&lt;/span&gt; to blog &lt;span class="caps"&gt;HTML&lt;/span&gt;&lt;a class="headerlink" href="#3-add-css-to-blog-html" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;This seems to reproduce the native syntax highlighting of&amp;nbsp;IPython.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;style&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;text/css&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
.highlight{background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .1em;padding:0em .5em;border-radius: 4px;}
.k{color: #338822; font-weight: bold;}
.kn{color: #338822; font-weight: bold;}
.mi{color: #000000;}
.o{color: #000000;}
.ow{color: #BA22FF;  font-weight: bold;}
.nb{color: #338822;}
.n{color: #000000;}
.s{color: #cc2222;}
.se{color: #cc2222; font-weight: bold;}
.si{color: #C06688; font-weight: bold;}
.nn{color: #4D00FF; font-weight: bold;}
&lt;span class="nt"&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_1"&gt;是也乎&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;原来&amp;#8230; &lt;code&gt;IPy[:] notebook&lt;/code&gt; 天然就内置了这种能力!&lt;/p&gt;
&lt;h2 id="changelog"&gt;Changelog&lt;a class="headerlink" href="#changelog" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;160322 @&lt;span class="caps"&gt;TANG&lt;/span&gt; ZhiXiong 提醒:&lt;ul&gt;
&lt;li&gt;其实放在 GitHub，然后分享一个 Jupyter&amp;nbsp;链接是最好的&lt;/li&gt;
&lt;li&gt;&lt;code&gt;是也乎&lt;/code&gt; 这的确是 2015-7 之后更好的解决方案了&amp;nbsp;;-)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;140107 move into Pelican as&amp;nbsp;zoomquiet.io&lt;/li&gt;
&lt;li&gt;131106 pub. &lt;a href="https://medium.com/i-m-h-o/9520fee0b59f"&gt;&lt;span class="caps"&gt;EKR&lt;/span&gt; to Chinese programmer — &lt;span class="caps"&gt;I. M. H. O.&lt;/span&gt;—&amp;nbsp;Medium&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Pythonic"></category><category term="FW"></category><category term="ipynb"></category><category term="tutorial"></category></entry><entry><title>十大早该知道的Python技巧</title><link href="http://blog.zoomquiet.io/top10-Py-idioms-wish-learned-earlier.html" rel="alternate"></link><published>2014-11-26T00:00:00+08:00</published><updated>2014-11-26T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2014-11-26:/top10-Py-idioms-wish-learned-earlier.html</id><summary type="html">&lt;p&gt;原文: &lt;a href="http://prooffreaderplus.blogspot.ca/2014/11/top-10-python-idioms-i-wished-id.html"&gt;prooffreader plus: Top 10 Python idioms I wish I&amp;#8217;d learned&amp;nbsp;earlier&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Top 10 Python idioms I wish I'd learned earlier&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;I&amp;#8217;ve been programming all my life, but never been a programmer. Most of my work was done in Visual Basic because it&amp;#8217;s what I was most …&lt;/p&gt;</summary><content type="html">&lt;p&gt;原文: &lt;a href="http://prooffreaderplus.blogspot.ca/2014/11/top-10-python-idioms-i-wished-id.html"&gt;prooffreader plus: Top 10 Python idioms I wish I&amp;#8217;d learned&amp;nbsp;earlier&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Top 10 Python idioms I wish I'd learned earlier&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;I&amp;#8217;ve been programming all my life, but never been a programmer. Most of my work was done in Visual Basic because it&amp;#8217;s what I was most comfortable with, plus a smattering of other languages (R, C, JavaScript, etc&amp;#8230; Pascal, Applescript, Hypertext and &lt;span class="caps"&gt;BASIC&lt;/span&gt;, which I learned in 1979, if you go far back enough). A couple of years ago, I decided to use Python exclusively so that I could improve my coding. I ended up re-inventing many wheels &amp;#8212; which I didn&amp;#8217;t mind too much, because I enjoy solving puzzles. But sometimes it&amp;#8217;s good to have a more efficient, Pythonesque approach, and time after time I found myself having &amp;#8220;aha!&amp;#8221; moments, realizing I&amp;#8217;d been doing things the hard, excessively verbose way for no reason. Here is a list of ten Python idioms that would have made my life much easier if I&amp;#8217;d thought to search for them early&amp;nbsp;on.&lt;/p&gt;
&lt;p&gt;Missing from this list are some idioms such as list comprehensions and lambda functions, which are very Pythonesque and very efficient and very cool, but also very difficult to miss because they&amp;#8217;re mentioned on StackOverflow every other answer! Also ternary x if y else z constructions, decorators and generators, because I don&amp;#8217;t use them very&amp;nbsp;often.&lt;/p&gt;
&lt;p&gt;There&amp;#8217;s also an 
&lt;a href="http://nbviewer.ipython.org/github/Prooffreader/Misc_ipynb/blob/master/top_10_python_idioms.ipynb"&gt;IPython notebook nbviewer version&lt;/a&gt; of this document if you&amp;nbsp;prefer.&lt;/p&gt;
&lt;h2 id="1-python-3-style-printing-in-python-2"&gt;1. Python 3-style printing in Python 2&lt;a class="headerlink" href="#1-python-3-style-printing-in-python-2" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;One of the things that kept me from concentrating on Python was this whole version 2 - version 3 debacle. Finally I went with Python 2 because all the libraries I wanted were not 3-compatible, and I figured if I needed to, I would laboriously adjust my code&amp;nbsp;later. &lt;/p&gt;
&lt;p&gt;But really, the biggest differences in everyday programming are printing and division, and now I just import from future. Now that almost all the libraries I use heavily are v3-compliant, I&amp;#8217;ll make the switch&amp;nbsp;soon.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;mynumber&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Python 2:&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;The number is &lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mynumber&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;mynumber&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;mynumber&lt;/span&gt; &lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;__future__&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;print_function&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;__future__&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;division&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;Python 3:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;The number is {}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mynumber&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mynumber&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mynumber&lt;/span&gt; &lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Python 2:
The number is 5
2 2

Python 3:
The number is 5
2.5 2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Oh, and here&amp;#8217;s an easter egg for C&amp;nbsp;programmers:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;__future__&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;braces&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;lt;ipython-input-3-2aebb3fc8ecf&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;__future__&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;braces&lt;/span&gt;
&lt;span class="ne"&gt;SyntaxError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;chance&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="2-enumeratelist"&gt;2. enumerate(list)&lt;a class="headerlink" href="#2-enumeratelist" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;It might seem obvious that you should be able to iterate over a list and its index at the same time, but I used counter variables or slices for an embarrassingly long&amp;nbsp;time.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mylist = [&amp;quot;It&amp;#39;s&amp;quot;, &amp;#39;only&amp;#39;, &amp;#39;a&amp;#39;, &amp;#39;model&amp;#39;]

for index, item in enumerate(mylist):
    print(index, item)
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;0 It&amp;#39;s
1 only
2 a
3 model
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="3-chained-comparison-operators"&gt;3. Chained comparison operators&lt;a class="headerlink" href="#3-chained-comparison-operators" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Because I was so used to statically typed languages (where this idiom would be ambiguous), it never occurred to me to put two operators in the same expression. In many languages, 4 &amp;gt; 3 &amp;gt; 2 would return as False, because (4 &amp;gt; 3) would be evaluated as a boolean, and then True &amp;gt; 2 would be evaluated as&amp;nbsp;False.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mynumber = 3

if 4 &amp;gt; mynumber &amp;gt; 2:
    print(&amp;quot;Chained comparison operators work! \n&amp;quot; * 3)
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Chained comparison operators work! 
Chained comparison operators work! 
Chained comparison operators work!
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="4-collectionscounter"&gt;4. collections.Counter&lt;a class="headerlink" href="#4-collectionscounter" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;The collections library is, like, the best thing ever. Stackoverflow turned me on to ordered dicts early on, but I kept using a snippet to create dicts to count occurrences of results in my code. One of these days, I&amp;#8217;ll figure out a use for&amp;nbsp;collections.deque.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;collections&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Counter&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;random&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;randrange&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pprint&lt;/span&gt;
&lt;span class="n"&gt;mycounter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Counter&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;random_number&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;randrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;mycounter&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;random_number&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mycounter&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;0 10
1 10
2 13
3 6
4 6
5 11
6 10
7 14
8 12
9 8
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="5-dict-comprehensions"&gt;5. Dict comprehensions&lt;a class="headerlink" href="#5-dict-comprehensions" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;A rite of passage for a Python programmer is understanding list comprehensions, but eventually I realized dict comprehensions are just as useful &amp;#8212; especially for reversing&amp;nbsp;dicts.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;my_phrase = [&amp;quot;No&amp;quot;, &amp;quot;one&amp;quot;, &amp;quot;expects&amp;quot;, &amp;quot;the&amp;quot;, &amp;quot;Spanish&amp;quot;, &amp;quot;Inquisition&amp;quot;]
my_dict = {key: value for value, key in enumerate(my_phrase)}
print(my_dict)
reversed_dict = {value: key for key, value in my_dict.items()}
print(reversed_dict)
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;{&amp;#39;Inquisition&amp;#39;: 5, &amp;#39;No&amp;#39;: 0, &amp;#39;expects&amp;#39;: 2, &amp;#39;one&amp;#39;: 1, &amp;#39;Spanish&amp;#39;: 4, &amp;#39;the&amp;#39;: 3}
{0: &amp;#39;No&amp;#39;, 1: &amp;#39;one&amp;#39;, 2: &amp;#39;expects&amp;#39;, 3: &amp;#39;the&amp;#39;, 4: &amp;#39;Spanish&amp;#39;, 5: &amp;#39;Inquisition&amp;#39;}
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="6-executing-shell-commands-with-subprocess"&gt;6. Executing shell commands with subprocess&lt;a class="headerlink" href="#6-executing-shell-commands-with-subprocess" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;I used to use the os library exclusively to manipulate files; now I can even programmatically call complex command-line tools like ffmpeg for video&amp;nbsp;editing&lt;/p&gt;
&lt;p&gt;(And yes, I use Windows, so do all of my clients. But I have the good grace to be embarrassed about&amp;nbsp;it!)&lt;/p&gt;
&lt;p&gt;Note that the particular subprocess I picked would be much better done with the os library; I just wanted a command everyone would be familiar with. And in general, shell=True is a &lt;span class="caps"&gt;VERY&lt;/span&gt; bad idea, I put it here so that the command output would appear in the IPython notebook cell. Don&amp;#8217;t try this at home,&amp;nbsp;kids!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;subprocess&lt;/span&gt;
&lt;span class="n"&gt;output&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;check_output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;dir&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;shell&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
 &lt;span class="n"&gt;Volume&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;drive&lt;/span&gt; &lt;span class="n"&gt;C&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="n"&gt;OS&lt;/span&gt;
 &lt;span class="n"&gt;Volume&lt;/span&gt; &lt;span class="n"&gt;Serial&lt;/span&gt; &lt;span class="n"&gt;Number&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;REDACTED&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
 &lt;span class="n"&gt;Directory&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;Users&lt;/span&gt;\&lt;span class="n"&gt;David&lt;/span&gt;\&lt;span class="n"&gt;Documents&lt;/span&gt;\&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;REDACTED&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;2014-11-26  06:04 AM    &amp;lt;DIR&amp;gt;          .
2014-11-26  06:04 AM    &amp;lt;DIR&amp;gt;          ..
2014-11-23  11:47 AM    &amp;lt;DIR&amp;gt;          .git
2014-11-26  06:06 AM    &amp;lt;DIR&amp;gt;          .ipynb_checkpoints
2014-11-23  08:59 AM    &amp;lt;DIR&amp;gt;          CCCma
2014-09-03  06:58 AM            19,450 colorbrewdict.py
2014-09-03  06:58 AM            92,175 imagecompare.ipynb
2014-11-23  08:41 AM    &amp;lt;DIR&amp;gt;          Japan_Earthquakes
2014-09-03  06:58 AM             1,100 LICENSE
2014-09-03  06:58 AM             5,263 monty_monte.ipynb
2014-09-03  06:58 AM            31,082 pocket_tumblr_reddit_api.ipynb
2014-11-26  06:04 AM             3,211 README.md
2014-11-26  06:14 AM            19,898 top_10_python_idioms.ipynb
2014-09-03  06:58 AM             5,813 tree_convert_mega_to_gexf.ipynb
2014-09-03  06:58 AM             5,453 tree_convert_mega_to_json.ipynb
2014-09-03  06:58 AM             1,211 tree_convert_newick_to_json.py
2014-09-03  06:58 AM            55,970 weather_ML.ipynb
              11 File(s)        240,626 bytes
               6 Dir(s)  180,880,490,496 bytes free
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="7-dict-get-and-iteritems-methods"&gt;7. dict .get() and .iteritems() methods&lt;a class="headerlink" href="#7-dict-get-and-iteritems-methods" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Having a default value when a key does not exist has all kinds of uses, and just like enumerate() for lists, you can iterate over key, value tuples in&amp;nbsp;dicts&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;my_dict = {&amp;#39;name&amp;#39;: &amp;#39;Lancelot&amp;#39;, &amp;#39;quest&amp;#39;: &amp;#39;Holy Grail&amp;#39;, &amp;#39;favourite_color&amp;#39;: &amp;#39;blue&amp;#39;}

print(my_dict.get(&amp;#39;airspeed velocity of an unladen swallow&amp;#39;, &amp;#39;African or European?\n&amp;#39;))

for key, value in my_dict.iteritems():
    print(key, value, sep=&amp;quot;: &amp;quot;)
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;African or European?

quest: Holy Grail
name: Lancelot
favourite_color: blue
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="8-tuple-unpacking-for-switching-variables"&gt;8. Tuple unpacking for switching variables&lt;a class="headerlink" href="#8-tuple-unpacking-for-switching-variables" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Do you know how many times I had to use a third, temporary dummy variable in &lt;span class="caps"&gt;VB&lt;/span&gt;? c = a; a = b; b =&amp;nbsp;c?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;a = &amp;#39;Spam&amp;#39;
b = &amp;#39;Eggs&amp;#39;

print(a, b)

a, b = b, a

print(a, b)
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Spam Eggs
Eggs Spam
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="9-introspection-tools"&gt;9. Introspection tools&lt;a class="headerlink" href="#9-introspection-tools" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;I was aware of dir(), but I had assumed help() would do the same thing as IPython&amp;#8217;s ? magic command. It does way more. (This post has been updated after some great advice from reddit&amp;#8217;s /r/python which, indeed, I wish I&amp;#8217;d known about&amp;nbsp;before!)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;my_dict = {&amp;#39;That&amp;#39;: &amp;#39;an ex-parrot!&amp;#39;}

help(my_dict)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Help on dict&amp;nbsp;object:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kr"&gt;class&lt;/span&gt; &lt;span class="nx"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;object&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
 &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="nx"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;empty&lt;/span&gt; &lt;span class="nx"&gt;dictionary&lt;/span&gt;
 &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="nx"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;mapping&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;dictionary&lt;/span&gt; &lt;span class="nx"&gt;initialized&lt;/span&gt; &lt;span class="nx"&gt;from&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="nx"&gt;mapping&lt;/span&gt; &lt;span class="nx"&gt;object&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;s&lt;/span&gt;
&lt;span class="s1"&gt; |      (key, value) pairs&lt;/span&gt;
&lt;span class="s1"&gt; |  dict(iterable) -&amp;gt; new dictionary initialized as if via:&lt;/span&gt;
&lt;span class="s1"&gt; |      d = {}&lt;/span&gt;
&lt;span class="s1"&gt; |      for k, v in iterable:&lt;/span&gt;
&lt;span class="s1"&gt; |          d[k] = v&lt;/span&gt;
&lt;span class="s1"&gt; |  dict(**kwargs) -&amp;gt; new dictionary initialized with the name=value pairs&lt;/span&gt;
&lt;span class="s1"&gt; |      in the keyword argument list.  For example:  dict(one=1, two=2)&lt;/span&gt;
&lt;span class="s1"&gt; |  &lt;/span&gt;
&lt;span class="s1"&gt; |  Methods defined here:&lt;/span&gt;
&lt;span class="s1"&gt; |  &lt;/span&gt;
&lt;span class="s1"&gt; |  __cmp__(...)&lt;/span&gt;
&lt;span class="s1"&gt; |      x.__cmp__(y) &amp;lt;==&amp;gt; cmp(x,y)&lt;/span&gt;
&lt;span class="s1"&gt; |  &lt;/span&gt;
&lt;span class="s1"&gt; |  __contains__(...)&lt;/span&gt;
&lt;span class="s1"&gt; |      D.__contains__(k) -&amp;gt; True if D has a key k, else False&lt;/span&gt;
&lt;span class="s1"&gt; |  &lt;/span&gt;
&lt;span class="s1"&gt; |  __delitem__(...)&lt;/span&gt;
&lt;span class="s1"&gt; |      x.__delitem__(y) &amp;lt;==&amp;gt; del x[y]&lt;/span&gt;
&lt;span class="s1"&gt; |  &lt;/span&gt;
&lt;span class="s1"&gt; |  __eq__(...)&lt;/span&gt;
&lt;span class="s1"&gt; |      x.__eq__(y) &amp;lt;==&amp;gt; x==y&lt;/span&gt;
&lt;span class="s1"&gt; |  &lt;/span&gt;

&lt;span class="s1"&gt;[TRUNCATED FOR SPACE]&lt;/span&gt;

&lt;span class="s1"&gt; |  &lt;/span&gt;
&lt;span class="s1"&gt; |  update(...)&lt;/span&gt;
&lt;span class="s1"&gt; |      D.update([E, ]**F) -&amp;gt; None.  Update D from dict/iterable E and F.&lt;/span&gt;
&lt;span class="s1"&gt; |      If E present and has a .keys() method, does:     for k in E: D[k] = E[k]&lt;/span&gt;
&lt;span class="s1"&gt; |      If E present and lacks .keys() method, does:     for (k, v) in E: D[k] = v&lt;/span&gt;
&lt;span class="s1"&gt; |      In either case, this is followed by: for k in F: D[k] = F[k]&lt;/span&gt;
&lt;span class="s1"&gt; |  &lt;/span&gt;
&lt;span class="s1"&gt; |  values(...)&lt;/span&gt;
&lt;span class="s1"&gt; |      D.values() -&amp;gt; list of D&amp;#39;&lt;/span&gt;&lt;span class="nx"&gt;s&lt;/span&gt; &lt;span class="nx"&gt;values&lt;/span&gt;
 &lt;span class="o"&gt;|&lt;/span&gt;  
 &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="nx"&gt;viewitems&lt;/span&gt;&lt;span class="p"&gt;(...)&lt;/span&gt;
 &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="nx"&gt;D&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;viewitems&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="nx"&gt;set&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nx"&gt;like&lt;/span&gt; &lt;span class="nx"&gt;object&lt;/span&gt; &lt;span class="nx"&gt;providing&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="nx"&gt;view&lt;/span&gt; &lt;span class="nx"&gt;on&lt;/span&gt; &lt;span class="nx"&gt;D&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;s items&lt;/span&gt;
&lt;span class="s1"&gt; |  &lt;/span&gt;
&lt;span class="s1"&gt; |  viewkeys(...)&lt;/span&gt;
&lt;span class="s1"&gt; |      D.viewkeys() -&amp;gt; a set-like object providing a view on D&amp;#39;&lt;/span&gt;&lt;span class="nx"&gt;s&lt;/span&gt; &lt;span class="nx"&gt;keys&lt;/span&gt;
 &lt;span class="o"&gt;|&lt;/span&gt;  
 &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="nx"&gt;viewvalues&lt;/span&gt;&lt;span class="p"&gt;(...)&lt;/span&gt;
 &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="nx"&gt;D&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;viewvalues&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;an&lt;/span&gt; &lt;span class="nx"&gt;object&lt;/span&gt; &lt;span class="nx"&gt;providing&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="nx"&gt;view&lt;/span&gt; &lt;span class="nx"&gt;on&lt;/span&gt; &lt;span class="nx"&gt;D&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="nx"&gt;s&lt;/span&gt; &lt;span class="nx"&gt;values&lt;/span&gt;
 &lt;span class="o"&gt;|&lt;/span&gt;  
 &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="o"&gt;----------------------------------------------------------------------&lt;/span&gt;
 &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="nx"&gt;Data&lt;/span&gt; &lt;span class="nx"&gt;and&lt;/span&gt; &lt;span class="nx"&gt;other&lt;/span&gt; &lt;span class="nx"&gt;attributes&lt;/span&gt; &lt;span class="nx"&gt;defined&lt;/span&gt; &lt;span class="nx"&gt;here&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
 &lt;span class="o"&gt;|&lt;/span&gt;  
 &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="nx"&gt;__hash__&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;None&lt;/span&gt;
 &lt;span class="o"&gt;|&lt;/span&gt;  
 &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="nx"&gt;__new__&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 
 &lt;span class="o"&gt;|&lt;/span&gt;      &lt;span class="nx"&gt;T&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;__new__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;S&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;...)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;object&lt;/span&gt; &lt;span class="kd"&gt;with&lt;/span&gt; &lt;span class="nx"&gt;type&lt;/span&gt; &lt;span class="nx"&gt;S&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="nx"&gt;subtype&lt;/span&gt; &lt;span class="nx"&gt;of&lt;/span&gt; &lt;span class="nx"&gt;T&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="10-pep-8-compliant-string-chaining"&gt;10. &lt;span class="caps"&gt;PEP&lt;/span&gt;-8 compliant string chaining&lt;a class="headerlink" href="#10-pep-8-compliant-string-chaining" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://www.python.org/dev/peps/pep-0008"&gt;&lt;span class="caps"&gt;PEP8&lt;/span&gt;&lt;/a&gt;
is the style guide for Python code. Among other things, it directs that lines not be over 80 characters long and that indenting by consistent over line&amp;nbsp;breaks.&lt;/p&gt;
&lt;p&gt;This can be accomplished with a combination of backslashes \; parentheses () with commas , ; and addition operators +; but every one of these solutions is awkward for multiline strings. There is a multiline string signifier, the triple quote, but it does not allow consistent indenting over line&amp;nbsp;breaks. &lt;/p&gt;
&lt;p&gt;There is a solution: parentheses without commas. I don&amp;#8217;t know why this works, but I&amp;#8217;m glad it&amp;nbsp;does.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;my_long_text = (&amp;quot;We are no longer the knights who say Ni! &amp;quot;
                &amp;quot;We are now the knights who say ekki-ekki-&amp;quot;
                &amp;quot;ekki-p&amp;#39;tang-zoom-boing-z&amp;#39;nourrwringmm!&amp;quot;)
print(my_long_text)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We are no longer the knights who say Ni! We are now the knights who say&amp;nbsp;ekki-ekki-ekki-p&amp;#8217;tang-zoom-boing-z&amp;#8217;nourrwringmm!&lt;/p&gt;
&lt;h2 id="_1"&gt;是也乎&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;h2 id="changelog"&gt;Changelog&lt;a class="headerlink" href="#changelog" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;141130 move into Pelican as&amp;nbsp;zoomquiet.io&lt;/li&gt;
&lt;/ul&gt;</content><category term="Pythonic"></category><category term="FW"></category><category term="idioms"></category><category term="tutorial"></category></entry><entry><title>寻路ing Guido van Rossum</title><link href="http://blog.zoomquiet.io/guido-finding-his-way.html" rel="alternate"></link><published>2014-09-21T13:13:13+08:00</published><updated>2014-09-21T13:13:13+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2014-09-21:/guido-finding-his-way.html</id><summary type="html">
&lt;p&gt;&lt;a href="https://medium.com/dropbox-makers/guido-van-rossum-on-finding-his-way-e018e8b5f6b1"&gt;Guido van Rossum on finding his way — Dropbox Makers — Medium&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;~ Python 缔造者,当前 Dropbox 工程师, 近期编程思考&lt;/p&gt;
&lt;p&gt;Guido van Rossum 作为Python 的创造者,
以及 &lt;code&gt;仁慈的独裁者&lt;/code&gt; (又名 &lt;span class="caps"&gt;BDFL&lt;/span&gt;).
在此篇采访中,反思了近来的思考,
以及在 Dropbox 的经历. 本文也召示了接下来老爹准备折腾什么.&lt;/p&gt;
&lt;p&gt;(&lt;code&gt;译注:&lt;/code&gt; 大妈无责任式快译, 只是作为私人阅读笔记性质的存在,
强烈建议大家去原文自行理解一番,并能拨冗回来指点大妈的理解之谬 ;-)&lt;/p&gt;
&lt;h2 id="_1"&gt;程序猿前,你是如何成为电子爱好者的?&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;嚓了,这事儿忒久了,久到基本记忆不能了, 只是记得以前对电子很迷就是了.&lt;/p&gt;
&lt;h2 id="_2"&gt;那会儿子是怎么聚集小伙伴们的?&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;高中时在课堂上相遇的, 一起折腾物理老师指导下的各种电子设备.&lt;/p&gt;
&lt;p&gt;整个高中只是对未来职业有个模糊的概念,
认定自个儿在语言/社科上是没什么天份的, 所以,决定进入数学专业 …&lt;/p&gt;</summary><content type="html">
&lt;p&gt;&lt;a href="https://medium.com/dropbox-makers/guido-van-rossum-on-finding-his-way-e018e8b5f6b1"&gt;Guido van Rossum on finding his way — Dropbox Makers — Medium&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;~ Python 缔造者,当前 Dropbox 工程师, 近期编程思考&lt;/p&gt;
&lt;p&gt;Guido van Rossum 作为Python 的创造者,
以及 &lt;code&gt;仁慈的独裁者&lt;/code&gt; (又名 &lt;span class="caps"&gt;BDFL&lt;/span&gt;).
在此篇采访中,反思了近来的思考,
以及在 Dropbox 的经历. 本文也召示了接下来老爹准备折腾什么.&lt;/p&gt;
&lt;p&gt;(&lt;code&gt;译注:&lt;/code&gt; 大妈无责任式快译, 只是作为私人阅读笔记性质的存在,
强烈建议大家去原文自行理解一番,并能拨冗回来指点大妈的理解之谬 ;-)&lt;/p&gt;
&lt;h2 id="_1"&gt;程序猿前,你是如何成为电子爱好者的?&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;嚓了,这事儿忒久了,久到基本记忆不能了, 只是记得以前对电子很迷就是了.&lt;/p&gt;
&lt;h2 id="_2"&gt;那会儿子是怎么聚集小伙伴们的?&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;高中时在课堂上相遇的, 一起折腾物理老师指导下的各种电子设备.&lt;/p&gt;
&lt;p&gt;整个高中只是对未来职业有个模糊的概念,
认定自个儿在语言/社科上是没什么天份的, 所以,决定进入数学专业.&lt;/p&gt;
&lt;h2 id="_3"&gt;最后乍从电子转变为程序猿的?&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;在Amsterdam大学,折腾数学时,
涉及有编程,接触到大型计算机后, 立即发现了俺真正的激情所在.&lt;/p&gt;
&lt;p&gt;&lt;img alt="AOw_zZbFbtEJAzwRQ" src="https://d262ilb51hltx0.cloudfront.net/max/700/1*5Z4e-AOw_zZbFbtEJAzwRQ.jpeg"/&gt;&lt;/p&gt;
&lt;p&gt;~ 旧金山 Dropbox 内的 Hack week 上,Guido 谈及了Py 3 / Dan Stroud 拍摄&lt;/p&gt;
&lt;h2 id="_4"&gt;对计算机科学的兴趣所在?&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;通过业余电子爱好,接触到了一系列计算设备,
得以真正理解计算机,
并确信,编程比电子好玩的多. 而数学,无论多高端的课目,好象都和自己没什么关系.&lt;/p&gt;
&lt;p&gt;但是,专业上那时,没有办法灵活的转变方向,
于是俺申请了大学数据中心兼职位置,
开始长达5年的自学, 即,本质上几近辍学.&lt;/p&gt;
&lt;h2 id="mog"&gt;&lt;span class="caps"&gt;MOG&lt;/span&gt;,乍回事儿?!&lt;a class="headerlink" href="#mog" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;这份工作很赞,
而且,遇到了好人,
数据中心的一位教授鼓励俺说: “小子,不错嘦你毕业,这儿可以是你的全职岗位!” (笑ing)&lt;/p&gt;
&lt;p&gt;结果就这么在岗位上毕业,并进入了研究所, 真的全职程序猿了.&lt;/p&gt;
&lt;h2 id="_5"&gt;推上曰过:”在米国我是荷兰人,但在荷兰我又表现的很美国#纠结”,那么哪儿是你感觉最象自家的?&lt;a class="headerlink" href="#_5" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;当然,在自个儿屋子里时.. (笑ing)&lt;/p&gt;
&lt;p&gt;俺老婆是老美,两儿子也都说E文,
在米国也呆了超过18年, 已经很难想象会回欧洲了!&lt;/p&gt;
&lt;p&gt;目测余生多数时间肯定在米国了, 而且就在湾区,这绝对是一个伟大的地方.&lt;/p&gt;
&lt;h2 id="dropbox"&gt;在Dropbox最近折腾了什么?&lt;a class="headerlink" href="#dropbox" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;俺已经完成
&lt;a href="https://www.dropbox.com/developers/datastore"&gt;Datastore &lt;span class="caps"&gt;API&lt;/span&gt;&lt;/a&gt;
有日子了,
今天上线,将发布给用户为
&lt;a href="https://www.dropbox.com/developers/blog/107/new-datastore-features-shared-datastores-local-datastores-and-datastore-webhooks"&gt;share datastores&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;&lt;img alt="NMJBScQgtLZE0zmeOA1nJw" src="https://d262ilb51hltx0.cloudfront.net/max/800/1*NMJBScQgtLZE0zmeOA1nJw.png"/&gt;&lt;/p&gt;
&lt;h2 id="_6"&gt;带团队,还是更加独立?&lt;a class="headerlink" href="#_6" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;对于这一特殊的数据功能,
俺独立完成主要工作,
另外两位,主要进行测试,
在发布后,将会融入更大的团队,
并接纳实习生 …&lt;/p&gt;
&lt;h2 id="dropbox_1"&gt;进入 Dropbox 时,你要求当程序猿而不是经理,这对你很重要嘛?&lt;a class="headerlink" href="#dropbox_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;因为俺更加喜欢实际的编程,
以往俺被关进了一个团队,
无论编程还是作管理,
从来没有令俺舒服过.
当然,随着时间的推移,俺的领导能力有所增长, 可是,终究,俺是喜欢编程多过告诉其它人应该怎么作.&lt;/p&gt;
&lt;h2 id="dropbox-python-bdfl"&gt;你乍平衡 Dropbox 工程师和 Python &lt;span class="caps"&gt;BDFL&lt;/span&gt; 两种角色的?&lt;a class="headerlink" href="#dropbox-python-bdfl" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;在时间管理方面,
这两个角色的确是冲突的. 我并没有进行强制性的预订,为这两种角色.&lt;/p&gt;
&lt;p&gt;实践中,哪个角色必须投入更多精力时, 就相应的减少另一个角色的.&lt;/p&gt;
&lt;p&gt;&lt;img alt="AriSTNW_leEP85c7r" src="https://d262ilb51hltx0.cloudfront.net/max/1200/1*AriSTNW_leEP85c7r-wcew.jpeg"/&gt;&lt;/p&gt;
&lt;p&gt;~ 在&lt;span class="caps"&gt;DBX&lt;/span&gt; 2013 上 Guido 介绍 Dropbox 的数据存储. / Doug Cody 拍摄&lt;/p&gt;
&lt;h2 id="dropbox_2"&gt;在 Dropbox 的工作什么令你最得劲?&lt;a class="headerlink" href="#dropbox_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;在这儿,最令人满意的无外乎,
能见到这么堆热情/专注/有生产力/强大的人, 如此热衷的在推动产品和功能.&lt;/p&gt;
&lt;p&gt;身处其中,本身就非常赞!&lt;/p&gt;
&lt;p&gt;(&lt;code&gt;译注:&lt;/code&gt;
细思恐极哪,这意味着 Google 的团队的确如 &lt;code&gt;王珢&lt;/code&gt; 所言,
不是那么的… )&lt;/p&gt;
&lt;h2 id="hack-week"&gt;你在 Hack Week 的项目是什么?&lt;a class="headerlink" href="#hack-week" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Python 的静态类型.
来源自我们的一位实习工程师, Jukka Lehtosalo 的博士论文,
他实际上完成了一个原型,
在一周时间里,
我们一组7 人,对原型进行了改进,并完成了大量的工具.&lt;/p&gt;
&lt;p&gt;至今并没有形成完备的产品, 但是,大家都很期待这一够力的创意能产生出什么来.&lt;/p&gt;
&lt;h2 id="_7"&gt;为毛你选择静态类型这一项目?&lt;a class="headerlink" href="#_7" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;俺认为增加静态类型,
对未来是有益的,
至少能先帮助 Dropbox 转换自身的 Python 2 和 3 的代码&lt;/p&gt;
&lt;p&gt;&lt;img alt="yemdZovwCmvm7b2Dkm6SRQ" src="https://d262ilb51hltx0.cloudfront.net/max/800/1*yemdZovwCmvm7b2Dkm6SRQ.png"/&gt;&lt;/p&gt;
&lt;p&gt;Dropbox 的第一行代码就是Python.
而 Python Bees 将成为 &lt;span class="caps"&gt;DBX&lt;/span&gt; 以及 更早 Dropbox hack weeks 的新特性.&lt;/p&gt;
&lt;h2 id="python"&gt;如何平衡程序猿最新需求和 Python 长线版本间的冲突?&lt;a class="headerlink" href="#python" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Python 有一个很大的团队,
长期审核进入 Python 的特性. 在经过20多年的运营,我们已经很熟悉这一编程语言应该坚守的东西.&lt;/p&gt;
&lt;p&gt;语言变化太快,用户将抱怨项目总是无法稳定;
变化太慢,程序猿就抱怨错误总是不修订或是要求的功能从来不响应; 这里有种非常微妙的平衡在其中!&lt;/p&gt;
&lt;p&gt;所以,一般情况下,将变化快的东西,放在库中支持,
优先确保核心语言特性的稳定, 这样大家都根据需要安装对应的开源库就好.&lt;/p&gt;
&lt;p&gt;学习到这点,对俺来说非常不可思异.
目前俺处于非常舒适的状态, 即使现在俺退出,后续开发者也能理解怎么取舍的.&lt;/p&gt;
&lt;h2 id="python_1"&gt;有想过从 Python 社区退休? 有规划这事儿卟?&lt;a class="headerlink" href="#python_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;(笑ing)
这是一个很好的组合问题.
因为,俺的确有这么想过, 不过,当前还仅仅是想着.&lt;/p&gt;
&lt;h2 id="python_2"&gt;有没担心过更多新语言出现并替代 Python ?&lt;a class="headerlink" href="#python_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;因为发现的一种现象,令俺从未不担心这事儿.&lt;/p&gt;
&lt;p&gt;那就是总是有人在切换开发语言,
他们花了 三周/6周/两年, 就成为某种语言专家.
基于这种经验,他们就担心,
对 Python 的学习,可能也很快过时,必须重新开始.&lt;/p&gt;
&lt;p&gt;我见过各种语言/系统的普及以及更替,
但是,我不知道 Python 的这种兴衰周期,
5年?15年?
我当然希望 Python 持续吸收新的语言特性,发展下去,适应新的时代.
同时也期待,有更好的语言,借用 Python 的思想, 在不同的形式上结合其它语言,发展出不同的道路来.&lt;/p&gt;
&lt;p&gt;&lt;img alt="omEEAJapdc0XY9IfR" src="https://d262ilb51hltx0.cloudfront.net/max/1200/1*omEEAJapdc0XY9IfR-mFlA.jpeg"/&gt;&lt;/p&gt;
&lt;p&gt;~ 在 &lt;span class="caps"&gt;DBX&lt;/span&gt; 2013 Python Bee 集会上,Guido 和 Dropbox &lt;span class="caps"&gt;CEO&lt;/span&gt; Drew Houston 
联手庆贺. /  Doug Cody 拍摄&lt;/p&gt;
&lt;p&gt;&lt;img alt="4saVabl5aGfdTVuPLBNBCQ" src="https://d262ilb51hltx0.cloudfront.net/max/1200/1*4saVabl5aGfdTVuPLBNBCQ.jpeg"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="ziwbjd1WMkmuuoFK9q0Q" src="https://d262ilb51hltx0.cloudfront.net/max/1200/1*w-ziwbjd1WMkmuuoFK9q0Q.jpeg"/&gt;&lt;/p&gt;
&lt;h2 id="_8"&gt;在 &lt;a href="http://neopythonic.blogspot.com/2013/10/letter-to-young-programmer.html"&gt;给年轻程序猿的信&lt;/a&gt; 中,你号召要有大梦想,可现实挑战是大梦想忒多了,面对这么多的机会,你有什么建议给早鸟们?&lt;a class="headerlink" href="#_8" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;(&lt;code&gt;译注:&lt;/code&gt;中译: &lt;a href="http://blog.zoomquiet.io/guido-letter-2-young.html"&gt;Letter to a young programmer&lt;/a&gt; )&lt;/p&gt;
&lt;p&gt;早期职业生涯?
俺可能没有什么很好的经验,
因为,俺可是用了很长时间,才明白自个儿应该作什么的. 回想,基本上只是开开心心的编程,一切就自然来到面前.&lt;/p&gt;
&lt;p&gt;实际上,俺从来没有争取过什么工作, 只是等待,直到有人询问合作意愿,才进行考虑.&lt;/p&gt;
&lt;p&gt;我从不强调一切在掌握之中,
的确有那么一种病叫:&lt;code&gt;怕错过&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;实际上, 那些尝试控制一切的人并没有比我多快乐些什么.&lt;/p&gt;
&lt;p&gt;所以,对于长期职业,你并不能真正控制一切.
有时,对一件事儿决定太快, 你可能就真正错过了一次意想不到机会.&lt;/p&gt;
&lt;p&gt;…&lt;/p&gt;
&lt;h2 id="changlog"&gt;Changlog&lt;a class="headerlink" href="#changlog" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;140921 蠎周刊:133 期,推荐文章,不自觉的认真读完,形成了这一快译.&lt;/li&gt;
&lt;/ul&gt;</content><category term="DAMA"></category><category term="Pythoneer"></category><category term="Guido"></category></entry><entry><title>Python 101: 传播Python时几点建议</title><link href="http://blog.zoomquiet.io/py101-taching-suggestions.html" rel="alternate"></link><published>2014-08-08T00:00:00+08:00</published><updated>2014-08-08T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2014-08-08:/py101-taching-suggestions.html</id><summary type="html">&lt;p&gt;&lt;img alt="/chinese-python-poster" src="https://datalabcc.files.wordpress.com/2014/05/chinese-python-poster.jpg?w=590"/&gt;&lt;/p&gt;

&lt;p&gt;来自: &lt;a href="http://www.curiousefficiency.org/posts/2014/08/python-teaching-suggestions.html"&gt;Some Suggestions for Teaching Python | Curious Efficiency&lt;/a&gt; 
Nick Coghlan
2014-08-08 12:55&lt;/p&gt;
&lt;p&gt;I recently had the chance to attend a Software Carpentry bootcamp at the University of Queensland (as a teaching assistant), as well as seeing a presentation from one of &lt;span class="caps"&gt;UQ&lt;/span&gt;’s tutors at PyCon Australia 2014.&lt;/p&gt;
&lt;p&gt;While …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;img alt="/chinese-python-poster" src="https://datalabcc.files.wordpress.com/2014/05/chinese-python-poster.jpg?w=590"/&gt;&lt;/p&gt;

&lt;p&gt;来自: &lt;a href="http://www.curiousefficiency.org/posts/2014/08/python-teaching-suggestions.html"&gt;Some Suggestions for Teaching Python | Curious Efficiency&lt;/a&gt; 
Nick Coghlan
2014-08-08 12:55&lt;/p&gt;
&lt;p&gt;I recently had the chance to attend a Software Carpentry bootcamp at the University of Queensland (as a teaching assistant), as well as seeing a presentation from one of &lt;span class="caps"&gt;UQ&lt;/span&gt;’s tutors at PyCon Australia 2014.&lt;/p&gt;
&lt;p&gt;While many of the issues they encountered were inherent in the complexity of teaching programming, a few seemed like things that could be avoided.&lt;/p&gt;
&lt;h2 id="getting-floating-point-results-from-integer-division"&gt;Getting floating point results from integer division&lt;a class="headerlink" href="#getting-floating-point-results-from-integer-division" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;In Python 2, integer division copies C in truncating the answer by default:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python -c &lt;span class="s2"&gt;"print(3/4)"&lt;/span&gt;
&lt;span class="m"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Promoting to floating point requires type coercion, a command line flag or a future import:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s2"&gt;"print(float(3)/4)"&lt;/span&gt;
&lt;span class="mf"&gt;0.75&lt;/span&gt;
&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Qnew&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s2"&gt;"print(3/4)"&lt;/span&gt;
&lt;span class="mf"&gt;0.75&lt;/span&gt;
&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="s2"&gt;"from __future__ import division; print(3/4)"&lt;/span&gt;
&lt;span class="mf"&gt;0.75&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Python 3 just does the right thing by default, so one way to avoid the problem entirely is to teach Python 3 instead of Python 2:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python3 -c &lt;span class="s2"&gt;"print(3/4)"&lt;/span&gt;
&lt;span class="m"&gt;0&lt;/span&gt;.75
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(In both Python 2 and 3, the &lt;code&gt;//&lt;/code&gt; floor division operator explicitly requests truncating division when it is desired)&lt;/p&gt;
&lt;h2 id="common-python-23-syntax-for-printing-values"&gt;Common Python 2/3 syntax for printing values&lt;a class="headerlink" href="#common-python-23-syntax-for-printing-values" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;I’ve been using Python 2 and 3 in parallel for more than 8 years now (while Python 3.0 was released in 2008, the project started in earnest a couple of years earlier than that, while Python 2.5 was still in development).&lt;/p&gt;
&lt;p&gt;One essential trick I have learned in order to make regularly switching back and forth feasible is to limit myself to the common print syntax that works the same in both versions: passing a single argument surrounded by parentheses.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python -c &lt;span class="s1"&gt;'print("Hello world!")'&lt;/span&gt;
Hello world!
$ python3 -c &lt;span class="s1"&gt;'print("Hello world!")'&lt;/span&gt;
Hello world!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If I need to pass multiple arguments, I’ll use string formatting, rather than the implicit concatenation feature.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python -c &lt;span class="s1"&gt;'print("{} {}{}".format("Hello", "world", "!"))'&lt;/span&gt;
Hello world!
$ python3 -c &lt;span class="s1"&gt;'print("{} {}{}".format("Hello", "world", "!"))'&lt;/span&gt;
Hello world!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Rather than doing this, the Software Carpentry material that was used at the bootcamp I attended used the legacy Python 2 only &lt;code&gt;print&lt;/code&gt; syntax extensively, causing examples that otherwise would have worked fine in either version to fail for students that happened to be running Python 3. Adopting the shared syntax for printing values could be enough to make the course largely version independent.&lt;/p&gt;
&lt;h2 id="distinguishing-between-returning-and-printing-values"&gt;Distinguishing between returning and printing values&lt;a class="headerlink" href="#distinguishing-between-returning-and-printing-values" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;One problem noted both at the bootcamp and by presenters at PyCon Australia was the challenge of teaching students the difference between printing and returning values. The problem is the “Print” part of the Read-Eval-Print-Loop provided by Python’s interactive interpreter:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt; def print_arg(x):
...     print(x)
...
&amp;gt;&amp;gt;&amp;gt; def return_arg(x):
...     return x
...
&amp;gt;&amp;gt;&amp;gt; print_arg(10)
10
&amp;gt;&amp;gt;&amp;gt; return_arg(10)
10
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There’s no obvious difference in output at the interactive prompt, especially for types like numbers where the results of &lt;code&gt;str&lt;/code&gt; and &lt;code&gt;repr&lt;/code&gt; are the same. Even when they’re different, those differences may not be obvious to a student:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt; print_arg("Hello world")
Hello world
&amp;gt;&amp;gt;&amp;gt; return_arg("Hello world")
'Hello world'
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;While I don’t have a definitive answer for this one, an experiment that seems worth trying to me is to teach students how to replace &lt;code&gt;sys.displayhook&lt;/code&gt;. 
In particular, I suggest demonstrating the following change, and seeing if it helps explain the difference between printing output for display to the user and returning values for further processing:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;new_displayhook&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;     &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;         &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"-&amp;gt; {!r}"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;displayhook&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;new_displayhook&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;print_arg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;return_arg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Understanding the difference between printing and returning is essential to learning to use functions effectively, and tweaking the display of results this way may help make the difference more obvious.&lt;/p&gt;
&lt;h2 id="addendum-ipython-including-ipython-notebook"&gt;Addendum: IPython (including IPython Notebook)&lt;a class="headerlink" href="#addendum-ipython-including-ipython-notebook" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;The initial examples above focused on the standard CPython runtime, include the default interactive interpreter. The IPython interactive interpreter, including the IPython Notebook, has a couple of interesting differences in behaviour that are relevant to the above comments.&lt;/p&gt;
&lt;p&gt;Firstly, it does display return values and printed values differently, prefacing results with an output reference number:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;In [1]: print 10
10

In [2]: 10
Out[2]: 10
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Secondly, it has an optional “autocall” feature that allows a user to tell IPython to automatically add the missing parentheses to a function call if the user leaves them out:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ipython3 --autocall&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; -c &lt;span class="s2"&gt;"print 10"&lt;/span&gt;
-&amp;gt; print&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="m"&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is a general purpose feature that allows users to make their IPython sessions behave more like languages that don’t have first class functions (most notably, IPython’s autocall feature closely resembles &lt;span class="caps"&gt;MATLAB&lt;/span&gt;’s “command syntax” notation for calling functions).&lt;/p&gt;
&lt;p&gt;It also has the side effect that users that use IPython, have autocall enabled, and don’t use any of the more esoteric quirks of the Python 2 &lt;code&gt;print&lt;/code&gt; statement (like stream redirection or suppressing the trailing newline) may not even notice that &lt;code&gt;print&lt;/code&gt; became an ordinary builtin in Python 3.&lt;/p&gt;
&lt;h2 id="changelog"&gt;Changelog&lt;a class="headerlink" href="#changelog" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;140811 翻译 Weekly issue:127 时发现,转译学习&lt;/li&gt;
&lt;/ul&gt;</content><category term="press"></category><category term="101"></category><category term="Zh"></category></entry><entry><title>为毛俺不担心所谓Python用户流失</title><link href="http://blog.zoomquiet.io/why-i-dont-worry-about-pythons-popularity.html" rel="alternate"></link><published>2014-07-11T00:00:00+08:00</published><updated>2014-07-11T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2014-07-11:/why-i-dont-worry-about-pythons-popularity.html</id><summary type="html">&lt;h2 id="why-i-dont-worry-about-python-losing-users"&gt;Why I don’t worry about Python losing users&lt;a class="headerlink" href="#why-i-dont-worry-about-python-losing-users" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;I just had a need to read two files that were line-delimited lists of domains, consolidate the data, and then output the domains sorted and all lowercased to a new file. It took me 10 lines of Python code and worked …&lt;/p&gt;</summary><content type="html">&lt;h2 id="why-i-dont-worry-about-python-losing-users"&gt;Why I don’t worry about Python losing users&lt;a class="headerlink" href="#why-i-dont-worry-about-python-losing-users" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;I just had a need to read two files that were line-delimited lists of domains, consolidate the data, and then output the domains sorted and all lowercased to a new file. It took me 10 lines of Python code and worked perfectly on the first&amp;nbsp;try.&lt;/p&gt;
&lt;p&gt;Out of curiosity and to make sure I keep learning Go (my team at work uses it whenever possible), I decided to re-implement the same functionality. That took 
&lt;a href="https://gist.github.com/brettcannon/a2a37cc5aadbc91c02ad"&gt;56 lines in Go&lt;/a&gt;
. When I went back and refactored the Python code to match the abstractions I used in the Go code it grew to 
&lt;a href="https://gist.github.com/brettcannon/82c4fe68bac30f4ed653"&gt;17 lines&lt;/a&gt;&amp;nbsp;.&lt;/p&gt;
&lt;p&gt;And this sort of thing is exactly why I do not worry about Python’s popularity (at least in terms of users). While languages like Go compete with Python on a performance:productivity comparison, when you compare Python to almost any other language based purely on productivity it trounces the competition. And this shouldn’t shock anyone when you think about the history of Python. The language was initially created to script 
&lt;a href="http://en.wikipedia.org/wiki/Amoeba_(operating_system)"&gt;a distributed operating system&lt;/a&gt;
. This is why in the ‘90s and early 2000s the comparison was always Python vs. Perl and then Python vs. Ruby. Only in the 2000s and later did Python get compared to Java or very recently to Go or&amp;nbsp;JavaScript.&lt;/p&gt;
&lt;p&gt;And this productivity view of Python also ties into education. With 
&lt;a href="http://cacm.acm.org/blogs/blog-cacm/176450-python-is-now-the-most-popular-introductory-teaching-language-at-top-us-universities/fulltext"&gt;Python now the most popular intro teaching language at the top &lt;span class="caps"&gt;U.S.&lt;/span&gt; universities&lt;/a&gt;
, many people are learning how to program using Python. But exposure early on to a language does not guarantee future usage by someone; I for one did not use Scheme after my intro course. But because Python is such a productive language, the language becomes a staple in one’s toolkit of programming. If people learn Python first, then when they need to write a quick script like I did today they will most likely reach for Python than Java or Go or some other language they may be using for their&amp;nbsp;work.&lt;/p&gt;
&lt;p&gt;All of this is why I don’t worry about Python’s demise due to lack of users. People might switch to Go at work because the performance:productivity ratio is very good for their project or team. Or maybe people got frustrated with the Python 2/3 transition and didn’t want to base their project at work on Python anymore. It really doesn’t matter in terms of the number of users of Python because I’m willing to bet those people still reach for Python when they need a one-off script to solve a problem. And I bet these people still recommend Python when they are asked what people’s first programming language should be. In other words I don’t worry about our great-for-teaching, highly productive scripting language ever lacking users; Python will always be&amp;nbsp;useful.&lt;/p&gt;
&lt;h2 id="changelog"&gt;Changelog&lt;a class="headerlink" href="#changelog" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;161203 是也乎,(￣▽￣)&lt;ul&gt;
&lt;li&gt;发现没有必要全文翻译,观点很清晰&lt;/li&gt;
&lt;li&gt;就生产力方面,当前世界无出其右&lt;/li&gt;
&lt;li&gt;嘦是人类创建的软件工程,必然有一个很长时期的混乱期&lt;/li&gt;
&lt;li&gt;这个期间,临时的/一次性的 检验/验证/实验性&amp;nbsp;脚本是必须的&lt;/li&gt;
&lt;li&gt;那么通用的 Python&amp;nbsp;语言简直是无法放弃的&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;140728&amp;nbsp;从周刊中发现,决定翻译&lt;/li&gt;
&lt;/ul&gt;</content><category term="BRETT"></category><category term="Leo"></category><category term="PyConChina"></category><category term="Zh"></category></entry><entry><title>ScrapBook彻查成果</title><link href="http://blog.zoomquiet.io/zq-chk4scrapbook.html" rel="alternate"></link><published>2014-07-11T00:00:00+08:00</published><updated>2014-07-11T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2014-07-11:/zq-chk4scrapbook.html</id><summary type="html">
&lt;h2 id="_1"&gt;背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;参考:&lt;a href="http://wiki.woodpecker.org.cn/moin/ZqStudy/MyLearningSkill"&gt;我的学习&amp;amp;工具&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;从06年,就将个人网络资料收集/整理/发布,
切换为主力使用 &lt;a href="http://www.xuldev.org/scrapbook/"&gt;ScrapBook&lt;/a&gt; .&lt;/p&gt;
&lt;p&gt;这一下子就8年过去了,常用系统也从 Ubuntu 切换为 &lt;span class="caps"&gt;MAC&lt;/span&gt;, 收集的本地网页也超过了8万个,早已被迫进行了分库.&lt;/p&gt;
&lt;p&gt;自动发布的&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;http://floss.zoomquiet.io&lt;/li&gt;
&lt;li&gt;http://skm.zoomquiet.io&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;也成为一些朋友常常挖掘的资料库.&lt;/p&gt;
&lt;p&gt;可以说, ScrapBook 在 everynote 流行之前,就成功的解决了俺主要的在线网页资料为主的,
外部知识仓库的收集/整理/组合/复用/发布 等等基本功能/服务.&lt;/p&gt;
&lt;p&gt;而且, 也通过Python ,完成了辅助的小脚本工具,配合 个人主机/7牛&lt;span class="caps"&gt;CDN&lt;/span&gt;, 完成了自动化的差异发布.&lt;/p&gt;
&lt;h3 id="_2"&gt;可是!&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;参考 …&lt;/p&gt;</summary><content type="html">
&lt;h2 id="_1"&gt;背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;参考:&lt;a href="http://wiki.woodpecker.org.cn/moin/ZqStudy/MyLearningSkill"&gt;我的学习&amp;amp;工具&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;从06年,就将个人网络资料收集/整理/发布,
切换为主力使用 &lt;a href="http://www.xuldev.org/scrapbook/"&gt;ScrapBook&lt;/a&gt; .&lt;/p&gt;
&lt;p&gt;这一下子就8年过去了,常用系统也从 Ubuntu 切换为 &lt;span class="caps"&gt;MAC&lt;/span&gt;, 收集的本地网页也超过了8万个,早已被迫进行了分库.&lt;/p&gt;
&lt;p&gt;自动发布的&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;http://floss.zoomquiet.io&lt;/li&gt;
&lt;li&gt;http://skm.zoomquiet.io&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;也成为一些朋友常常挖掘的资料库.&lt;/p&gt;
&lt;p&gt;可以说, ScrapBook 在 everynote 流行之前,就成功的解决了俺主要的在线网页资料为主的,
外部知识仓库的收集/整理/组合/复用/发布 等等基本功能/服务.&lt;/p&gt;
&lt;p&gt;而且, 也通过Python ,完成了辅助的小脚本工具,配合 个人主机/7牛&lt;span class="caps"&gt;CDN&lt;/span&gt;, 完成了自动化的差异发布.&lt;/p&gt;
&lt;h3 id="_2"&gt;可是!&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;参考: &lt;a href="http://blog.zoomquiet.io/livin-scrapbook.html"&gt;ScrapBook 生存指南&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;从去年开始, 本地 &lt;code&gt;FLOSS&lt;/code&gt; 仓库,就已经无法正常进行标准搜索了,一搜索,整个 FireFox 就僵死.&lt;/li&gt;
&lt;li&gt;而且,从其它仓库切换进入 &lt;span class="caps"&gt;FLOSS&lt;/span&gt; 时,要等待半分钟以上…&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_3"&gt;期待&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;实在太常用,所以,无法忍,而且也不打算切换到 everynote 什么的其它平台上, 作为一头合格的程序猿,就是要自个儿折腾通透哪!&lt;/p&gt;
&lt;p&gt;所以,先决定目标:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;通过进一步拿合理分仓库,有效减少每个仓库包含的网页数量&lt;/li&gt;
&lt;li&gt;通过脚本分析 &lt;code&gt;scrapbook.rdf&lt;/code&gt; 数据库来清除多余节点(隐藏的无效的)&lt;/li&gt;
&lt;li&gt;通过脚本分析 对应 &lt;code&gt;data/&lt;/code&gt; 目录中的网页子目录,清除多余的&lt;/li&gt;
&lt;li&gt;针对全新的分仓库,建立对应的 7牛 空间,以及对应的 &lt;code&gt;*.zoomquiet.io&lt;/code&gt; 子站发布&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;总之就是要加速,无论本地/远程&lt;/p&gt;
&lt;h3 id="_4"&gt;数据结构&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;为了大家平滑的理解折腾之处,先简要说明一下 ScrapBook 的数据结构:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;XX仓库/     对应 Multi-ScrapBook 开启后,不同的Book
  +- data   实际本地网页存放入口, 类似 20050205102119 的子目录
  +- tree   导出目录树后的 html 入口
  +- ...
  `- scrapbook.rdf 插件界面使用的 xml 数据仓库
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;scrapbook.rdf 的关键数据约定&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?xml version="1.0"?&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;RDF:RDF&lt;/span&gt; &lt;span class="na"&gt;xmlns:NS2=&lt;/span&gt;&lt;span class="s"&gt;"http://amb.vis.ne.jp/mozilla/scrapbook-rdf#"&lt;/span&gt;
         &lt;span class="na"&gt;xmlns:NC=&lt;/span&gt;&lt;span class="s"&gt;"http://home.netscape.com/NC-rdf#"&lt;/span&gt;
         &lt;span class="na"&gt;xmlns:RDF=&lt;/span&gt;&lt;span class="s"&gt;"http://www.w3.org/1999/02/22-rdf-syntax-ns#"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  ...
  主体内容
&lt;span class="nt"&gt;&amp;lt;/RDF:RDF&amp;gt;&lt;/span&gt;

根列表:
&lt;span class="nt"&gt;&amp;lt;RDF:Seq&lt;/span&gt; &lt;span class="na"&gt;RDF:about=&lt;/span&gt;&lt;span class="s"&gt;"urn:scrapbook:root"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    %(rdf_li)s
  &lt;span class="nt"&gt;&amp;lt;/RDF:Seq&amp;gt;&lt;/span&gt;

目录容器:
&lt;span class="nt"&gt;&amp;lt;RDF:Seq&lt;/span&gt; &lt;span class="na"&gt;RDF:about=&lt;/span&gt;&lt;span class="s"&gt;"urn:scrapbook:%(rdf_item)s"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    %(rdf_li)s
  &lt;span class="nt"&gt;&amp;lt;/RDF:Seq&amp;gt;&lt;/span&gt;

目录节点条目:
&lt;span class="nt"&gt;&amp;lt;RDF:li&lt;/span&gt; &lt;span class="na"&gt;RDF:resource=&lt;/span&gt;&lt;span class="s"&gt;"urn:scrapbook:%(rdf_item)s"&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

目录节点:
&lt;span class="nt"&gt;&amp;lt;RDF:Description&lt;/span&gt; &lt;span class="na"&gt;RDF:about=&lt;/span&gt;&lt;span class="s"&gt;"urn:scrapbook:%(rdf_item)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:type=&lt;/span&gt;&lt;span class="s"&gt;"folder"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:id=&lt;/span&gt;&lt;span class="s"&gt;"%(rdf_id)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:title=&lt;/span&gt;&lt;span class="s"&gt;"%(rdf_title)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:chars=&lt;/span&gt;&lt;span class="s"&gt;""&lt;/span&gt;
        &lt;span class="na"&gt;NS2:icon=&lt;/span&gt;&lt;span class="s"&gt;""&lt;/span&gt;
        &lt;span class="na"&gt;NS2:source=&lt;/span&gt;&lt;span class="s"&gt;""&lt;/span&gt;
        &lt;span class="na"&gt;NS2:comment=&lt;/span&gt;&lt;span class="s"&gt;""&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

页面节点:
&lt;span class="nt"&gt;&amp;lt;RDF:Description&lt;/span&gt; &lt;span class="na"&gt;RDF:about=&lt;/span&gt;&lt;span class="s"&gt;"urn:scrapbook:%(rdf_item)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:type=&lt;/span&gt;&lt;span class="s"&gt;"%(rdf_type)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:id=&lt;/span&gt;&lt;span class="s"&gt;"%(rdf_id)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:title=&lt;/span&gt;&lt;span class="s"&gt;"%(rdf_title)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:comment=&lt;/span&gt;&lt;span class="s"&gt;"%(rdf_comment)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:icon=&lt;/span&gt;&lt;span class="s"&gt;"%(rdf_icon)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:source=&lt;/span&gt;&lt;span class="s"&gt;"%(rdf_source)s"&lt;/span&gt; 
        &lt;span class="na"&gt;NS2:chars=&lt;/span&gt;&lt;span class="s"&gt;"UTF-8"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

笔记节点:
&lt;span class="nt"&gt;&amp;lt;RDF:Description&lt;/span&gt; &lt;span class="na"&gt;RDF:about=&lt;/span&gt;&lt;span class="s"&gt;"urn:scrapbook:%(rdf_item)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:type=&lt;/span&gt;&lt;span class="s"&gt;"note"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:id=&lt;/span&gt;&lt;span class="s"&gt;"%(rdf_id)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:title=&lt;/span&gt;&lt;span class="s"&gt;"%(rdf_title)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:chars=&lt;/span&gt;&lt;span class="s"&gt;"UTF-8"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:comment=&lt;/span&gt;&lt;span class="s"&gt;""&lt;/span&gt;
        &lt;span class="na"&gt;NS2:icon=&lt;/span&gt;&lt;span class="s"&gt;""&lt;/span&gt;
        &lt;span class="na"&gt;NS2:source=&lt;/span&gt;&lt;span class="s"&gt;""&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

分割线节点:
&lt;span class="nt"&gt;&amp;lt;NC:BookmarkSeparator&lt;/span&gt; &lt;span class="na"&gt;RDF:about=&lt;/span&gt;&lt;span class="s"&gt;"urn:scrapbook:%(rdf_item)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:type=&lt;/span&gt;&lt;span class="s"&gt;"separator"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:id=&lt;/span&gt;&lt;span class="s"&gt;"%(rdf_id)s"&lt;/span&gt;
        &lt;span class="na"&gt;NS2:title=&lt;/span&gt;&lt;span class="s"&gt;""&lt;/span&gt;
        &lt;span class="na"&gt;NS2:chars=&lt;/span&gt;&lt;span class="s"&gt;""&lt;/span&gt;
        &lt;span class="na"&gt;NS2:comment=&lt;/span&gt;&lt;span class="s"&gt;""&lt;/span&gt;
        &lt;span class="na"&gt;NS2:icon=&lt;/span&gt;&lt;span class="s"&gt;""&lt;/span&gt;
        &lt;span class="na"&gt;NS2:source=&lt;/span&gt;&lt;span class="s"&gt;""&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;以上 &lt;code&gt;%(rdf_id)s&lt;/code&gt; 之类是 Py 内置模板的语法,
在 &lt;code&gt;scrapbook.rdf&lt;/code&gt; 实例中,都是形如: &lt;code&gt;20050205102119&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="_5"&gt;折腾&lt;a class="headerlink" href="#_5" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;纪要一下折腾的过程中,要命的关键过程/代码&lt;/p&gt;
&lt;h3 id="_6"&gt;清查&lt;a class="headerlink" href="#_6" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;一切开始之前,的体积:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ du -h * 
...
&lt;span class="m"&gt;5&lt;/span&gt;.6G    ZqDevRel
&lt;span class="m"&gt;6&lt;/span&gt;.5G    ZqFLOSS
&lt;span class="m"&gt;3&lt;/span&gt;.7G    ZqSKM
...

$ ls ZqDevRel/data/ &lt;span class="p"&gt;|&lt;/span&gt; wc
   &lt;span class="m"&gt;26214&lt;/span&gt;   &lt;span class="m"&gt;26214&lt;/span&gt;  &lt;span class="m"&gt;393210&lt;/span&gt;

&lt;span class="c1"&gt;# 计划切分为&lt;/span&gt;
  -&amp;gt; zqCoder 
  -&amp;gt; zqSMM

$ ls ZqFLOSS/data/ &lt;span class="p"&gt;|&lt;/span&gt; wc
   &lt;span class="m"&gt;30767&lt;/span&gt;   &lt;span class="m"&gt;30767&lt;/span&gt;  &lt;span class="m"&gt;461505&lt;/span&gt;

&lt;span class="c1"&gt;# 计划切分为&lt;/span&gt;
  -&amp;gt; zqDevRes
  -&amp;gt; zqSCM   
  -&amp;gt; zqPythonic
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;先在仓库中,根据拆分目标,将内容树收纳到对应的目录中, 以便复制,加载后,快速删除.&lt;/p&gt;
&lt;h4 id="pax"&gt;pax&lt;a class="headerlink" href="#pax" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;pax&lt;/code&gt; 是个好工具,原先习惯性的用 &lt;code&gt;cp&lt;/code&gt; 那叫个慢!
搜索才知道,大量小文件的迁移就应该用 &lt;code&gt;pax&lt;/code&gt;
于是简单的起个背景周末跑吧….&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ du -hs *
...
&lt;span class="m"&gt;5&lt;/span&gt;.7G    ZqDevRel
  &lt;span class="m"&gt;5&lt;/span&gt;.7G    zqCoder
  &lt;span class="m"&gt;5&lt;/span&gt;.7G    zqSMM

&lt;span class="m"&gt;6&lt;/span&gt;.5G    ZqFLOSS
  &lt;span class="m"&gt;6&lt;/span&gt;.5G    zqDevRes
  &lt;span class="m"&gt;6&lt;/span&gt;.5G    zqPythonic
  &lt;span class="m"&gt;6&lt;/span&gt;.5G    zqSCM

...
&lt;span class="m"&gt;4&lt;/span&gt;.0K    scraptools
...
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;体积占用激增3倍!&lt;/p&gt;
&lt;p&gt;然后,逐一用 ScrapBook 加载新的目录&lt;/p&gt;
&lt;h4 id="_7"&gt;手工删除目录树&lt;a class="headerlink" href="#_7" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;再对比几个仓库的体积:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~/KuaiPan/zScrapBook
$ ls ZqFLOSS/data/ | wc -l
   30767

$ ls zqSCM/data/ | wc -l
   25320

$ du -hs *
...
5.3G    data
...

~/KuaiPan/zScrapBook
$ ls zqDevRes/data/ | wc -l
   24045

$ ls zqPythonic/data/ | wc -l
   24294

$ ls zqSCM/data/ | wc -l
   25319
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="_8"&gt;严正的不科学!&lt;a class="headerlink" href="#_8" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;手工折腾了半天,却发现几乎没有释放多少空间出来,
好象总是有 20000 左右的目录,是不存在的页面节点…&lt;/p&gt;
&lt;h3 id="_9"&gt;解析&lt;a class="headerlink" href="#_9" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;首先,&lt;/p&gt;
&lt;h3 id="_10"&gt;重构&lt;a class="headerlink" href="#_10" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/martinblech/xmltodict/issues/14"&gt;xml containing 1 child · Issue #14 · martinblech/xmltodict&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dict_constructor&lt;/code&gt;&lt;/p&gt;
&lt;h3 id="_11"&gt;删除&lt;a class="headerlink" href="#_11" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;h2 id="_12"&gt;回顾&lt;a class="headerlink" href="#_12" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span class="caps"&gt;JS&lt;/span&gt; 在 FireFox 的确不给力哪…&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ du -hs *
...
957M  ZqDevRel
866M  ZqFLOSS
349M  ZqKss
&lt;span class="m"&gt;3&lt;/span&gt;.4G  ZqSKM
...
&lt;span class="m"&gt;1&lt;/span&gt;.0G  _chaos
&lt;span class="m"&gt;5&lt;/span&gt;.2G  _stuff
...
424K  scrapbooktools
766M  zqCoder
&lt;span class="m"&gt;1&lt;/span&gt;.0G  zqDevRes
&lt;span class="m"&gt;1&lt;/span&gt;.4G  zqPythonic
&lt;span class="m"&gt;1&lt;/span&gt;.4G  zqSCM
564M  zqSMM
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;为什么,在 700M 的 zqCoder 仓库中无法搜索,但是, 3.4G 的ZqSKM 中就可以?!&lt;/p&gt;
&lt;p&gt;认真对比,从重建的空仓库的 .rdf 中,发现:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;RDF:Seq&lt;/span&gt; &lt;span class="na"&gt;RDF:about=&lt;/span&gt;&lt;span class="s"&gt;"urn:scrapbook:search"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
....
&lt;span class="nt"&gt;&amp;lt;/RDF:Seq&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这个节点中包含有意外的几万条记录!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for seq in doc['RDF:RDF']['RDF:Seq']:
    if 'urn:scrapbook:search' == seq['@RDF:about']:
        seq.pop('RDF:li')
        break
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;几行代码解决!&lt;/p&gt;
&lt;h3 id="_13"&gt;数据新结构&lt;a class="headerlink" href="#_13" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;h3 id="_14"&gt;功能开关&lt;a class="headerlink" href="#_14" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;h2 id="_15"&gt;时间帐单&lt;a class="headerlink" href="#_15" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;+ 3.5H 用pax 复制,手工清除多余树
+ 1.5H 重新理解自个儿的脚本,加载自制数据结构到湿件
+ 1.0H 追加走查功能 
+ 2.0H 调试走查,优化输出,明确可清除无效节点的数量级
+ 1.5H 尝试用 click 改进功能开关,未果
+ 2.0H 对比测试不同的解析库
+ 1.0H 用xmltodict 重构原先的 走查功能
+ 1.5H 根据比对的需求,改进 xmltodict 的数据结构,追加 K/V 复用
+ 2.0H 再复制测试仓库,用 sh 小心的测试实际删除行为
+ 1.0H 通测
+ 2.5H 批量处置7 个新旧仓库,清删除 16万+ 个无用目标, 近25G+ 空间释放
+ 4.0H 整理代码, 组织文档

24.5H+ 自然时间, 3+天业余时间
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;140909 才算完成一个可以看的版本&lt;/li&gt;
&lt;li&gt;140711 完成所有功能,启动文档回顾&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="140708-scrapbook"&gt;140708 ScrapBook 分库&lt;a class="headerlink" href="#140708-scrapbook" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;h2 id="2h-click"&gt;+2H click&lt;a class="headerlink" href="#2h-click" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;果然,清查出有大量, &lt;span class="caps"&gt;FLOSS&lt;/span&gt; 中当初没有合理清除的节点
从 &lt;span class="caps"&gt;ROOT&lt;/span&gt; 引发的树中挂不上的&lt;/p&gt;
&lt;h2 id="2h"&gt;+2H 实际清减&lt;a class="headerlink" href="#2h" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://amoffat.github.io/sh/"&gt;sh 1.08 — sh v1.08 documentation&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;sh&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;rm&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"-Rfv"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;del_dir&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;用 sh 删除目录&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    tree_nodes:  3574
    exp_items:  4164
    dirs:  590
    DESC : 24190
    chaos: 20616
    有效: 3574
$ ls reDevRel/data/ | wc -l
    2996
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;用 lxml/模板 重构 rdf&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;人肉来总是感觉不对,&lt;/p&gt;
&lt;p&gt;尝试:&lt;/p&gt;
&lt;h3 id="lxml"&gt;lxml&lt;a class="headerlink" href="#lxml" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;忒复杂!!!
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="untangle"&gt;untangle&lt;a class="headerlink" href="#untangle" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/stchris/untangle"&gt;stchris/untangle&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;RDF&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;Seq&lt;/span&gt;         &lt;span class="mi"&gt;579&lt;/span&gt;
&lt;span class="n"&gt;RDF_Description&lt;/span&gt;     &lt;span class="mi"&gt;24190&lt;/span&gt;
&lt;span class="n"&gt;NC&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;BookmarkSeparator&lt;/span&gt;    &lt;span class="mi"&gt;57&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="s1"&gt;'_chaos/scraotools_reDevRel.pkl'&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mode&lt;/span&gt; &lt;span class="s1"&gt;'wb'&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="mh"&gt;0x100666ed0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="n"&gt;exp_level_idx&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="n"&gt;RUNed&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt; &lt;span class="mf"&gt;2263.57079&lt;/span&gt; &lt;span class="n"&gt;ms&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;快,但是,无法Dump,而且书写不直觉, 要将 “:” 变成 “_” obj.RDF_RDF.RDF_Description&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;lt;open file '_chaos/scraotools_reDevRel.pkl', mode 'wb' at 0x100769ed0&amp;gt;
Traceback (most recent call last):
  File "scraptools/zq_chk4scrap.py", line 457, in &amp;lt;module&amp;gt;
    RDFD = exp_level_idx(MYBOOK)
  File "scraptools/zq_chk4scrap.py", line 161, in cal_time
    result = func(*args)
  File "scraptools/zq_chk4scrap.py", line 205, in exp_level_idx
    pickle.dump(obj.RDF_RDF, output)
  File "/Users/zoomq/.pyenv/versions/2.7.6/lib/python2.7/pickle.py", line 1370, in dump
    Pickler(file, protocol).dump(obj)
  File "/Users/zoomq/.pyenv/versions/2.7.6/lib/python2.7/pickle.py", line 224, in dump
    self.save(obj)
  File "/Users/zoomq/.pyenv/versions/2.7.6/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/Users/zoomq/.pyenv/versions/2.7.6/lib/python2.7/pickle.py", line 719, in save_inst
    getstate = obj.__getstate__
  File "/Users/zoomq/.pyenv/versions/276chaos/lib/python2.7/site-packages/untangle.py", line 66, in __getattr__
    raise IndexError('Unknown key &amp;lt;%s&amp;gt;' % key)
IndexError: Unknown key &amp;lt;__getstate__&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="xmltodict"&gt;xmltodict&lt;a class="headerlink" href="#xmltodict" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/martinblech/xmltodict"&gt;martinblech/xmltodict&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[u'RDF:RDF']&lt;/span&gt;
&lt;span class="na"&gt;RDF:Seq         579&lt;/span&gt;
&lt;span class="na"&gt;RDF:Description     24190&lt;/span&gt;
&lt;span class="na"&gt;NC:BookmarkSeparator    57&lt;/span&gt;
        &lt;span class="na"&gt;exp_level_idx() RUNed~ 4997.31612 ms&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;慢,但是,能 dump 而且书写直觉
    doc[‘&lt;span class="caps"&gt;RDF&lt;/span&gt;:&lt;span class="caps"&gt;RDF&lt;/span&gt;’][‘&lt;span class="caps"&gt;RDF&lt;/span&gt;:Seq’]&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[u'RDF:RDF']&lt;/span&gt;
&lt;span class="na"&gt;RDF:Seq         579&lt;/span&gt;
&lt;span class="na"&gt;RDF:Description     24190&lt;/span&gt;
&lt;span class="na"&gt;NC:BookmarkSeparator    57&lt;/span&gt;
&lt;span class="na"&gt;&amp;lt;open file '_chaos/scraotools_reDevRel.pkl', mode 'wb' at 0x10f26d420&amp;gt;&lt;/span&gt;
        &lt;span class="na"&gt;exp_level_idx() RUNed~ 16878.75390 ms&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;同时,能反写出&lt;span class="caps"&gt;XML&lt;/span&gt; 来!&lt;/p&gt;
&lt;p&gt;主要问题是行为不统一!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;RDF:Seq&lt;/span&gt; &lt;span class="na"&gt;RDF:about=&lt;/span&gt;&lt;span class="s"&gt;"urn:scrapbook:item20070113201921"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;RDF:li&lt;/span&gt; &lt;span class="na"&gt;RDF:resource=&lt;/span&gt;&lt;span class="s"&gt;"urn:scrapbook:item20070113201940"&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;RDF:li&lt;/span&gt; &lt;span class="na"&gt;RDF:resource=&lt;/span&gt;&lt;span class="s"&gt;"urn:scrapbook:item20070113201941"&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/RDF:Seq&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;时 唯一的 &lt;span class="caps"&gt;RDF&lt;/span&gt;:Li 不是 List!!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;K2SEQ[crt_id]&amp;gt;RDF:Li OrderedDict([(u'@RDF:resource', u'urn:scrapbook:item20070113201921')])
K2SEQ[crt_id]['RDF:li'].len:: 1
    &amp;lt;class 'collections.OrderedDict'&amp;gt;
K2SEQ[crt_id]&amp;gt;RDF:Li @RDF:resource
     try crt_node.keys:
@RDF:resource
K2SEQ[crt_id]&amp;gt;RDF:Li OrderedDict([(u'@RDF:resource', u'urn:scrapbook:item20070527160000')])
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
K2SEQ[crt_id]&amp;gt;RDF:Li OrderedDict([(u'@RDF:resource', u'urn:scrapbook:item20061006133550')])
K2SEQ[crt_id]['RDF:li'].len:: 9
    &amp;lt;type 'list'&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href="https://github.com/martinblech/xmltodict/issues/67"&gt;odd parse for same xml structure · Issue #67 · martinblech/xmltodict&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="4h"&gt;4H 折腾明白了:&lt;a class="headerlink" href="#4h" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python scraptools/zq_chk4scrap.py reDevRel/
/Users/zoomq/mnt/快盘/zScrapBook/reDevRel/scrapbook.rdf
&lt;span class="o"&gt;[&lt;/span&gt;u&lt;span class="s1"&gt;'RDF:RDF'&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
RDF:Seq         &lt;span class="m"&gt;579&lt;/span&gt;
RDF:Description     &lt;span class="m"&gt;24190&lt;/span&gt;
NC:BookmarkSeparator    &lt;span class="m"&gt;57&lt;/span&gt;
&amp;lt;open file &lt;span class="s1"&gt;'_chaos/scraotools_reDevRel.pkl'&lt;/span&gt;, mode &lt;span class="s1"&gt;'wb'&lt;/span&gt; at 0x10f17a660&amp;gt;
        exp_level_idx&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;17073&lt;/span&gt;.48084 ms

_chaos/scraotools_reDevRel.pkl
RDF:ROOT            &lt;span class="m"&gt;13&lt;/span&gt;
RDF:Seq         &lt;span class="m"&gt;578&lt;/span&gt;
RDF:Description     &lt;span class="m"&gt;24190&lt;/span&gt;
NC:BookmarkSeparator    &lt;span class="m"&gt;57&lt;/span&gt;
        _load_pkl&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;7872&lt;/span&gt;.95103 ms

     _RIGHT_NODES: &lt;span class="m"&gt;6926&lt;/span&gt;
     RIGHT_NODES: &lt;span class="m"&gt;3631&lt;/span&gt;
        re_xmltodict_rdf&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;191&lt;/span&gt;.21003 ms
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;有这么多垃圾!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;24190 vs 3631 !!!!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;但是,居然无法一次性清理干净?!&lt;/p&gt;
&lt;p&gt;一扫::&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python scraptools/zq_chk4scrap.py reDevRel/
/Users/zoomq/mnt/快盘/zScrapBook/reDevRel/scrapbook.rdf
&lt;span class="o"&gt;[&lt;/span&gt;u&lt;span class="s1"&gt;'RDF:RDF'&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
RDF:Seq         &lt;span class="m"&gt;579&lt;/span&gt;
RDF:Description     &lt;span class="m"&gt;24190&lt;/span&gt;
NC:BookmarkSeparator    &lt;span class="m"&gt;57&lt;/span&gt;
&amp;lt;open file &lt;span class="s1"&gt;'_chaos/scraotools_reDevRel.pkl'&lt;/span&gt;, mode &lt;span class="s1"&gt;'wb'&lt;/span&gt; at 0x10f2376f0&amp;gt;
        exp_level_idx&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;17013&lt;/span&gt;.92913 ms

     _RIGHT_NODES: &lt;span class="m"&gt;6926&lt;/span&gt;
     RIGHT_NODES: &lt;span class="m"&gt;3631&lt;/span&gt;
clean notes:    &lt;span class="m"&gt;11153&lt;/span&gt;
cleanned DESC:  &lt;span class="m"&gt;13037&lt;/span&gt;
&amp;lt;open file &lt;span class="s1"&gt;'_chaos/scraotools_reDevRel.pkl'&lt;/span&gt;, mode &lt;span class="s1"&gt;'wb'&lt;/span&gt; at 0x10eecff60&amp;gt;
_chaos/scrapbook_reDevRel.rdf
        re_xmltodict_rdf&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;131239&lt;/span&gt;.34913 ms
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;2扫:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python scraptools/zq_chk4scrap.py reDevRel/
_chaos/scraotools_reDevRel.pkl
RDF:ROOT    &lt;span class="m"&gt;13&lt;/span&gt;
RDF:Seq         &lt;span class="m"&gt;578&lt;/span&gt;
RDF:Description     &lt;span class="m"&gt;13037&lt;/span&gt;
NC:BookmarkSeparator    &lt;span class="m"&gt;57&lt;/span&gt;
        _load_pkl&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;4292&lt;/span&gt;.33599 ms

     _RIGHT_NODES: &lt;span class="m"&gt;6926&lt;/span&gt;
     RIGHT_NODES: &lt;span class="m"&gt;3631&lt;/span&gt;
clean notes:    &lt;span class="m"&gt;5506&lt;/span&gt;
cleanned DESC:  &lt;span class="m"&gt;7531&lt;/span&gt;
&amp;lt;open file &lt;span class="s1"&gt;'_chaos/scraotools_reDevRel.pkl'&lt;/span&gt;, mode &lt;span class="s1"&gt;'wb'&lt;/span&gt; at 0x108874f60&amp;gt;
_chaos/scrapbook_reDevRel.rdf
        re_xmltodict_rdf&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;44531&lt;/span&gt;.90279 ms
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;3扫::&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python scraptools/zq_chk4scrap.py reDevRel/
_chaos/scraotools_reDevRel.pkl
RDF:ROOT    &lt;span class="m"&gt;13&lt;/span&gt;
RDF:Seq         &lt;span class="m"&gt;578&lt;/span&gt;
RDF:Description     &lt;span class="m"&gt;7531&lt;/span&gt;
NC:BookmarkSeparator    &lt;span class="m"&gt;57&lt;/span&gt;
        _load_pkl&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;3115&lt;/span&gt;.18502 ms

     _RIGHT_NODES: &lt;span class="m"&gt;6926&lt;/span&gt;
     RIGHT_NODES: &lt;span class="m"&gt;3631&lt;/span&gt;
clean notes:    &lt;span class="m"&gt;2616&lt;/span&gt;
cleanned DESC:  &lt;span class="m"&gt;4915&lt;/span&gt;
&amp;lt;open file &lt;span class="s1"&gt;'_chaos/scraotools_reDevRel.pkl'&lt;/span&gt;, mode &lt;span class="s1"&gt;'wb'&lt;/span&gt; at 0x105d1edb0&amp;gt;
_chaos/scrapbook_reDevRel.rdf
        re_xmltodict_rdf&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;19026&lt;/span&gt;.94511 ms
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;4扫::&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python scraptools/zq_chk4scrap.py reDevRel/
_chaos/scraotools_reDevRel.pkl
RDF:ROOT    &lt;span class="m"&gt;13&lt;/span&gt;
RDF:Seq         &lt;span class="m"&gt;578&lt;/span&gt;
RDF:Description     &lt;span class="m"&gt;4915&lt;/span&gt;
NC:BookmarkSeparator    &lt;span class="m"&gt;57&lt;/span&gt;
        _load_pkl&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;2528&lt;/span&gt;.49293 ms

     _RIGHT_NODES: &lt;span class="m"&gt;6926&lt;/span&gt;
     RIGHT_NODES: &lt;span class="m"&gt;3631&lt;/span&gt;
clean notes:    &lt;span class="m"&gt;1045&lt;/span&gt;
cleanned DESC:  &lt;span class="m"&gt;3870&lt;/span&gt;
&amp;lt;open file &lt;span class="s1"&gt;'_chaos/scraotools_reDevRel.pkl'&lt;/span&gt;, mode &lt;span class="s1"&gt;'wb'&lt;/span&gt; at 0x10429ced0&amp;gt;
_chaos/scrapbook_reDevRel.rdf
        re_xmltodict_rdf&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;11538&lt;/span&gt;.43212 ms
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;5扫:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python scraptools/zq_chk4scrap.py reDevRel/
_chaos/scraotools_reDevRel.pkl
RDF:ROOT    &lt;span class="m"&gt;13&lt;/span&gt;
RDF:Seq         &lt;span class="m"&gt;578&lt;/span&gt;
RDF:Description     &lt;span class="m"&gt;3870&lt;/span&gt;
NC:BookmarkSeparator    &lt;span class="m"&gt;57&lt;/span&gt;
        _load_pkl&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;2422&lt;/span&gt;.85681 ms

     _RIGHT_NODES: &lt;span class="m"&gt;6926&lt;/span&gt;
     RIGHT_NODES: &lt;span class="m"&gt;3631&lt;/span&gt;
clean notes:    &lt;span class="m"&gt;286&lt;/span&gt;
cleanned DESC:  &lt;span class="m"&gt;3584&lt;/span&gt;
&amp;lt;open file &lt;span class="s1"&gt;'_chaos/scraotools_reDevRel.pkl'&lt;/span&gt;, mode &lt;span class="s1"&gt;'wb'&lt;/span&gt; at 0x102c5d300&amp;gt;
_chaos/scrapbook_reDevRel.rdf
        re_xmltodict_rdf&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;9368&lt;/span&gt;.47901 ms
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;6扫::&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python scraptools/zq_chk4scrap.py reDevRel/
_chaos/scraotools_reDevRel.pkl
RDF:ROOT    &lt;span class="m"&gt;13&lt;/span&gt;
RDF:Seq         &lt;span class="m"&gt;578&lt;/span&gt;
RDF:Description     &lt;span class="m"&gt;3584&lt;/span&gt;
NC:BookmarkSeparator    &lt;span class="m"&gt;57&lt;/span&gt;
        _load_pkl&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;2225&lt;/span&gt;.17014 ms

     _RIGHT_NODES: &lt;span class="m"&gt;6926&lt;/span&gt;
     RIGHT_NODES: &lt;span class="m"&gt;3631&lt;/span&gt;
clean notes:    &lt;span class="m"&gt;10&lt;/span&gt;
cleanned DESC:  &lt;span class="m"&gt;3574&lt;/span&gt;
&amp;lt;open file &lt;span class="s1"&gt;'_chaos/scraotools_reDevRel.pkl'&lt;/span&gt;, mode &lt;span class="s1"&gt;'wb'&lt;/span&gt; at 0x102c2af60&amp;gt;
_chaos/scrapbook_reDevRel.rdf
        re_xmltodict_rdf&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;8464&lt;/span&gt;.92100 ms
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;7扫:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python scraptools/zq_chk4scrap.py reDevRel/
_chaos/scraotools_reDevRel.pkl
RDF:ROOT    &lt;span class="m"&gt;13&lt;/span&gt;
RDF:Seq         &lt;span class="m"&gt;578&lt;/span&gt;
RDF:Description     &lt;span class="m"&gt;3574&lt;/span&gt;
NC:BookmarkSeparator    &lt;span class="m"&gt;57&lt;/span&gt;
        _load_pkl&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;2317&lt;/span&gt;.77310 ms

     _RIGHT_NODES: &lt;span class="m"&gt;6926&lt;/span&gt;
     RIGHT_NODES: &lt;span class="m"&gt;3631&lt;/span&gt;
clean notes:    &lt;span class="m"&gt;0&lt;/span&gt;
cleanned DESC:  &lt;span class="m"&gt;3574&lt;/span&gt;
&amp;lt;open file &lt;span class="s1"&gt;'_chaos/scraotools_reDevRel.pkl'&lt;/span&gt;, mode &lt;span class="s1"&gt;'wb'&lt;/span&gt; at 0x1021b3030&amp;gt;
_chaos/scrapbook_reDevRel.rdf
        re_xmltodict_rdf&lt;span class="o"&gt;()&lt;/span&gt; RUNed~ &lt;span class="m"&gt;8694&lt;/span&gt;.52500 ms
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="2"&gt;2小时 目录对比&lt;a class="headerlink" href="#2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;sh-&amp;gt;ls 出来时,&lt;/p&gt;
&lt;p&gt;是 &lt;span class="caps"&gt;STDOUT&lt;/span&gt; 有隐藏字符! 兰色…居然没有意识到!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;20041214101930&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;type&lt;/span&gt; &lt;span class="s1"&gt;'str'&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;Traceback&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;most&lt;/span&gt; &lt;span class="nt"&gt;recent&lt;/span&gt; &lt;span class="nt"&gt;call&lt;/span&gt; &lt;span class="nt"&gt;last&lt;/span&gt;&lt;span class="o"&gt;):&lt;/span&gt;
  &lt;span class="nt"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;"scraptools/zq_chk4scrap.py"&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;724&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;in&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;module&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;mv_chaos_data&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;REPO_NAME&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;XRDF&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
  &lt;span class="nt"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;"scraptools/zq_chk4scrap.py"&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;line&lt;/span&gt; &lt;span class="nt"&gt;524&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;in&lt;/span&gt; &lt;span class="nt"&gt;mv_chaos_data&lt;/span&gt;
    &lt;span class="nt"&gt;print&lt;/span&gt; &lt;span class="nt"&gt;len&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;li&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;strip&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="nt"&gt;ValueError&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;invalid&lt;/span&gt; &lt;span class="nt"&gt;literal&lt;/span&gt; &lt;span class="nt"&gt;for&lt;/span&gt; &lt;span class="nt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="nt"&gt;with&lt;/span&gt; &lt;span class="nt"&gt;base&lt;/span&gt; &lt;span class="nt"&gt;10&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="err"&gt;'\&lt;/span&gt;&lt;span class="nt"&gt;x1b&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nx"&gt;m&lt;/span&gt;&lt;span class="o"&gt;\&lt;/span&gt;&lt;span class="nx"&gt;x1b&lt;/span&gt;&lt;span class="err"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="nx"&gt;m20041214101930&lt;/span&gt;&lt;span class="o"&gt;\&lt;/span&gt;&lt;span class="nx"&gt;x1b&lt;/span&gt;&lt;span class="err"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;39&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="mi"&gt;49&lt;/span&gt;&lt;span class="nx"&gt;m&lt;/span&gt;&lt;span class="o"&gt;\&lt;/span&gt;&lt;span class="nx"&gt;x1b&lt;/span&gt;&lt;span class="err"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="nx"&gt;m&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="140710-1804"&gt;140710 18:04&lt;a class="headerlink" href="#140710-1804" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;完成初步完备流程:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;从原始 scrapbook.rdf 读入为 Py 对象&lt;/li&gt;
&lt;li&gt;模拟肉眼巡查, walk 出显示的合法内容数据集&lt;/li&gt;
&lt;li&gt;加入其它辅助&lt;span class="caps"&gt;KV&lt;/span&gt; 节点,写为中间工作 .pkl&lt;/li&gt;
&lt;li&gt;加载 工作 .pkl 到内存&lt;/li&gt;
&lt;li&gt;对比原始 .rdf 数据中的节点和 walk 出来有效的,逐一清除无效的&lt;ul&gt;
&lt;li&gt;必须,尝试多次,直到清除干净&lt;/li&gt;
&lt;li&gt;为毛…?&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;对比实际目录和有效节点&lt;span class="caps"&gt;ID&lt;/span&gt; 的关系,将无效的,mv 到其它目录完成净化&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="todo"&gt;&lt;span class="caps"&gt;TODO&lt;/span&gt;&lt;a class="headerlink" href="#todo" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;解决反复清查的问题&lt;/li&gt;
&lt;li&gt;提高效率&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ du -hs *
&lt;span class="m"&gt;5&lt;/span&gt;.1G    ZqDevRel
950M    reDevRel
    &lt;span class="m"&gt;5&lt;/span&gt;.2G    zqCoder
    &lt;span class="m"&gt;4&lt;/span&gt;.9G    zqSMM
&lt;span class="m"&gt;8&lt;/span&gt;.0M    _chaos
&lt;span class="m"&gt;4&lt;/span&gt;.2G    _stuff

&lt;span class="m"&gt;6&lt;/span&gt;.5G    ZqFLOSS
    &lt;span class="m"&gt;5&lt;/span&gt;.2G    zqDevRes
    &lt;span class="m"&gt;5&lt;/span&gt;.2G    zqPythonic
    &lt;span class="m"&gt;5&lt;/span&gt;.3G    zqSCM
&lt;span class="m"&gt;3&lt;/span&gt;.7G    ZqSKM
&lt;/pre&gt;&lt;/div&gt;</content><category term="scrapbook"></category><category term="python"></category><category term="howto"></category><category term="mavericks"></category></entry><entry><title>pydata笔记:环境配置</title><link href="http://blog.zoomquiet.io/pydata-0-mavericks.html" rel="alternate"></link><published>2014-06-03T00:00:00+08:00</published><updated>2014-06-03T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2014-06-03:/pydata-0-mavericks.html</id><summary type="html">
&lt;h2 id="_1"&gt;背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;img alt="s27157694.jpg（JPEG 图像，300x300 像素）" src="http://img3.douban.com/lpic/s27157694.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://book.douban.com/subject/25779298/"&gt;利用Python进行数据分析&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;是本好书…&lt;/p&gt;
&lt;p&gt;为什么知道这书呢? 因为翻译 &lt;a href="http://weekly.pychina.org/"&gt;|蠎周刊 |汇集全球蠎事儿 !-)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;经常见到各种 Pandas 配合其它纯Python 模块折腾出来的大数据可视化分析作品/文章,
而且从 &lt;a href="http://book.douban.com/subject/7175280/"&gt;Python科学计算 (豆瓣)&lt;/a&gt; 中很早
也知道了各种 Python 在数据分析方面的方便, 所以,一直想有机会能实战性的系统折腾一下…&lt;/p&gt;
&lt;p&gt;这书当然注意到了,虽然不是 &lt;span class="caps"&gt;OBP&lt;/span&gt; 项目组织翻译的, 但是,好书就是好书,有点小贵,&lt;/p&gt;
&lt;p&gt;最近有了台 &lt;span class="caps"&gt;GALAXY&lt;/span&gt; &lt;span class="caps"&gt;TAB3&lt;/span&gt;, 所以,能上 Kindle 了,于是,发现 z.cn 上电子书有了,
响应 @老赵的号召,立即收入!&lt;/p&gt;
&lt;h2 id="_2"&gt;探索&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;正如,Python 所有领域的自学,有一个稳定,随时有反馈的环境是最重要的…&lt;/p&gt;
&lt;p&gt;但是 …&lt;/p&gt;</summary><content type="html">
&lt;h2 id="_1"&gt;背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;img alt="s27157694.jpg（JPEG 图像，300x300 像素）" src="http://img3.douban.com/lpic/s27157694.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://book.douban.com/subject/25779298/"&gt;利用Python进行数据分析&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;是本好书…&lt;/p&gt;
&lt;p&gt;为什么知道这书呢? 因为翻译 &lt;a href="http://weekly.pychina.org/"&gt;|蠎周刊 |汇集全球蠎事儿 !-)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;经常见到各种 Pandas 配合其它纯Python 模块折腾出来的大数据可视化分析作品/文章,
而且从 &lt;a href="http://book.douban.com/subject/7175280/"&gt;Python科学计算 (豆瓣)&lt;/a&gt; 中很早
也知道了各种 Python 在数据分析方面的方便, 所以,一直想有机会能实战性的系统折腾一下…&lt;/p&gt;
&lt;p&gt;这书当然注意到了,虽然不是 &lt;span class="caps"&gt;OBP&lt;/span&gt; 项目组织翻译的, 但是,好书就是好书,有点小贵,&lt;/p&gt;
&lt;p&gt;最近有了台 &lt;span class="caps"&gt;GALAXY&lt;/span&gt; &lt;span class="caps"&gt;TAB3&lt;/span&gt;, 所以,能上 Kindle 了,于是,发现 z.cn 上电子书有了,
响应 @老赵的号召,立即收入!&lt;/p&gt;
&lt;h2 id="_2"&gt;探索&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;正如,Python 所有领域的自学,有一个稳定,随时有反馈的环境是最重要的…&lt;/p&gt;
&lt;p&gt;但是,作者的话,真心不能都相信哪!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;...如果你恰好使用 Python 3.2 大部分示例是可以完整运行的
...
MAC OS X 环境推荐安装 epd_free-7.3-2-macosx-i386.dmg
...
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;于是…&lt;/p&gt;
&lt;h3 id="pyenv"&gt;pyenv&lt;a class="headerlink" href="#pyenv" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;先尝试 Python 3.2 环境:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;$ pyenv install 3.2&lt;/code&gt; 成功&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ pyenv virtualenv --distribute 3.2 32IPy&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ pyenc local 32IPy2&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ pip install ipython&lt;/code&gt;,成功&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ pip install pandas&lt;/code&gt;, 失败&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;然后回到书中作者的 2.7.3 环境,重新尝试&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一样败在 &lt;code&gt;$ pip install pandas&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;宏大的 &lt;code&gt;Matplotlib&lt;/code&gt; 手工安装成功了的哪….&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="epd-free"&gt;&lt;span class="caps"&gt;EPD&lt;/span&gt; free&lt;a class="headerlink" href="#epd-free" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;好吧,看来数据分析的系列模块也不是那么简单可以安装的, 所以,&lt;/p&gt;
&lt;p&gt;&lt;a href="https://enthought.com/products/epd/free/"&gt;Enthought Python Distribution Free&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;嗯嗯嗯? &lt;/p&gt;
&lt;p&gt;&lt;img alt="canopy-logo" src="https://enthought.com/static/img/canopy-logo.png"/&gt;&lt;/p&gt;
&lt;p&gt;什么东西,不是说 &lt;code&gt;EPD free&lt;/code&gt; 嘛?&lt;/p&gt;
&lt;p&gt;直接搜索:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;epd_free-7.3-2-macosx-i386.dmg&lt;/li&gt;
&lt;li&gt;果断还有: &lt;a href="https://enthought.com/repo/free/"&gt;Index of /repo/free&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;果断下载,安装…&lt;/p&gt;
&lt;p&gt;各种不对味儿,原来自动在 &lt;code&gt;~/.bash_profile&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Setting PATH for EPD_free-7.3-2
# The orginal version is saved in .bash_profile.pysave
PATH="/Library/Frameworks/Python.framework/Versions/Current/bin:&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;PATH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;"
export PATH
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;而且是按照系统框架来安装到 &lt;code&gt;/Library/Frameworks/Python.framework&lt;/code&gt; 的
可是, Mavericks 以后,没有默认Python 了哪,俺已经同时用 &lt;code&gt;brew&lt;/code&gt; 管理系统 Python,
&lt;code&gt;pyenv&lt;/code&gt; 管理开发 Python ,先不说体积:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ du -hs /Library/Frameworks/Python.framework/Versions
425M    /Library/Frameworks/Python.framework/Versions
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;居然第一个案例就跑不起来!&lt;/p&gt;
&lt;p&gt;&lt;code&gt;import pandas&lt;/code&gt; 有报错…&lt;/p&gt;
&lt;h3 id="canopy"&gt;Canopy&lt;a class="headerlink" href="#canopy" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;回到官方下载: &lt;a href="https://enthought.com/store/"&gt;Enthought Store&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;老老实实的下载推荐的 &lt;code&gt;canopy-1.4.0-osx-64.dmg&lt;/code&gt;
体积也从 74M 爆涨为 &lt;code&gt;235Mb&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;不过,是一派标准的 &lt;span class="caps"&gt;MAC&lt;/span&gt; 软件包了,非常流畅,也有&lt;span class="caps"&gt;GUI&lt;/span&gt; 的引导界面,&lt;/p&gt;
&lt;p&gt;然后 &lt;code&gt;~/.bash_profile&lt;/code&gt; 追加的是:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Added by Canopy installer on 2014-06-03
# VIRTUAL_ENV_DISABLE_PROMPT can be set to '' to make bashprompt show that Canopy is active, otherwise 1
VIRTUAL_ENV_DISABLE_PROMPT=1 source \ 
/Users/zoomq/Library/Enthought/Canopy_64bit/User/bin/activate
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;那就简单了,使用标准的 &lt;code&gt;VirtualEnv&lt;/code&gt; 来包装的话,就不用将系统Python 环境永久性的迁移为
&lt;code&gt;Canopy&lt;/code&gt; 的了,&lt;/p&gt;
&lt;p&gt;简单的 在 &lt;code&gt;~/.bashrc&lt;/code&gt; 定义一个别称:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Added by Canopy installer on 2014-06-03
alias canopy="source \
/Users/zoomq/Library/Enthought/Canopy_64bit/User/bin/activate"
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;随时调用 &lt;code&gt;canopy&lt;/code&gt; 就可以进入了..&lt;/p&gt;
&lt;h2 id="_3"&gt;结论&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;最终拥有了和书中有一致反应的环境:&lt;/p&gt;
&lt;p&gt;&lt;img alt="140604-pydata-canopy.png" src="http://zoomq.qiniudn.com/ZQCollection/snap/140604-pydata-canopy.png"/&gt;&lt;/p&gt;
&lt;p&gt;参考:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://stackoverflow.com/questions/3819449/how-to-uninstall-python-2-7-on-a-mac-os-x-10-6-4"&gt;osx - How to uninstall Python 2.7 on a Mac &lt;span class="caps"&gt;OS&lt;/span&gt; X 10.6.4? - Stack Overflow&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;sudo rm -rf /Library/Frameworks/Python.framework/Versions/2.7&lt;/li&gt;
&lt;li&gt;sudo rm -rf “/Applications/Python 2.7”&lt;/li&gt;
&lt;li&gt;remove the symbolic links in /usr/local/bin that point to this python version see ls -l /usr/local/bin&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://docs.python-guide.org/en/latest/starting/install/osx/"&gt;Installing Python on Mac &lt;span class="caps"&gt;OS&lt;/span&gt; X — The Hitchhiker’s Guide to Python&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://wolfpaulus.com/jounal/mac/installing_python_osx/"&gt;Installing / Updating Python on &lt;span class="caps"&gt;OS&lt;/span&gt; X | Wolf Paulus&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://gist.github.com/goldsmith/7163055"&gt;When I upgraded my Mac to &lt;span class="caps"&gt;OS&lt;/span&gt; X Mavericks, a lot of utilities (like Python, virtualenv, Xcode) broke, and it was pretty stressful trying to get it all set back up. Hopefully this guide can spare you some of that pain.Note: I’m by no means a Linux or Mac ex&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Mavericks 对 Python 框架的调整,也的确有其原由的…&lt;/p&gt;
&lt;p&gt;当然,好书要配合好代码,&lt;/p&gt;
&lt;p&gt;及时 fork 一个自个儿可以折腾的: &lt;a href="https://github.com/OpenBookProjects/pydata-book"&gt;OpenBookProjects/pydata-book&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="changelog"&gt;Changelog&lt;a class="headerlink" href="#changelog" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;140603 完成环境探索,总结&lt;/li&gt;
&lt;li&gt;140527 &lt;a href="http://www.amazon.cn/gp/product/B00KD7Q7U2/ref=oh_d__o00_details_o00__i00?ie=UTF8&amp;amp;psc=1"&gt;《利用Python进行数据分析》 Wes McKinney, 唐学韬 (Kindle电子书)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="pandas"></category><category term="ipython"></category><category term="pydata"></category><category term="mavericks"></category></entry><entry><title>如何自在的折腾QPy</title><link href="http://blog.zoomquiet.io/init-my-qpy-env.html" rel="alternate"></link><published>2014-01-26T12:42:00+08:00</published><updated>2014-01-26T12:42:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2014-01-26:/init-my-qpy-env.html</id><summary type="html">
&lt;h2 id="_1"&gt;背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;QPython 知道有两年了,是看 &lt;a href="http://book.douban.com/subject/10561367/"&gt;Head First Python（中文版） (豆瓣)&lt;/a&gt; 时,发现竟然有 
&lt;a href="http://code.google.com/p/android-scripting/"&gt;&lt;span class="caps"&gt;SL4A&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这种神器! Google 果断是业界良心哪,
可惜: 从&lt;a href="http://code.google.com/p/android-scripting/downloads/list"&gt;Downloads&lt;/a&gt;
可以看出 ,已经停止有一年多了,目测是 Guido 叔离开后, Python 的地位在 Google 一落千丈就没有人折腾了.&lt;/p&gt;
&lt;p&gt;好在旧浪两位同事, River和&lt;span class="caps"&gt;CF&lt;/span&gt; 掿起了 &lt;span class="caps"&gt;SL4A&lt;/span&gt; 的旗帜, 变成了一系列准衶器:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://play.google.com/store/apps/details?id=com.hipipal.qpyplus"&gt;QPython - Python for Android - Google Play 上的 Andr​​oid 应用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://play.google.com/store/apps/details?id=com.hipipal.qpy3"&gt;QPython 3 - Python3 on Android - Google …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">
&lt;h2 id="_1"&gt;背景&lt;a class="headerlink" href="#_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;QPython 知道有两年了,是看 &lt;a href="http://book.douban.com/subject/10561367/"&gt;Head First Python（中文版） (豆瓣)&lt;/a&gt; 时,发现竟然有 
&lt;a href="http://code.google.com/p/android-scripting/"&gt;&lt;span class="caps"&gt;SL4A&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这种神器! Google 果断是业界良心哪,
可惜: 从&lt;a href="http://code.google.com/p/android-scripting/downloads/list"&gt;Downloads&lt;/a&gt;
可以看出 ,已经停止有一年多了,目测是 Guido 叔离开后, Python 的地位在 Google 一落千丈就没有人折腾了.&lt;/p&gt;
&lt;p&gt;好在旧浪两位同事, River和&lt;span class="caps"&gt;CF&lt;/span&gt; 掿起了 &lt;span class="caps"&gt;SL4A&lt;/span&gt; 的旗帜, 变成了一系列准衶器:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://play.google.com/store/apps/details?id=com.hipipal.qpyplus"&gt;QPython - Python for Android - Google Play 上的 Andr​​oid 应用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://play.google.com/store/apps/details?id=com.hipipal.qpy3"&gt;QPython 3 - Python3 on Android - Google Play 上的 Andr​​oid 应用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://play.google.com/store/apps/details?id=com.hipipal.qpy"&gt;QPython Player for Android - Google Play 上的 Andr​​oid 应用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://play.google.com/store/apps/details?id=com.hipipal.texteditor"&gt;QEdit - Code Editor in Pocket - Google Play 上的 Andr​​oid 应用&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;目标直指所谓的内什么,,,&lt;/p&gt;
&lt;p&gt;而且,目测已经有国家高等教育项目中,
直接使用了 &lt;code&gt;QPython&lt;/code&gt; 来作教学环境!&lt;/p&gt;
&lt;p&gt;所以,果断要跟上用起来,,,&lt;/p&gt;
&lt;p&gt;参考:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.appannie.com/apps/amazon-appstore/top/china/education/"&gt;App Annie 的应用商店数据|Amazon排行榜中国 - Education - 2014年1月27日&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.douban.com/group/topic/17095466/"&gt;让Python在Android系统上飞一会儿:第一节 在手机上…&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_2"&gt;目标&lt;a class="headerlink" href="#_2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;哪,俺是 Pythoneer ,不是 &lt;span class="caps"&gt;JAVA&lt;/span&gt; 党,
更加是 &lt;code&gt;IDE 去死去死团&lt;/code&gt; 的骨灰成员.&lt;/p&gt;
&lt;p&gt;很辛苦的攒銭搞到了 
&lt;a href="http://news.mynavi.jp/news/2013/02/07/051/index.html"&gt;&lt;span class="caps"&gt;FILCO&lt;/span&gt; Majestouch &lt;span class="caps"&gt;MINILA&lt;/span&gt;&lt;/a&gt;
青轴!
绝对不要回到 &lt;code&gt;一指禅&lt;/code&gt; 的时代哪!!!&lt;/p&gt;
&lt;p&gt;所以,俺要用 QPython 就是用来快速进行实用mini 应用的,
而且, 期待的开发流程, 应该完全类似现在的 web server 开发流程:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;本地用喜爱的编辑环境进行代码撰写 (&lt;a href="http://www.sublimetext.com"&gt;Sublime Text 2&lt;/a&gt;, &lt;a href="http://leoeditor.com/"&gt;Leo&lt;/a&gt;, etc.)&lt;/li&gt;
&lt;li&gt;一键上传手机,并自动运行&lt;/li&gt;
&lt;li&gt;在手机上真实操作,同时有远程日志可以实时观察,确认问题&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;以上循环&lt;/p&gt;
&lt;h2 id="_3"&gt;环境准入&lt;a class="headerlink" href="#_3" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;对了,以下记述充斥了各种非科普性描述, 为了误入的小伙伴不被意外恶心到,得交待一下适合继续阅读的条件:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;42 个月, Linux/Unix 系统使用~注意!是使用不是管理体验;不然各种标准的命令行操作要死人的,,&lt;/li&gt;
&lt;li&gt;42 周的, 编程体验,不许什么語言,就是 &lt;span class="caps"&gt;JS&lt;/span&gt; 也成,起码要有一丝码感,,,&lt;/li&gt;
&lt;li&gt;42 次的, 蕃茄工作时间 的经历,至少知道什么是” &lt;a href="http://book.douban.com/reading/12671922/"&gt;心流&lt;/a&gt;“般的专注!&lt;/li&gt;
&lt;li&gt;42 天的, 相关资料通读,相关社区的加入/旁听,,,一定要摸清楚相关主要开发人员的沟通习惯 ;-)&lt;/li&gt;
&lt;li&gt;42 小时, 的周边环境整备,熟悉工作系统以及配置好顺手的工具(git/apt/yum/brew …)&lt;/li&gt;
&lt;li&gt;42 分钟, 当前的空闲时间,能够专注以下描述,不会片面的抽取文字就来吼俺 &lt;code&gt;图样图森破&lt;/code&gt; 什么的..&lt;/li&gt;
&lt;li&gt;42 秒, 明确以上条件 &lt;code&gt;42%&lt;/code&gt; 吻合,即可继续 ;-)&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="_4"&gt;硬件&lt;a class="headerlink" href="#_4" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;手机: 电信协议 三星 Note2 &lt;span class="caps"&gt;N7108ZMDMF1&lt;/span&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Android 4.1.1 &lt;span class="caps"&gt;JRO03C&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;刷的是 &lt;span class="caps"&gt;MIUI&lt;/span&gt;-3.3.15 野生版&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;CPU&lt;/span&gt; 四核 1.6GHz&lt;/li&gt;
&lt;li&gt;内存 2G&lt;/li&gt;
&lt;li&gt;存储 16G&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;主机: &lt;span class="caps"&gt;MBP&lt;/span&gt; 12下半年版 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;OS&lt;/span&gt; X 10.9.1&lt;/li&gt;
&lt;li&gt;Core i7 2.2GHz&lt;/li&gt;
&lt;li&gt;8G 内存&lt;/li&gt;
&lt;li&gt;500G 机械硬盘&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;湿件: 30++++++++++岁老程序猿&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;180,180,180,,,&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;ASP&lt;/span&gt;,Basic,C,C++,Clojure,Erlang,Forth,Factor,Go,Haskell,&lt;span class="caps"&gt;JS&lt;/span&gt;,&lt;span class="caps"&gt;JAVA&lt;/span&gt;,Lisp,Node,&lt;span class="caps"&gt;PHP&lt;/span&gt;,Python,Pascal,&lt;span class="caps"&gt;XSLT&lt;/span&gt;,&lt;span class="caps"&gt;REBOL&lt;/span&gt;,Rust,,,少量经验&lt;/li&gt;
&lt;li&gt;精通26字母, Cnglish 熟练&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_5"&gt;探索&lt;a class="headerlink" href="#_5" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;根据策划的流程,在原作者的帮助下,进行了高强度的折腾,
经过连续 27 小时探索,基本爽了起来:&lt;/p&gt;
&lt;h3 id="_6"&gt;上传&lt;a class="headerlink" href="#_6" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Android 呢,就是 Linux 哪,当然应该用 &lt;code&gt;scp&lt;/code&gt; 安全上传了!&lt;/p&gt;
&lt;p&gt;目测,要依次解决:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;手机上的 &lt;code&gt;SSH&lt;/code&gt; 守护在哪儿,怎么启动&lt;/li&gt;
&lt;li&gt;脚本应该上传到哪儿 QPython 才能识别?&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="ssh"&gt;&lt;span class="caps"&gt;SSH&lt;/span&gt;&lt;a class="headerlink" href="#ssh" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;搜索就有:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://gailly.net/android/android-tips.html"&gt;Android tips&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.linuxplanet.com/linuxplanet/reviews/7301/1"&gt;10 Android Apps for Linux Server Admins - ConnectBot, QuickSSHd, SwiFTP, AndFTP, Wyse PocketCloud - Reviews - LinuxPlanet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://my.oschina.net/winHerson/blog/84716"&gt;SSHDroid（&lt;span class="caps"&gt;SSH&lt;/span&gt; Server for Android）通过&lt;span class="caps"&gt;PC&lt;/span&gt;或命令连接android - bugeasy - 开源中国社区&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;经过快速的尝试,
明确 &lt;code&gt;SSHDroid&lt;/code&gt; 最简洁可用, 那就上:&lt;/p&gt;
&lt;p&gt;&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140127-qpy-sshdroid.jpg"/&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;安装,配置都没有什么可说的&lt;/li&gt;
&lt;li&gt;只是,非专业版,只能用口令登录,先忍着&lt;/li&gt;
&lt;li&gt;扩展一点点儿从 &lt;a href="http://onetimeblog.logdown.com/posts/2014/01/23/first-program-in-qpython"&gt;Hello, QPython! « one-time blog&lt;/a&gt; 来的代码,成 &lt;code&gt;hollo.py&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;androidhelper&lt;/span&gt;
&lt;span class="n"&gt;droid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;androidhelper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Android&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;droid&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;makeToast&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;u&lt;/span&gt;&lt;span class="s1"&gt;'Hello, Username!是也乎 ;-)'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;上传到哪儿呢?!&lt;/p&gt;
&lt;p&gt;快速翻找一下,明确几个关键路径:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SSHDroid&lt;/code&gt;起始可写根:&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;/data/data/berserker.android.apps.sshdroid/home/&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;即: &lt;code&gt;cd ~&lt;/code&gt; 回到的目录&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QPython 环境分:&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;只读执行文件起点 &lt;code&gt;/data/data/com.hipipal.qpyplus/files/bin/&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;可写资源起点以及目录意义:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/storage/sdcard0/com.hipipal.qpyplus/
    +- cache         
    +- lib        各Python版本的库安装入口 
    +- projects   俺的QPy 项目入口
    +- scripts    俺的QPy 脚本入口
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="busybox"&gt;BusyBox&lt;a class="headerlink" href="#busybox" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;等等! &lt;span class="caps"&gt;SSH&lt;/span&gt; 上来后,各种不适应,这什么 shell 环境哪,连 &lt;code&gt;less&lt;/code&gt;, &lt;code&gt;tail&lt;/code&gt;, &lt;code&gt;vi&lt;/code&gt; 都没有
好意思说自个儿是 &lt;code&gt;Linux&lt;/code&gt; 嘛?!&lt;/p&gt;
&lt;p&gt;搜索才知道,这货叫 &lt;code&gt;ash&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;躲在 &lt;code&gt;/system/bin/sh&lt;/code&gt; 基本上什么也不会作&lt;/li&gt;
&lt;li&gt;所以,程序猿有 &lt;a href="http://www.busybox.net/"&gt;BusyBox&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;一安装,批量将大堆习惯的工具,灌到 &lt;code&gt;system/xbin/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-busybox-tail.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;这样,才能远程观察, QPython 项目目录中,
若隐若现的 &lt;code&gt;.run.log&lt;/code&gt; 明显发生什么问题, 快速增补一行:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;androidhelper&lt;/span&gt;
&lt;span class="n"&gt;droid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;androidhelper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Android&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;droid&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;makeToast&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;u&lt;/span&gt;&lt;span class="s1"&gt;'Hello, Username!是也乎 ;-)'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;就能运行成功,跳出最简单的发布公告框了!&lt;/p&gt;
&lt;p&gt;&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-hollo.jpg"/&gt;&lt;/p&gt;
&lt;h3 id="_7"&gt;运行&lt;a class="headerlink" href="#_7" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;好了,进入下一个阶段: &lt;code&gt;怎么让 QPyhon 如系统命令一样在 ash 环境中调用我们的脚本?&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;目测,要依次解决:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ash 环境变量是否兼容 QPython?&lt;/li&gt;
&lt;li&gt;ash 环境变量如果不兼容 QPython 怎么配置?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;将刚刚测试明确可用的脚本从 shell 环境中调用一下:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# cd /storage/sdcard0/com.hipipal.qpyplus/projects/chaos/ &lt;/span&gt;
&lt;span class="c1"&gt;# /data/data/com.hipipal.qpyplus/files/bin/python hollo.py&lt;/span&gt;

Could not find platform independent libraries &amp;lt;prefix&amp;gt;
Consider setting &lt;span class="nv"&gt;$PYTHONHOME&lt;/span&gt; to &amp;lt;prefix&amp;gt;&lt;span class="o"&gt;[&lt;/span&gt;:&amp;lt;exec_prefix&amp;gt;&lt;span class="o"&gt;]&lt;/span&gt;
ImportError: No module named site
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;果断没有那么简单, 检查一下系统环境:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;_&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/system/xbin/env
&lt;span class="nv"&gt;RANDOM&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;25396&lt;/span&gt;
&lt;span class="nv"&gt;ANDROID_DATA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data
&lt;span class="nv"&gt;BOOTCLASSPATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/system/framework/core.jar:/system/framework/core-junit.jar:/system/framework/bouncycastle.jar:/system/framework/ext.jar:/system/framework/framework.jar:/system/framework/framework2.jar:/system/framework/android.policy.jar:/system/framework/services.jar:/system/framework/apache-xml.jar:/system/framework/sec_edm.jar:/system/framework/seccamera.jar
&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/data/berserker.android.apps.sshdroid/dropbear:/usr/bin:/usr/sbin:/bin:/sbin:/system/sbin:/system/bin:/system/xbin:/system/xbin/bb:/data/local/bin
&lt;span class="nv"&gt;ANDROID_ROOT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/system
&lt;span class="nv"&gt;USER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;root
&lt;span class="nv"&gt;LOGNAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;root
&lt;span class="nv"&gt;ANDROID_PROPERTY_WORKSPACE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;,66560
&lt;span class="nv"&gt;EXTERNAL_STORAGE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/storage/sdcard0
&lt;span class="nv"&gt;ANDROID_ASSETS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/system/app
&lt;span class="nv"&gt;SHELL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/system/bin/sh
&lt;span class="nv"&gt;TERM&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;vt100
&lt;span class="nv"&gt;SSH_TTY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/dev/pts/1
&lt;span class="nv"&gt;SSH_CONNECTION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;::ffff:192.168.0.103 &lt;span class="m"&gt;64228&lt;/span&gt; ::ffff:192.168.0.100 &lt;span class="m"&gt;22&lt;/span&gt;
&lt;span class="nv"&gt;HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/data/data/berserker.android.apps.sshdroid/home
&lt;span class="nv"&gt;ANDROID_BOOTLOGO&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;跟 Python 没一毛钱关系,怪不得跑不了;
吼了俩位爷,才知道: &lt;a href="http://wiki.qpython.org/hacker/"&gt;QPython Hackers&lt;/a&gt;
果断是依赖大堆系统环境变量的,
以往能在桌面运行起来,
也是通过 &lt;code&gt;大JAVA&lt;/code&gt; 的相关接口,临时声明的!&lt;/p&gt;
&lt;p&gt;那就好办了,照此办理:
&lt;a href="https://gist.github.com/ZoomQuiet/8642464"&gt;gen_qpy_env.py&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;注意:&lt;/code&gt; 这货一定要加载到 QPython 中,用脚本形式来跑,
如果也是从后台 shell 环境中跑,是获得不了主要关键参数的!&lt;/p&gt;
&lt;p&gt;&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-gen-profile.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;然后!? 肿么,让 shell 环境每次都能自动加载上这堆配置?&lt;/p&gt;
&lt;p&gt;综合,搜索来的相关说明:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.cnblogs.com/shyang--TechBlogs/archive/2011/10/27/2226664.html"&gt;【转】linux虚拟内核文件系统介绍 - shy.ang - 博客园&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.xdracco.net/mount-android-system-partition-with-readwrite-access/"&gt;Mount Android System Partition With Read/Rrite Access&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://gailly.net/android/android-tips.html"&gt;Android tips&lt;/a&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;经过尝试,明确这么来:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# mount -o remount,rw /dev/block/mtdblock3 /system&lt;/span&gt;
&lt;span class="c1"&gt;# ln -s /storage/sdcard0/com.hipipal.qpyplus/projects/qpy_profile /etc/profile&lt;/span&gt;
&lt;span class="c1"&gt;# mount -o remount,ro /dev/block/mtdblock3 /system&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;再关闭,重启 &lt;code&gt;SSHDroid&lt;/code&gt; 后,远程登入,测试:&lt;/p&gt;
&lt;p&gt;&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-this-zen.png"/&gt;&lt;/p&gt;
&lt;p&gt;然后,远程人工从 shell 调用&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# cd /storage/sdcard0/com.hipipal.qpyplus/projects/chaos/ &lt;/span&gt;
&lt;span class="c1"&gt;# /data/data/com.hipipal.qpyplus/files/bin/python hollo.py&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;手机无论在什么桌面,都能跳出来俺的 &lt;code&gt;hollo.py&lt;/code&gt; 运行结果:&lt;/p&gt;
&lt;p&gt;&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-console-hollo.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;然后,本地,习惯性的,就可以用 &lt;a href="http://tmux.sourceforge.net/"&gt;tmux&lt;/a&gt; 同时 观察/管理本地以及远程的开发/测试/运行情况了:&lt;/p&gt;
&lt;p&gt;&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140127-qpy-tumx.png"/&gt;&lt;/p&gt;
&lt;h4 id="beta"&gt;&lt;span class="caps"&gt;BETA&lt;/span&gt;乱入&lt;a class="headerlink" href="#beta" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;作者看俺这么努力的折腾从内部机密放送俺最新开发版本,兴奋的安装上:&lt;/p&gt;
&lt;p&gt;&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140127-qpy-new-version.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;然后,再运行…&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Traceback &lt;span class="o"&gt;(&lt;/span&gt;most recent call last&lt;span class="o"&gt;)&lt;/span&gt;:
  File &lt;span class="s2"&gt;"/storage/sdcard0/com.hipipal.qpyplus/projects/chaos/hollo.py"&lt;/span&gt;, line &lt;span class="m"&gt;3&lt;/span&gt;, in &amp;lt;module&amp;gt;
    &lt;span class="nv"&gt;droid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; androidhelper.Android&lt;span class="o"&gt;()&lt;/span&gt;
  File &lt;span class="s2"&gt;"tubelib/sl4a.py"&lt;/span&gt;, line &lt;span class="m"&gt;34&lt;/span&gt;, in __init__
    self.conn &lt;span class="o"&gt;=&lt;/span&gt; socket.create_connection&lt;span class="o"&gt;(&lt;/span&gt;addr&lt;span class="o"&gt;)&lt;/span&gt;
  File &lt;span class="s2"&gt;"/home/river/android-sdk/workplace/python-for-android/build/python-install/lib/python2.7/socket.py"&lt;/span&gt;, line &lt;span class="m"&gt;571&lt;/span&gt;, in create_connection
socket.error: &lt;span class="o"&gt;[&lt;/span&gt;Errno &lt;span class="m"&gt;111&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; Connection refused
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;/home/river/android-sdk/workplace&lt;/code&gt; 囧rz…&lt;/p&gt;
&lt;p&gt;什么东西?! 怎么超出来原作的本地目录了?!&lt;/p&gt;
&lt;p&gt;再问,才知道:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AP_HANDSHAKE=5873cf77-e70b-4887-a8b2-28b7db3c408e&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;类似 &lt;code&gt;AP_&lt;/code&gt; 前缀的系列环境变量是随发行版,每次不同的,&lt;/li&gt;
&lt;li&gt;必须匹配上,否则,系统找不到,就只能使用缓存的不知哪儿的路径了…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以,必须:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;从项目中打开脚本:
&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140127-qpy-env-proj.jpg"/&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;从 QEditor 中运行
&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140127-qpy-env-run.jpg"/&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在 console 中生成:
&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140127-qpy-env-gen-again.jpg"/&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="qpython"&gt;QPython头声明&lt;a class="headerlink" href="#qpython" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;参考: &lt;a href="http://wiki.qpython.org/doc/program_guide/#qpython-header"&gt;Programming Guide&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;脚本第一行的不同声明,将由 QPython 智能识别给予不同的运行环境,一定要理解:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#qpy:console&lt;/code&gt; , 是指运行环境为 QPython 的命令行环境&lt;/li&gt;
&lt;li&gt;&lt;code&gt;#qpy:2&lt;/code&gt; 是指运行环境为 QPython 2 的命令行环境&lt;/li&gt;
&lt;li&gt;&lt;code&gt;#qpy:3&lt;/code&gt; 是指运行环境为 QPython 3 的命令行环境&lt;/li&gt;
&lt;li&gt;没有 &lt;code&gt;#qpy:*&lt;/code&gt; 的是指基于 &lt;a href="http://kylelk.github.io/html-examples/androidhelper.html"&gt;&lt;span class="caps"&gt;SL4A&lt;/span&gt;&lt;/a&gt; 的&lt;span class="caps"&gt;GUI&lt;/span&gt; 依赖环境&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;2014 追加支持的&lt;/p&gt;
&lt;h1 id="qpywebapp"&gt;qpy:webapp:&lt;app title=""&gt;&lt;a class="headerlink" href="#qpywebapp" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/app&gt;&lt;/h1&gt;
&lt;h1 id="qpyfullscreen"&gt;qpy:fullscreen&lt;a class="headerlink" href="#qpyfullscreen" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id="qpylocalhost8080"&gt;qpy://localhost:8080&lt;a class="headerlink" href="#qpylocalhost8080" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;&lt;span class="dquo"&gt;“&lt;/span&gt;””
Launching the web service on localhost:8080 
without android titlebar (fullscreen) “”“&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_8"&gt;自动&lt;a class="headerlink" href="#_8" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;好了,进入最后一个阶段: &lt;code&gt;怎么让所有的上传-&amp;gt;配置-&amp;gt;运行-&amp;gt;日志收集 全部自动化一键完成?&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;目测,要依次解决:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;自动上传?!(怎么通过公匙的部署,来达到无口令远程登录手机?)&lt;/li&gt;
&lt;li&gt;自动运行手机端的脚本?!&lt;/li&gt;
&lt;li&gt;自动收集日志?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;问题一,参考:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://stackoverflow.com/questions/8291380/how-to-get-fabric-to-automatically-instead-of-user-interactively-interact-with/10007635#10007635"&gt;python - How to get Fabric to automatically (instead of user-interactively) interact with shell commands? Combine with pexpect? - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://ilogue.com/jasper/blog/fexpect--dealing-with-prompts-in-fabric-with-pexpect/"&gt;Fexpect adds answering to prompts to fabric with use of pexpect&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.noah.org/wiki/pexpect"&gt;pexpect - Noah.org&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;总之,对口令,没有什么好办法,大家都是通过获取反馈,匹配期待,自动输入…&lt;/p&gt;
&lt;p&gt;只是,这样折腾,很扯蛋! 用口令登录的安全隐患怎么强调都不过份!&lt;/p&gt;
&lt;p&gt;何况,通过 &lt;span class="caps"&gt;RSA&lt;/span&gt;/&lt;span class="caps"&gt;DSA&lt;/span&gt; 密匙对加密,公匙部署,自动双向加密, 安定,稳定,方便的用了多少年?!&lt;/p&gt;
&lt;p&gt;没理由在 Android 这儿栽了哪! 果断的: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;先将本地公匙用口令登录的方式推上手机&lt;/li&gt;
&lt;li&gt;然后,&lt;a href="http://zoomq.qiniudn.com/CPyUG/QPython/apk/berserker.android.apps.sshdroid-cracked-signed.apk"&gt;sshdroid-cracked.apk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;然后,就没有然后了 ;-)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;只是,唯一的问题:
- 因为 &lt;span class="caps"&gt;SSH&lt;/span&gt; 服务端切换了, 导致 &lt;span class="caps"&gt;SSH&lt;/span&gt; 认证冲突,要清除对应的配置行
- 每次都要全部清除,或是人工清除?
- 不用这么 Naive ,参考:&lt;a href="http://floss.qiniudn.com/data/20130327153058/index.html"&gt;&lt;span class="caps"&gt;SSH&lt;/span&gt; Warning: the &lt;span class="caps"&gt;RSA&lt;/span&gt; host key for differs from the key for the &lt;span class="caps"&gt;IP&lt;/span&gt; address - zhangp专栏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;一行解决:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sed -i -e ’36d’ ~/.ssh/known_hosts
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="fabric"&gt;&lt;a href="http://docs.fabfile.org/en/1.5/index.html#usage-documentation"&gt;Fabric&lt;/a&gt;&lt;a class="headerlink" href="#fabric" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;非 &lt;code&gt;C/S&lt;/code&gt; 结构的脚本化自动部署工具!&lt;/p&gt;
&lt;p&gt;嘦在本地安装好&lt;a href="http://docs.fabfile.org/en/1.5/index.html#usage-documentation"&gt;Fabric&lt;/a&gt;
再在本地工程目录中放一个 &lt;code&gt;fabfile.py&lt;/code&gt;, 就可以:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ fab ?

Warning: Command&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt; not found:
    ?

Available commands:

    env         print Android sys. env
    genenv      gen qpy need env into: /storage/sdcard0/com.hipipal.qpyplus/projects/qpy_profile
    pushproj    scp all .py into Android QPython projects dir
    qpy         main develop tools, auto upload and running in Android
    qpy_run_it  fab qpy_run_it:script&lt;span class="o"&gt;=&lt;/span&gt;MY.py
    uname       print Android sys. info.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;日常,无论折腾多少个项目,都可以统一部署此脚本到目录中,
&lt;a href="https://gist.github.com/ZoomQuiet/8645207"&gt;Fabric for QPython auto upload/running script/collect log etc… from local through &lt;span class="caps"&gt;SSH&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;只要定制一两只参数, 平时的开发流程就变成了:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;本地用喜爱的编辑环境进行代码撰写 (&lt;a href="http://www.sublimetext.com"&gt;Sublime Text 2&lt;/a&gt;, &lt;a href="http://leoeditor.com/"&gt;Leo&lt;/a&gt;, etc.)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fab qpy:script=当前调试的主脚本.py&lt;/code&gt; 一键上传手机,并自动运行&lt;/li&gt;
&lt;li&gt;在手机上真实操作,明确效果&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="_9"&gt;日志&lt;a class="headerlink" href="#_9" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;目测同最初设想的理想开发流程相比:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;1. 本地用喜爱的编辑环境进行代码撰写
2. 一键上传手机,并自动运行
3. 在手机上真实操作,同时有远程日志可以实时观察,确认问题
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;只差一个运行日志的实时观察了哪,,,&lt;/p&gt;
&lt;p&gt;本来想着很简洁的:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://tmux.sourceforge.net/"&gt;tmux&lt;/a&gt; 再多开个窗口&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tail -f /PATH/2/MY/QPY/PROJECT/.run.log&lt;/code&gt; 就完事儿的哪!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;结果,不得不提交个 Issue:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/qpython-android/QPython.org/issues/2"&gt;.run.log is odd · Issue #2 · qpython-android/QPython.org&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="_10"&gt;结论&lt;a class="headerlink" href="#_10" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;虽然, 最后集中成了一份儿 
&lt;a href="https://gist.github.com/ZoomQuiet/8645207"&gt;fabfile.py&lt;/a&gt;
脚本,但是涉及的工具还是很多的,
所以, 整体上,最终可用的组合关系是:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[[Android in mobile]]&lt;/span&gt;
    &lt;span class="na"&gt;+- /etc/profile -&amp;gt; ln -s&lt;/span&gt;
    &lt;span class="na"&gt;|                  V&lt;/span&gt;
    &lt;span class="na"&gt;|                  V&lt;/span&gt;
    &lt;span class="na"&gt;|    /storage/sdcard0/com.hipipal.qpyplus/projects/qpy_profil&lt;/span&gt;
    &lt;span class="na"&gt;|                  ^&lt;/span&gt;
    &lt;span class="na"&gt;|                  ^&lt;/span&gt;
    &lt;span class="na"&gt;+- QPython -&amp;gt; gen_qpy_env.py&lt;/span&gt;
    &lt;span class="na"&gt;|    .../projects/MyProject&lt;/span&gt;
    &lt;span class="na"&gt;|             ^&lt;/span&gt;
    &lt;span class="na"&gt;|             ^&lt;/span&gt;
    &lt;span class="na"&gt;|             ^&lt;/span&gt;
    &lt;span class="na"&gt;`- SSHDriod + id_rsa.pub&lt;/span&gt;
              &lt;span class="na"&gt;^&lt;/span&gt;
              &lt;span class="na"&gt;^   scp,and run()&lt;/span&gt;
              &lt;span class="na"&gt;^&lt;/span&gt;
        &lt;span class="na"&gt;/-&amp;gt; base fabfile.py&lt;/span&gt;
        &lt;span class="na"&gt;|&lt;/span&gt;
    &lt;span class="na"&gt;+- Fabric&lt;/span&gt;
    &lt;span class="na"&gt;+- pip&lt;/span&gt;
    &lt;span class="na"&gt;+- Python&lt;/span&gt;
    &lt;span class="na"&gt;|&lt;/span&gt;
&lt;span class="k"&gt;[[MBP in local]]&lt;/span&gt;
&lt;span class="na"&gt;all in same wifi net domain&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="todo"&gt;&lt;span class="caps"&gt;TODO&lt;/span&gt;&lt;a class="headerlink" href="#todo" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;然后, 有个比较顺心的 QPython 折腾环境了, 就可以进一步的折腾各种想玩/能玩能玩的了!&lt;/p&gt;
&lt;h3 id="pip"&gt;pip&lt;a class="headerlink" href="#pip" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;没有 pip 的世界是艰难的世界,所以,,,&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.pip-installer.org/en/latest/installing.html"&gt;Installation — pip 1.5.2 documentation&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# python get-pip.py&lt;/span&gt;
Traceback &lt;span class="o"&gt;(&lt;/span&gt;most recent call last&lt;span class="o"&gt;)&lt;/span&gt;:
  File &lt;span class="s2"&gt;"get-pip.py"&lt;/span&gt;, line &lt;span class="m"&gt;21343&lt;/span&gt;, in &amp;lt;module&amp;gt;
    import bz2
ImportError: No module named bz2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;那么回到老方式, &lt;code&gt;setuptools-&amp;gt;easy_install pip-&amp;gt;pip&lt;/code&gt;
&lt;a href="https://pypi.python.org/pypi/setuptools#installation-instructions"&gt;setuptools 2.1 : Python Package Index&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# python ez_setup.py&lt;/span&gt;
Downloading https://pypi.python.org/packages/source/s/setuptools/setuptools-2.1.tar.gz
Extracting in /storage/sdcard0/com.hipipal.qpyplus/cache/tmpCpG6N8
Now working in /storage/sdcard0/com.hipipal.qpyplus/cache/tmpCpG6N8/setuptools-2.1
Installing Setuptools
Traceback &lt;span class="o"&gt;(&lt;/span&gt;most recent call last&lt;span class="o"&gt;)&lt;/span&gt;:
  File &lt;span class="s2"&gt;"setup.py"&lt;/span&gt;, line &lt;span class="m"&gt;28&lt;/span&gt;, in &amp;lt;module&amp;gt;
    from setuptools.command.test import &lt;span class="nb"&gt;test&lt;/span&gt; as _test
  File &lt;span class="s2"&gt;"/storage/sdcard0/com.hipipal.qpyplus/cache/tmpCpG6N8/setuptools-2.1/setuptools/command/test.py"&lt;/span&gt;, line &lt;span class="m"&gt;6&lt;/span&gt;, in &amp;lt;module&amp;gt;
    from unittest import TestLoader, main
ImportError: No module named unittest
Something went wrong during the installation.
See the error message above.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;好吧,只能先放下了, 
但是,没有 pip 怎么安装上 &lt;a href="http://mercurial.selenic.com/"&gt;Mercurial&lt;/a&gt; 呢?&lt;/p&gt;
&lt;p&gt;有了 &lt;a href="http://mercurial.selenic.com/"&gt;Hg&lt;/a&gt; 才真正海阔天空了呢…&lt;/p&gt;
&lt;h3 id="restful-onering"&gt;RESTful “OneRing”&lt;a class="headerlink" href="#restful-onering" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;不知道大家记得 &lt;a href="http://code.google.com/p/onering-desktop/wiki/OneRing"&gt;OneRing&lt;/a&gt; 卟?!&lt;/p&gt;
&lt;p&gt;豆瓣首席架构师/布道官/&lt;span class="caps"&gt;CTO&lt;/span&gt; 洪教授 亲手玩的项目:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;跨平台的桌面应用开发库，
使用HTML5+CSS3制作用户界面，
用Javascript编写交互逻辑，
同时提供用写web后端的技术编写后台逻辑!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;但素,现在有了 QPython 完全可以0成本山寨一个移动版的 MyRing 了哪:&lt;/p&gt;
&lt;p&gt;呼应各种本地的 &lt;a href="http://floss.qiniudn.com/data/20110818160723/index.html"&gt;RESTful&lt;/a&gt;
请求,总是要有一个内置的web 服务的,&lt;/p&gt;
&lt;p&gt;当然上 
&lt;a href="http://bottlepy.org/"&gt;Bottle&lt;/a&gt; 了,只有一个文件的越级微框架,不用安装,随项目目录发布就好.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#qpy:console&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;bottle&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;template&lt;/span&gt;

&lt;span class="nd"&gt;@route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'/hello/&amp;lt;name&amp;gt;'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;index&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'&amp;lt;b&amp;gt;Hello {{name}}&amp;lt;/b&amp;gt;!'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'localhost'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;8080&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;因为是要守护在后台长期运行的,所以用 &lt;code&gt;#qpy:console&lt;/code&gt; 标定&lt;/p&gt;
&lt;p&gt;可惜:&lt;/p&gt;
&lt;p&gt;&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-bottle-error.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;原来:&lt;/p&gt;
&lt;p&gt;&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-install-wsgi.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;然后:&lt;/p&gt;
&lt;p&gt;&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-bottle-running.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;没有然后:&lt;/p&gt;
&lt;p&gt;&lt;img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-bottle-hello.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;哈哈! 一切如愿!&lt;/p&gt;
&lt;h2 id="_11"&gt;专题体例:&lt;a class="headerlink" href="#_11" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;QPy 的大妈们曰了: 每个专题应该包括 &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Introduction, 
getting start(include sample better), 
packages, 
videos (searched result from youtube or directly video link )
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;好吧,慢慢来,,,下次专注 Bottle 结合 QPython 实现可用随身小工具.&lt;/p&gt;
&lt;h2 id="_12"&gt;时间帐单:&lt;a class="headerlink" href="#_12" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;简单回顾一下整个从完全小白到折腾出当前扫盲文章的时间投入:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1H: 动心,所有相关资料收集,概览&lt;/li&gt;
&lt;li&gt;2H: &lt;span class="caps"&gt;SSH&lt;/span&gt; 登录成功, 不用口令,未果&lt;/li&gt;
&lt;li&gt;2H: env 确认问题,解决问题&lt;/li&gt;
&lt;li&gt;1H: BusyBox 熟悉手机上的shell 环境&lt;/li&gt;
&lt;li&gt;8H: Fabric 打通, 还是env 问题,以及版本变化后要重新生成 env 配置&lt;/li&gt;
&lt;li&gt;4H: 整理为文章&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;18H&lt;/code&gt; 总计可统计的大块时间, 其它基本有几乎相同的沟通时间,用在
通过 微信/邮件/github 等等方式沟通&lt;/p&gt;
&lt;h2 id="changelog"&gt;Changelog&lt;a class="headerlink" href="#changelog" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;171011 &lt;span class="caps"&gt;ZQ&lt;/span&gt; 迁移到 .io 私人域名中&lt;ul&gt;
&lt;li&gt;官方文档-&amp;gt; &lt;a href="http://www.qpython.org/document.html"&gt;Welcome to read the QPython guide! — QPython 0.9 documentation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;140127 &lt;span class="caps"&gt;ZQ&lt;/span&gt; 增补所有细节&lt;/li&gt;
&lt;li&gt;140126 &lt;span class="caps"&gt;ZQ&lt;/span&gt; 创建&lt;/li&gt;
&lt;/ul&gt;</content><category term="howto"></category><category term="qpy"></category><category term="pythonic"></category><category term="ssh"></category></entry><entry><title>PythonisT happy guido ;-)</title><link href="http://blog.zoomquiet.io/140106-pycon2013tee-guido.html" rel="alternate"></link><published>2014-01-07T00:00:00+08:00</published><updated>2014-01-07T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2014-01-07:/140106-pycon2013tee-guido.html</id><summary type="html">&lt;p&gt;一切开始自2006年!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;起初&lt;span class="caps"&gt;ZEUUX&lt;/span&gt; 作&lt;span class="caps"&gt;TEE&lt;/span&gt; 只是为了好玩,而且 Gudio 很喜欢: 有照片为证&lt;a href="http://wiki.woodpecker.org.cn/moin/ObpLovelyPython/LpyAttachZoomq#A.2BTrpyaQ-"&gt;ObpLovelyPython/LpyAttachZoomq - Woodpecker Wiki for &lt;span class="caps"&gt;CPUG&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;然后,就没有然后了&amp;#8230;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;后来, 好容易一个蠎年了! 为了蠎年的 PyCon2013China,&amp;nbsp;启动了&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://python-china.org/topic/544"&gt;蠎年蠎衫(PythonisT-shirt)设计大赛! — Python&amp;nbsp;China&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;然后,也没有然后了&amp;#8230;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;再然后,&lt;a href="https://twitter.com/stephanie__yu/status/381862928598577152"&gt;Twitter / stephanie__yu: @gvanrossum&amp;nbsp;http://t.co/WSAYnXhbt2&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;我蠎女神搭讪 Gudio&amp;nbsp;成功&lt;/li&gt;
&lt;li&gt;当年的蠎衫,老爹竟然一直在穿!&lt;/li&gt;
&lt;li&gt;于是又火了四处求购的呼声!&lt;/li&gt;
&lt;li&gt;然后,也没有然后了&amp;#8230;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最终, 金山赞助了PyCon2013China 珠海+北京场 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;一切开始自2006年!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;起初&lt;span class="caps"&gt;ZEUUX&lt;/span&gt; 作&lt;span class="caps"&gt;TEE&lt;/span&gt; 只是为了好玩,而且 Gudio 很喜欢: 有照片为证&lt;a href="http://wiki.woodpecker.org.cn/moin/ObpLovelyPython/LpyAttachZoomq#A.2BTrpyaQ-"&gt;ObpLovelyPython/LpyAttachZoomq - Woodpecker Wiki for &lt;span class="caps"&gt;CPUG&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;然后,就没有然后了&amp;#8230;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;后来, 好容易一个蠎年了! 为了蠎年的 PyCon2013China,&amp;nbsp;启动了&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://python-china.org/topic/544"&gt;蠎年蠎衫(PythonisT-shirt)设计大赛! — Python&amp;nbsp;China&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;然后,也没有然后了&amp;#8230;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;再然后,&lt;a href="https://twitter.com/stephanie__yu/status/381862928598577152"&gt;Twitter / stephanie__yu: @gvanrossum&amp;nbsp;http://t.co/WSAYnXhbt2&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;我蠎女神搭讪 Gudio&amp;nbsp;成功&lt;/li&gt;
&lt;li&gt;当年的蠎衫,老爹竟然一直在穿!&lt;/li&gt;
&lt;li&gt;于是又火了四处求购的呼声!&lt;/li&gt;
&lt;li&gt;然后,也没有然后了&amp;#8230;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最终, 金山赞助了PyCon2013China 珠海+北京场,&amp;nbsp;俺就果断使用了封藏的设计,给所有来参加的行者,送了件:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://blog.zhgdg.org/2013-12/et16-pycon-zh/"&gt;PyCon2013China&amp;nbsp;珠海场小结&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;另外,精制了一小批, &lt;span class="caps"&gt;EMS&lt;/span&gt; 给了大会上特别分享了视频的海外 Pythonner&lt;ul&gt;
&lt;li&gt;&lt;a href="http://v.youku.com/v_show/id_XNjQ1OTMzODQw.html"&gt;&lt;span class="caps"&gt;HRYR&lt;/span&gt;:用Python搭建信号采集分析系统&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://v.youku.com/v_show/id_XNjQ1OTM3MDk2.html"&gt;&lt;span class="caps"&gt;EKR&lt;/span&gt;:Leo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;当然有 Guido:&lt;ul&gt;
&lt;li&gt;&lt;a href="https://twitter.com/gvanrossum/status/420249260961968128"&gt;Twitter / gvanrossum: T shift from Chinese user group.&amp;nbsp;&amp;#8230;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="140107-guido-twitter.png（PNG 图像，558x580 像素）" src="http://zoomq.qiniudn.com/CPyUG/zoomquiet-design-collection/140107-guido-twitter.png"&gt;&lt;/p&gt;
&lt;p&gt;以上,有关蠎衫的故事,就是这些,再过12年,又能发生什么?!&lt;/p&gt;
&lt;p&gt;&lt;img alt="design-by zoomquiet " src="http://zoomq.qiniudn.com/CPyUG/zoomquiet-design-collection/favicon/140101-design-by.png"&gt;&lt;/p&gt;</content><category term="Guido"></category><category term="Pythonner"></category><category term="PyConChina"></category></entry><entry><title>Python 101: Writing a cleanup script</title><link href="http://blog.zoomquiet.io/py101-cleanup-script.html" rel="alternate"></link><published>2013-11-23T00:00:00+08:00</published><updated>2013-11-23T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2013-11-23:/py101-cleanup-script.html</id><summary type="html">&lt;p&gt;&lt;a href="http://freepythontips.wordpress.com/2014/01/23/python-101-writing-a-cleanup-script/"&gt;Python 101: Writing a cleanup script | Bite Sized Python&amp;nbsp;Tips&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;So hi there guys! I hope you are fine. So what is in this post? Today we will be writing a cleanup script. The idea for this post came from Mike Driscol who recently wrote a very useful post about …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://freepythontips.wordpress.com/2014/01/23/python-101-writing-a-cleanup-script/"&gt;Python 101: Writing a cleanup script | Bite Sized Python&amp;nbsp;Tips&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;So hi there guys! I hope you are fine. So what is in this post? Today we will be writing a cleanup script. The idea for this post came from Mike Driscol who recently wrote a very useful post about writing a cleanup script in python. So how is my post different from his post? In my post I will be using path.py. When I used path.py for the first time I just fell in love with&amp;nbsp;it.&lt;/p&gt;
&lt;h2 id="installing-pathpy"&gt;Installing path.py:&lt;a class="headerlink" href="#installing-pathpy" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;So there are several ways for installing path.py. Path.py may be installed using setuptools or distribute or pip:
easy_install path.py
The latest release is always updated to the Python Package Index. The source code is hosted on&amp;nbsp;Github.&lt;/p&gt;
&lt;h2 id="finding-the-number-of-files-in-a-directory"&gt;Finding the number of files in a directory:&lt;a class="headerlink" href="#finding-the-number-of-files-in-a-directory" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;So our first task is to find the number of files present in a directory. In this example we will not iterate over subdirectories instead we will just count the number of files present in the top level directory. This one is simple. Here is my&amp;nbsp;solution:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;path&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;
&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DIRECTORY&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
&lt;span class="c1"&gt;#Replace DIRECTORY with your required directory&lt;/span&gt;
&lt;span class="n"&gt;num_files&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;num_files&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In this script we first of all imported the path module. Then we set the num_file variable to 0. This variable is going to keep count for the number of files in our directory. Then we call the path function with a directory name. Firthermore we iterate over the files present in the root of our directory and increment the num_files variable. Finally we print the value of num_files variable. Here is a litle bit modified version of this script which outputs the number of subdirectories present in the root of our&amp;nbsp;directory.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;path&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;
&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DIRECTORY&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
&lt;span class="c1"&gt;#Replace DIRECTORY with your required directory&lt;/span&gt;
&lt;span class="n"&gt;num_dirs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dirs&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;num_dirs&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="finding-the-number-of-files-recursively-in-a-directory"&gt;Finding the number of files recursively in a directory:&lt;a class="headerlink" href="#finding-the-number-of-files-recursively-in-a-directory" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;That was easy! Wasn’t it? So now our work is to find the number of files recursively in a directory. In order to acomplish this task we are given the walk() method by path.py. This is the same as os.walk(). So lets write a simple script for recursively listing all files in a directory and its subdirectories in&amp;nbsp;Python.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;path&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;
&lt;span class="n"&gt;file_count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;dir_count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DIRECTORY&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;#Replace DIRECTORY with your required directory&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;walk&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isfile&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="n"&gt;file_count&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isdir&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="n"&gt;dir_count&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;pass&lt;/span&gt;
    &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;print &amp;#8220;Total number of files == {0}&amp;#8221;.format(file_count)
print &amp;#8220;Total number of directories == {0}&amp;#8221;.format(dir_count)
That was again very easy. Now what if we want to pretty print the directory names? I know there are some terminal one-liners but here we are talking about Python only. Lets see how we can achieve&amp;nbsp;that.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;files_loc = {}
file_count = 0
dir_count = 0
total = 0
for i in d.walk():
    if i.isfile():
        if i.dirname().basename() in files_loc:
            files_loc[i.dirname().basename()].append(i.basename())
        else:
            files_loc[i.dirname().basename()] = []
            files_loc[i.dirname().basename()].append(i.basename())
        file_count += 1
    elif i.isdir():
        dir_count += 1
    else:
        pass
    total += 1

for i in files_loc:
    print &amp;quot;|---&amp;quot;+i
    for i in files_loc[i]:
        print &amp;quot;|   |&amp;quot;
        print &amp;quot;|   `---&amp;quot;+i
    print &amp;quot;|&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There is nothing fancy here. In this script we are just pretty printing a directory and the files it contains. Now lets&amp;nbsp;continue.&lt;/p&gt;
&lt;h2 id="deleting-a-specific-file-from-a-directory"&gt;Deleting a specific file from a directory:&lt;a class="headerlink" href="#deleting-a-specific-file-from-a-directory" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;So lets suppose we have a file called this_file_sucks.py. Now how do we delete it. Lets make this seranio more real by saying that we do not know in which directory it is placed. Its simple to solve this problem as well. Just go to the top level directory and execute this&amp;nbsp;script:&lt;/p&gt;
&lt;p&gt;from path import path
d = path(&lt;span class="caps"&gt;DIRECTORY&lt;/span&gt;)&lt;/p&gt;
&lt;h1 id="replace-directory-with-your-desired-directory"&gt;replace directory with your desired directory&lt;a class="headerlink" href="#replace-directory-with-your-desired-directory" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;for i in d.walk():
    if i.isfile():
        if i.name == &amp;#8216;php.py&amp;#8217;:
            i.remove()
In the above script I did not implement any logging and error handling. That is left as an exercise for the&amp;nbsp;reader.&lt;/p&gt;
&lt;h2 id="deleting-files-based-on-their-extension"&gt;Deleting files based on their extension&lt;a class="headerlink" href="#deleting-files-based-on-their-extension" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Just suppose you want to remove all the ‘.pyc’ files from the directory. How would you go about dealing with this problem. Here is a solution which I came up with in&amp;nbsp;path.py.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;path&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;
&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DIRECTORY&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;walkfiles&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;*.pyc&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nb"&gt;file&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Removed {} file&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;This&lt;/span&gt; &lt;span class="n"&gt;will&lt;/span&gt; &lt;span class="n"&gt;also&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="nb"&gt;file&lt;/span&gt; &lt;span class="n"&gt;which&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="n"&gt;deleted&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="deleting-files-based-on-their-size"&gt;Deleting files based on their size:&lt;a class="headerlink" href="#deleting-files-based-on-their-size" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;So another interesting scenario. What if we want to delete those files which exceed 5Mb&amp;nbsp;size?&lt;/p&gt;
&lt;p&gt;&lt;code&gt;NOTE:&lt;/code&gt; There is a difference between Mb and &lt;span class="caps"&gt;MB&lt;/span&gt;. I will be covering Mb here. 
Is it possible with path.py? Yes it is! So here is a script which does this&amp;nbsp;work:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;d = path(&amp;#39;./&amp;#39;)
del_size = 4522420
for i in d.walk():
    if i.isfile():
        if i.size &amp;gt; del_size:
        #4522420 is approximately equal to 4.1Mb
        #Change it to your desired size
            i.remove()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So we saw how we can remove files based on their&amp;nbsp;size.&lt;/p&gt;
&lt;h2 id="deleting-files-based-on-their-last-access-time"&gt;Deleting files based on their last access time&lt;a class="headerlink" href="#deleting-files-based-on-their-last-access-time" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;In this part we will take a look on how to delete files based on their last access time. I have written the code below to achieve this target. Just change the number of days to anything you like. This script will remove the files which were last modified before the &lt;span class="caps"&gt;DAYS&lt;/span&gt;&amp;nbsp;variable.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;path&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;

&lt;span class="c1"&gt;#Change the DAYS to your liking&lt;/span&gt;
&lt;span class="n"&gt;DAYS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;span class="n"&gt;removed&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DIRECTORY&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;#Replace DIRECTORY with your required directory&lt;/span&gt;
&lt;span class="n"&gt;time_in_secs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DAYS&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;24&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;walk&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isfile&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mtime&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;time_in_secs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
            &lt;span class="n"&gt;removed&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;removed&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So we have also learned how to remove files based on their last modified time. If you want to delete files based on last access time just change i.mtime to i.atime and you will be good to&amp;nbsp;go.&lt;/p&gt;
&lt;h2 id="goodbye"&gt;Goodbye&lt;a class="headerlink" href="#goodbye" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;So that was it. I hope you liked the post. In the end I would like to make a public apology that my English is not good so you may find some grammar mistakes. You are requested to email them to me so that I can improve my English. If you liked this post then don’t forget to follow me on twitter and facebook. A retweet won’t hurt either! If you want to send me a pm then use this&amp;nbsp;email.&lt;/p&gt;
&lt;h2 id="changelog"&gt;Changelog&lt;a class="headerlink" href="#changelog" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;140125 翻译 Weekly issue:99.5&amp;nbsp;时发现,转抄学习&lt;/li&gt;
&lt;/ul&gt;</content><category term="wordpress"></category><category term="101"></category><category term="Zh"></category></entry><entry><title>Letter to a young programmer</title><link href="http://blog.zoomquiet.io/guido-letter-2-young.html" rel="alternate"></link><published>2013-11-11T00:00:00+08:00</published><updated>2013-11-11T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2013-11-11:/guido-letter-2-young.html</id><summary type="html">&lt;p&gt;&lt;img alt="guido" src="https://d262ilb51hltx0.cloudfront.net/max/700/1*2m0OBPBnBJu0WrobbfnBkg.png"&gt;
~ Guido van Rossum (inventor of&amp;nbsp;Python)&lt;/p&gt;
&lt;h1 id="letter-to-a-young-programmer"&gt;&lt;a href="http://neopythonic.blogspot.ca/2013/10/letter-to-young-programmer.html"&gt;Letter to a young programmer&lt;/a&gt;&lt;a class="headerlink" href="#letter-to-a-young-programmer" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;Dear (insert name&amp;nbsp;here),&lt;/p&gt;
&lt;p&gt;I heard you enjoy a certain programming language named Python. Programming is a wonderful activity. I am a little jealous that you have access to computers at your age; when I grew up I didn …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;img alt="guido" src="https://d262ilb51hltx0.cloudfront.net/max/700/1*2m0OBPBnBJu0WrobbfnBkg.png"&gt;
~ Guido van Rossum (inventor of&amp;nbsp;Python)&lt;/p&gt;
&lt;h1 id="letter-to-a-young-programmer"&gt;&lt;a href="http://neopythonic.blogspot.ca/2013/10/letter-to-young-programmer.html"&gt;Letter to a young programmer&lt;/a&gt;&lt;a class="headerlink" href="#letter-to-a-young-programmer" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;Dear (insert name&amp;nbsp;here),&lt;/p&gt;
&lt;p&gt;I heard you enjoy a certain programming language named Python. Programming is a wonderful activity. I am a little jealous that you have access to computers at your age; when I grew up I didn’t even know what a computer was! I was an electronics hobbyist though, and my big dream was to build my own electronic calculator from discrete components. I never did do that, but I did build several digital clocks, and it was amazing to build something that complex and see it work. I hope you dream big too — programmers can make computers (and robots!) do amazing things, and this is a great time to become a programmer. Just imagine how much faster computers will be in five or ten years, and what you will be able to do with your skills&amp;nbsp;then!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;—Guido van Rossum (inventor of Python)
THURSDAY, OCTOBER 24, 2013
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;从
&lt;a href="http://us4.campaign-archive1.com/?u=9735795484d2e4c204da82a29&amp;amp;id=c8c36205c4"&gt;Pycoder’s Weekly (Issue #89): Mavericks&lt;/a&gt;
知道的 Guido&amp;nbsp;好萌信,`&lt;/p&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;尝试翻译一下:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;亲:

目测你正在享受一种叫Python 的编程语言.
编程是种美妙的体验.
俺很有点羡慕嫉妒恨你们 !在这个年龄就能接触电脑.
俺那会儿子,甚至不知道什么是计算机!
俺算一个电子爱好者,那时,最大的梦想是,亲手完成一个计算元件.
俺从未作到这点.
不过,倒是完成了几件数字时钟,
每当见到如此复杂的东西,终于能工作时,哗! 那种感觉,,,
俺期望你的梦想也足够大 —
程序可以控制计算机(机械人)做出令人惊叹的事儿,
这是个令程序员伟大的时代.
现在就设想,5到10年后,能运用你的功能操作更快的计算机作到什么?!

哗…
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="changelog"&gt;Changelog&lt;a class="headerlink" href="#changelog" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;140107 move into Pelican as&amp;nbsp;zoomquiet.io&lt;/li&gt;
&lt;li&gt;131027 pub. &lt;a href="https://medium.com/i-m-h-o/e701a9dc714e"&gt;Letter to a young programmer — &lt;span class="caps"&gt;I. M. H. O.&lt;/span&gt;—&amp;nbsp;Medium&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="OSS"></category><category term="Think"></category><category term="China"></category></entry><entry><title>EKR to Chinese programmer</title><link href="http://blog.zoomquiet.io/ekr-selfintro-for-chinese.html" rel="alternate"></link><published>2013-11-06T00:00:00+08:00</published><updated>2013-11-06T00:00:00+08:00</updated><author><name>Zoom.Quiet</name></author><id>tag:blog.zoomquiet.io,2013-11-06:/ekr-selfintro-for-chinese.html</id><summary type="html">&lt;h1 id="leo"&gt;Leo 作者向中国开发者的自述&lt;a class="headerlink" href="#leo" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;&lt;img alt="EKR" src="https://d262ilb51hltx0.cloudfront.net/max/700/1*yKVZtcJyfh-FHNEtXrqjPw.jpeg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://leoeditor.com/"&gt;Leo&lt;/a&gt; is OpenSource,written by Python,can run in M$/Linux/&lt;span class="caps"&gt;MAC&lt;/span&gt;/etc. ,Leo is Literate Environment Outline-oriented ;-)
&lt;span class="caps"&gt;EKR&lt;/span&gt; is her&amp;nbsp;father.&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;BUT&lt;/span&gt;, what is “Literate” ,is hard to explained,
i try and try and try to show/share to Chinese People, &lt;span class="caps"&gt;BUT&lt;/span&gt;…
next week,there is another …&lt;/p&gt;</summary><content type="html">&lt;h1 id="leo"&gt;Leo 作者向中国开发者的自述&lt;a class="headerlink" href="#leo" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;&lt;img alt="EKR" src="https://d262ilb51hltx0.cloudfront.net/max/700/1*yKVZtcJyfh-FHNEtXrqjPw.jpeg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://leoeditor.com/"&gt;Leo&lt;/a&gt; is OpenSource,written by Python,can run in M$/Linux/&lt;span class="caps"&gt;MAC&lt;/span&gt;/etc. ,Leo is Literate Environment Outline-oriented ;-)
&lt;span class="caps"&gt;EKR&lt;/span&gt; is her&amp;nbsp;father.&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;BUT&lt;/span&gt;, what is “Literate” ,is hard to explained,
i try and try and try to show/share to Chinese People, &lt;span class="caps"&gt;BUT&lt;/span&gt;…
next week,there is another chance for try again, and ask &lt;span class="caps"&gt;EKR&lt;/span&gt; say some abt. self…
So! &lt;span class="caps"&gt;EKR&lt;/span&gt; writed down his colorful&amp;nbsp;life!&lt;/p&gt;
&lt;p&gt;​I’ve been interested in computers from the time I was about 10 years&amp;nbsp;old.&lt;/p&gt;
&lt;p&gt;I studied mathematics at Michigan State University and computer science at the University of Wisconsin, Madison. There I meant my friend and mentor, &lt;span class="caps"&gt;D.R.&lt;/span&gt;(Bob) Fitzwater. Bob encouraged me to focus more on design, less on the “bits”. He died several years ago—he would have enjoyed what has happened&amp;nbsp;since.&lt;/p&gt;
&lt;p&gt;When I first learned to program, my programs were “brittle”: changing one part would break another. For several years I wanted to know how to solve this&amp;nbsp;problem.&lt;/p&gt;
&lt;p&gt;My first programming job was at &lt;span class="caps"&gt;IBM&lt;/span&gt; in Kingston New York. This was about 1974. I didn’t like corporate culture. The problem was my own immaturity, not the people at &lt;span class="caps"&gt;IBM&lt;/span&gt;. Still, I’m happy I&amp;nbsp;left.&lt;/p&gt;
&lt;p&gt;While at &lt;span class="caps"&gt;IBM&lt;/span&gt; I studied the ideas of people like Edsjer Dijkstra and especially the great David L. Parnas. Parnas was writing before languages had classes. In fact, his ideas are the reason that Leo’s classes have remained unchanged in concept even though they have been rewritten many&amp;nbsp;times.&lt;/p&gt;
&lt;p&gt;I left &lt;span class="caps"&gt;IBM&lt;/span&gt; after less than a year. For a while I owned a computer store in Madison Wisconsin, where I have lived ever since. The store didn’t turn out too&amp;nbsp;well…&lt;/p&gt;
&lt;p&gt;I married Rebecca in 1980, and we have been a happy team ever since. Leo would not have been born without her. Rebecca and I have two children, James and Linda. James is 30, Linda&amp;nbsp;23.&lt;/p&gt;
&lt;p&gt;About this time I started a computer business selling Sherlock, a tracing tool for C programs:&amp;nbsp;https://sourceforge.net/projects/leo/files/Miscellaneous/Sherlock/ &lt;/p&gt;
&lt;p&gt;I received a patent for it, but the business went nowhere. Sherlock is not needed for tracing Python programs: the pattern used in Leo suffices.
The ideas behind Sherlock really ought to be part of Python’s logging framework. Levels of logging are feeble compared to individually named and targeted&amp;nbsp;logs.&lt;/p&gt;
&lt;p&gt;I worked (from home) for about a year for a company called Tuple in Ballard, Washington. I wrote (in C) a very fast optimizing C compiler, assembler, linker and unix-like file system for them. See the &lt;span class="caps"&gt;CC2&lt;/span&gt; stuff at: 
https://sourceforge.net/projects/leo/files/Miscellaneous/&lt;span class="caps"&gt;CC2&lt;/span&gt;%20and%20Psyco/&lt;/p&gt;
&lt;p&gt;This was before the days of unit tests! At that time, having the compiler compile itself was pretty much how testing was&amp;nbsp;done!&lt;/p&gt;
&lt;p&gt;I’ve been a fan of Donald Knuth ever since graduate school. I studied his books about&amp;nbsp;TeX:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Volume A, The TeXbook (Reading, Massachusetts: Addison-Wesley, 1984), x+483pp. 
ISBN 0-201-13447-0

Volume B, TeX: The Program (Reading, Massachusetts: Addison-Wesley, 1986), xviii+600pp. ISBN 0-201-13437-3

Volume B is written in Pascal(!) and organized (if you can call it that) using Knuth’s WEB system. I studied WEB intensely.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Despite understanding bits and pieces of the 600-page code in volume B, I really didn’t understand the code. I asked myself, why is this so hard to understand? After perhaps 6 months of wondering, the basis of Leo came to me: webs are outlines in disguise. Actually, &lt;em&gt;all&lt;/em&gt; programs are outlines in&amp;nbsp;disguise.&lt;/p&gt;
&lt;p&gt;You can read about the rest of Leo’s history here:&amp;nbsp;http://leoeditor.com/appendices.html#history-of-leo&lt;/p&gt;
&lt;p&gt;I learned about Python in 2001. I was working on the Python version of Leo on September&amp;nbsp;11.&lt;/p&gt;
&lt;p&gt;Two years ago I got interested in Guido’s keynote about static type checking. I contacted him and started this project:&amp;nbsp;https://groups.google.com/forum/#!forum/python-static-type-checking&lt;/p&gt;
&lt;p&gt;I spent lots of time learning how to traverse parse trees quickly. That’s not nothing, but it’s only the beginning of the task. Perhaps next year I’ll be able to do for type analysis what I did for traversing parse trees&amp;nbsp;;-)&lt;/p&gt;
&lt;p&gt;​
And that’s about it. I’ve ever only been interested in programming. I love seeing how other people use Leo, but such excursions are not for me. I remain interested in programming because it has never been easy for&amp;nbsp;me.&lt;/p&gt;
&lt;p&gt;I am a mediocre wei chi player, despite many lessons from Yang Yi-Lun 杨以伦, pro 7 dan: 
https://en.wikipedia.org/wiki/Yilun_Yang 
I do know enough to appreciate famous&amp;nbsp;games. &lt;/p&gt;
&lt;p&gt;One of my favorites was played between the two great rivals Go Seigen 吳清源 and Kitani Minoru 木谷 実 on March 20, 1932. 
Go Seigen won by resignation, despite losing about 25&amp;nbsp;stones.&lt;/p&gt;
&lt;p&gt;I play the piano and take lessons from a great musician, Michael Butkus-Bomier: http://www.michaelbb.info/
I enjoy painting. About 20 years ago I received a black belt in&amp;nbsp;karate.&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;HTH&lt;/span&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;试译如下:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;10岁开始,俺就对计算机上了心.&lt;/p&gt;
&lt;p&gt;俺是密歇根州立大学数学系的,也是威斯康星大学麦迪逊学院计算机系的.在那儿,遇到了俺的导师(Bob) Fitzwater教授,他建议俺多关注设计,而不仅仅是”字节”.
几年前,Bob&amp;nbsp;已仙去,不过,他要是知道俺在折腾什么一定会很高兴.&lt;/p&gt;
&lt;p&gt;开始编程时,俺的程序特色是”脆”:某处囧了,另外的也会杯具.&amp;nbsp;那些年俺一直在想法解决这种事儿!&lt;/p&gt;
&lt;p&gt;俺第一份程序猿工作是在1974年进入 &lt;span class="caps"&gt;IBM&lt;/span&gt; (Kingston New York). 俺并不喜欢企业文化,当然问题在俺不在 &lt;span class="caps"&gt;IBM&lt;/span&gt;,&amp;nbsp;总之很高兴俺及时离开了.&lt;/p&gt;
&lt;p&gt;有&lt;span class="caps"&gt;IBM&lt;/span&gt; 俺接触到象 Edsjer Dijkstra 或是 伟大的 David L. Parnas 们的想法.Parnas写的书面语言类, 诱发了 Leo&amp;nbsp;的类概念无论怎么重写都不会改变!&lt;/p&gt;
&lt;p&gt;离开 &lt;span class="caps"&gt;IBM&lt;/span&gt;&amp;nbsp;快一年时.有一阵子,俺在威斯康星的麦迪逊那儿有个电脑店.事儿并不忙…&lt;/p&gt;
&lt;p&gt;1980年,俺同 Rebecca 结婚了,从此有了俺自个儿的快乐团队.如果没有她, Leo 也诞生不出来. Rebecca 和俺有两个娃儿,James 和 Linda. 现在 James 30, Linda&amp;nbsp;23.&lt;/p&gt;
&lt;p&gt;大约这时期,俺开始销售 Sherlock, 针对C程序的追踪工具.: https://sourceforge.net/projects/leo/files/Miscellaneous/Sherlock/
俺拥有相关专科,但是没什么业务.Sherlock 没必要对 Python 程序进行追踪: Leo 足够用了!
Sherlock背后的想法的确出自Python&amp;nbsp;的日志框架.分级的日志绝对比苍白的命名式日志要好用的多.&lt;/p&gt;
&lt;p&gt;俺为华盛顿一家名为”Tuple in Ballard”的公司&lt;span class="caps"&gt;SOHO&lt;/span&gt; 了一年, 写(用C)了些很快的编译器,汇编器,链接器,以及 Unix样的文件系统.参考 &lt;span class="caps"&gt;CC2&lt;/span&gt;: https://sourceforge.net/projects/leo/files/Miscellaneous/&lt;span class="caps"&gt;CC2&lt;/span&gt;%20and%20Psyco/&amp;nbsp;这儿是几天前的集成测试结果!当时,编译过编译器自身比跑通测试重要的多.&lt;/p&gt;
&lt;p&gt;毕业以来,俺一直是高纳德的粉丝. 学习过他有关TeX&amp;nbsp;的书.包括:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;卷A，TeXbook（阅读，马萨诸塞州：Addison-Wesley出版社，1984），X+483页。 ISBN0-201-13447-0

卷B, TEX:程序（阅读，马萨诸塞州：Addison-Wesley出版社，1986），18+600页。 ISBN0-201-13437-3
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;B卷是用 Pascal(!) 完成并组织的(甚至于可以调用它),运用了 高纳德的 &lt;span class="caps"&gt;WEB&lt;/span&gt; 系统.俺立即对 &lt;span class="caps"&gt;WEB&lt;/span&gt;&amp;nbsp;系统着迷了.&lt;/p&gt;
&lt;p&gt;尽管对卷B 600多页中散布的代码进行了反复理解,依然一头雾水.俺反问自个儿,有这么难嘛?又过了大约半年, 完成了 Leo&amp;nbsp;的主要部分后,回过味儿来:&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;WEB&lt;/span&gt; 就是变形的大纲&amp;nbsp;事实上:&lt;/p&gt;
&lt;p&gt;一切程序都是大纲的变形 !
Leo 其余的历史可以在这儿查阅:&amp;nbsp;http://leoeditor.com/appendices.html#history-of-leo&lt;/p&gt;
&lt;p&gt;俺在2001 年才学的 Python.同年9月11日开始,就用Python 来构建 Leo&amp;nbsp;了.&lt;/p&gt;
&lt;p&gt;两年前俺关注到 Guido 有关静态类型检查的报告.于是联系上他启动了这个项目:&amp;nbsp;https://groups.google.com/forum/#!forum/python-static-type-checking&lt;/p&gt;
&lt;p&gt;俺花了大量的时间来学习如何快速遍历语法树.这不算什么事儿,但却是此任务的必然起点. 也许明年俺能基于语法树开展类型分析了&amp;nbsp;;-)&lt;/p&gt;
&lt;p&gt;(嚓! 王珢的 https://github.com/yinwang0/pysonar2 已经折腾很&lt;span class="caps"&gt;NB&lt;/span&gt;&amp;nbsp;;-)&lt;/p&gt;
&lt;p&gt;是也乎,俺就是对编程感兴趣.俺喜欢见证大家对 Leo 的喜爱,&amp;nbsp;但是,这不会是俺的一切.俺保持编程的兴趣,因为对俺这从来不是简单的事儿.&lt;/p&gt;
&lt;p&gt;俺是名普通的围棋爱好者, 从 Yang Yi-Lun (杨以伦)那儿学了很多, pro 7 dan: https://en.wikipedia.org/wiki/Yilun_Yang
俺能欣赏历史上知名的对弈, 其中最喜欢的是 1932年3月20号 吳清源 同 木谷 実(Kitani Minoru)的对战.尽管少了25颗棋子,但吳清源最终赢了!
俺也弹钢琴,并学习了伟大的 Michael Butkus-Bomier 的课程: http://www.michaelbb.info/
俺也享受绘画.&amp;nbsp;另外20年前,俺也拿到了空手道的黒带.&lt;/p&gt;
&lt;p&gt;以上.&lt;/p&gt;
&lt;h2 id="changelog"&gt;Changelog&lt;a class="headerlink" href="#changelog" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;140107 move into Pelican as&amp;nbsp;zoomquiet.io&lt;/li&gt;
&lt;li&gt;131106 pub. &lt;a href="https://medium.com/i-m-h-o/9520fee0b59f"&gt;&lt;span class="caps"&gt;EKR&lt;/span&gt; to Chinese programmer — &lt;span class="caps"&gt;I. M. H. O.&lt;/span&gt;—&amp;nbsp;Medium&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="EKR"></category><category term="Leo"></category><category term="PyConChina"></category><category term="Zh"></category></entry></feed>
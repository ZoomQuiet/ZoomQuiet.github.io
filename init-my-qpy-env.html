<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>    init-my-qpy-env
/ 是也乎(￣▽￣)
/ ZoomQuiet.io    </title>

    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Open Graph tags -->

            <meta property="og:type" content="article"/>
            <meta property="og:slug" content="init-my-qpy-env"/>
            <meta property="og:url" content="https://blog.zoomquiet.io/init-my-qpy-env.html"/>
            <meta property="og:description" content="背景¶ QPython 知道有两年了,是看 Head First Python(中文版) (豆瓣) 时,发现竟然有 SL4A 这种神器! Google 果断是业界良心哪, 可惜: 从Downloads 可以看出 ,已经停止有一年多了,目测是 Guido 叔离开后, Python 的地位在 Google 一落千丈就没有人折腾了. 好在旧浪两位同事, River和CF 掿起了 SL4A 的旗帜, 变成了一系列准衶器: QPython - Python for Android - Google Play 上的 Andr​​oid 应用 QPython 3 - Python3 on Android - Google …"/>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://blog.zoomquiet.io/theme/css/bootstrap.readable.min.css" type="text/css"/>
    <link href="https://blog.zoomquiet.io/theme/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://blog.zoomquiet.io/theme/css/bootstrap-glyphicons.css" rel="stylesheet">
    <link href="https://blog.zoomquiet.io/theme/css/pygments/github.css" rel="stylesheet">
    <link rel="stylesheet" href="https://blog.zoomquiet.io/theme/css/style.css" type="text/css"/>

    <!-- add emojify into Pelican 
    <link rel="stylesheet" href="https://blog.zoomquiet.io/theme/css/emojify.min.css" type="text/css" />
    <script src="https://blog.zoomquiet.io/theme/js/emojify.js"></script>

-->


    <!-- JavaScript plugins (requires jQuery) -->
    <script src="//code.jquery.com/jquery.min.js"></script>

        <link href="https://blog.zoomquiet.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title=" ATOM Feed"/>

            <!--
    { include 'includes/ga.html' }
            -->
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <!--
<a href="https://blog.zoomquiet.io" class="navbar-brand"></a>
            -->
<a href="https://blog.zoomquiet.io" class="navbar-brand">
    <img src="https://blog.zoomquiet.io/theme/logo.png"/>
    
    <span class="violet-site">.io </span>
</a>            
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="http://pychina.org">PyChina</a></li>
                    <li><a href="http://obp.zoomquiet.io">OBP</a></li>
                    <li><a href="/pages/about.html">abt.</a></li>
                    <li><a href="/pages/design.html">design</a></li>
              

              
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="https://blog.zoomquiet.io/feeds/all.atom.xml"><i class="icon-rss-sign"></i>rss</a></li>

                <li><a href="https://blog.zoomquiet.io/archives.html"><i class="icon-th-list"></i>Archives</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</nav>
<!-- /.navbar -->
<div class="container">
    <div class="row">
        <div class="col-lg-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://blog.zoomquiet.io/init-my-qpy-env.html">
                        如何自在的折腾QPy
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
<!--
    <span class="label label-default">Date</span>
-->
    <span class="published">
        <i class="icon-calendar"></i>2014-01-26 12:42
    </span>

<!--
    <span class="label">By</span>
    <i class="icon-user"></i>
    <a href="https://blog.zoomquiet.io/author/zoomquiet.html">Zoom.Quiet</a>

    <span class="label label-default">Category</span>
    <a href="https://blog.zoomquiet.io/category/pythonic.html">Pythonic</a>
-->




	<span class="label label-default">Tags</span>
		<a href="https://blog.zoomquiet.io/tag/howto.html">howto</a>
	        ,
		<a href="https://blog.zoomquiet.io/tag/qpy.html">qpy</a>
	        ,
		<a href="https://blog.zoomquiet.io/tag/pythonic.html">pythonic</a>
	        ,
		<a href="https://blog.zoomquiet.io/tag/ssh.html">ssh</a>
</footer><!-- /.post-info -->                    </div>
                </div>
    <nav class="toc">
    <div class="toc">
<ul>
<li><a href="#_1">背景</a></li>
<li><a href="#_2">目标</a></li>
<li><a href="#_3">环境准入</a><ul>
<li><a href="#_4">硬件</a></li>
</ul>
</li>
<li><a href="#_5">探索</a><ul>
<li><a href="#_6">上传</a><ul>
<li><a href="#ssh"><span class="caps">SSH</span></a></li>
<li><a href="#busybox">BusyBox</a></li>
</ul>
</li>
<li><a href="#_7">运行</a><ul>
<li><a href="#beta"><span class="caps">BETA</span>乱入</a></li>
<li><a href="#qpython">QPython头声明</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#qpywebapp">qpy:webapp:<app title=""></app></a></li>
<li><a href="#qpyfullscreen">qpy:fullscreen</a></li>
<li><a href="#qpylocalhost8080">qpy://localhost:8080</a><ul>
<li><a href="#_8">自动</a><ul>
<li><a href="#fabric">Fabric</a></li>
<li><a href="#_9">日志</a></li>
</ul>
</li>
<li><a href="#_10">结论</a><ul>
<li><a href="#todo"><span class="caps">TODO</span></a></li>
<li><a href="#pip">pip</a></li>
<li><a href="#restful-onering">RESTful “OneRing”</a></li>
</ul>
</li>
<li><a href="#_11">专题体例:</a></li>
<li><a href="#_12">时间帐单:</a></li>
<li><a href="#changelog">Changelog</a></li>
</ul>
</li>
</ul>
</div>
    </nav>

                
<h2 id="_1">背景<a class="headerlink" href="#_1" title="Permanent link">¶</a></h2>
<p>QPython 知道有两年了,是看 <a href="http://book.douban.com/subject/10561367/">Head First Python(中文版) (豆瓣)</a> 时,发现竟然有 
<a href="http://code.google.com/p/android-scripting/"><span class="caps">SL4A</span></a></p>
<p>这种神器! Google 果断是业界良心哪,
可惜: 从<a href="http://code.google.com/p/android-scripting/downloads/list">Downloads</a>
可以看出 ,已经停止有一年多了,目测是 Guido 叔离开后, Python 的地位在 Google 一落千丈就没有人折腾了.</p>
<p>好在旧浪两位同事, River和<span class="caps">CF</span> 掿起了 <span class="caps">SL4A</span> 的旗帜, 变成了一系列准衶器:</p>
<ul>
<li><a href="https://play.google.com/store/apps/details?id=com.hipipal.qpyplus">QPython - Python for Android - Google Play 上的 Andr​​oid 应用</a></li>
<li><a href="https://play.google.com/store/apps/details?id=com.hipipal.qpy3">QPython 3 - Python3 on Android - Google Play 上的 Andr​​oid 应用</a></li>
<li><a href="https://play.google.com/store/apps/details?id=com.hipipal.qpy">QPython Player for Android - Google Play 上的 Andr​​oid 应用</a></li>
<li><a href="https://play.google.com/store/apps/details?id=com.hipipal.texteditor">QEdit - Code Editor in Pocket - Google Play 上的 Andr​​oid 应用</a></li>
</ul>
<p>目标直指所谓的内什么,,,</p>
<p>而且,目测已经有国家高等教育项目中,
直接使用了 <code>QPython</code> 来作教学环境!</p>
<p>所以,果断要跟上用起来,,,</p>
<p>参考:</p>
<ul>
<li><a href="http://www.appannie.com/apps/amazon-appstore/top/china/education/">App Annie 的应用商店数据|Amazon排行榜中国 - Education - 2014年1月27日</a></li>
<li><a href="http://www.douban.com/group/topic/17095466/">让Python在Android系统上飞一会儿:第一节 在手机上…</a></li>
</ul>
<h2 id="_2">目标<a class="headerlink" href="#_2" title="Permanent link">¶</a></h2>
<p>哪,俺是 Pythoneer ,不是 <span class="caps">JAVA</span> 党,
更加是 <code>IDE 去死去死团</code> 的骨灰成员.</p>
<p>很辛苦的攒銭搞到了 
<a href="http://news.mynavi.jp/news/2013/02/07/051/index.html"><span class="caps">FILCO</span> Majestouch <span class="caps">MINILA</span></a>
青轴!
绝对不要回到 <code>一指禅</code> 的时代哪!!!</p>
<p>所以,俺要用 QPython 就是用来快速进行实用mini 应用的,
而且, 期待的开发流程, 应该完全类似现在的 web server 开发流程:</p>
<ol>
<li>本地用喜爱的编辑环境进行代码撰写 (<a href="http://www.sublimetext.com">Sublime Text 2</a>, <a href="http://leoeditor.com/">Leo</a>, etc.)</li>
<li>一键上传手机,并自动运行</li>
<li>在手机上真实操作,同时有远程日志可以实时观察,确认问题</li>
</ol>
<p>以上循环</p>
<h2 id="_3">环境准入<a class="headerlink" href="#_3" title="Permanent link">¶</a></h2>
<p>对了,以下记述充斥了各种非科普性描述, 为了误入的小伙伴不被意外恶心到,得交待一下适合继续阅读的条件:</p>
<ol>
<li>42 个月, Linux/Unix 系统使用~注意!是使用不是管理体验;不然各种标准的命令行操作要死人的,,</li>
<li>42 周的, 编程体验,不许什么語言,就是 <span class="caps">JS</span> 也成,起码要有一丝码感,,,</li>
<li>42 次的, 蕃茄工作时间 的经历,至少知道什么是” <a href="http://book.douban.com/reading/12671922/">心流</a>“般的专注!</li>
<li>42 天的, 相关资料通读,相关社区的加入/旁听,,,一定要摸清楚相关主要开发人员的沟通习惯 ;-)</li>
<li>42 小时, 的周边环境整备,熟悉工作系统以及配置好顺手的工具(git/apt/yum/brew …)</li>
<li>42 分钟, 当前的空闲时间,能够专注以下描述,不会片面的抽取文字就来吼俺 <code>图样图森破</code> 什么的..</li>
<li>42 秒, 明确以上条件 <code>42%</code> 吻合,即可继续 ;-)</li>
</ol>
<h3 id="_4">硬件<a class="headerlink" href="#_4" title="Permanent link">¶</a></h3>
<p>手机: 电信协议 三星 Note2 <span class="caps">N7108ZMDMF1</span>:</p>
<ul>
<li>Android 4.1.1 <span class="caps">JRO03C</span></li>
<li>刷的是 <span class="caps">MIUI</span>-3.3.15 野生版</li>
<li><span class="caps">CPU</span> 四核 1.6GHz</li>
<li>内存 2G</li>
<li>存储 16G</li>
</ul>
<p>主机: <span class="caps">MBP</span> 12下半年版 </p>
<ul>
<li><span class="caps">OS</span> X 10.9.1</li>
<li>Core i7 2.2GHz</li>
<li>8G 内存</li>
<li>500G 机械硬盘</li>
</ul>
<p>湿件: 30++++++++++岁老程序猿</p>
<ul>
<li>180,180,180,,,</li>
<li><span class="caps">ASP</span>,Basic,C,C++,Clojure,Erlang,Forth,Factor,Go,Haskell,<span class="caps">JS</span>,<span class="caps">JAVA</span>,Lisp,Node,<span class="caps">PHP</span>,Python,Pascal,<span class="caps">XSLT</span>,<span class="caps">REBOL</span>,Rust,,,少量经验</li>
<li>精通26字母, Cnglish 熟练</li>
</ul>
<h2 id="_5">探索<a class="headerlink" href="#_5" title="Permanent link">¶</a></h2>
<p>根据策划的流程,在原作者的帮助下,进行了高强度的折腾,
经过连续 27 小时探索,基本爽了起来:</p>
<h3 id="_6">上传<a class="headerlink" href="#_6" title="Permanent link">¶</a></h3>
<p>Android 呢,就是 Linux 哪,当然应该用 <code>scp</code> 安全上传了!</p>
<p>目测,要依次解决:</p>
<ol>
<li>手机上的 <code>SSH</code> 守护在哪儿,怎么启动</li>
<li>脚本应该上传到哪儿 QPython 才能识别?</li>
</ol>
<h4 id="ssh"><span class="caps">SSH</span><a class="headerlink" href="#ssh" title="Permanent link">¶</a></h4>
<p>搜索就有:</p>
<ul>
<li><a href="http://gailly.net/android/android-tips.html">Android tips</a></li>
<li><a href="http://www.linuxplanet.com/linuxplanet/reviews/7301/1">10 Android Apps for Linux Server Admins - ConnectBot, QuickSSHd, SwiFTP, AndFTP, Wyse PocketCloud - Reviews - LinuxPlanet</a></li>
<li><a href="http://my.oschina.net/winHerson/blog/84716">SSHDroid(<span class="caps">SSH</span> Server for Android)通过<span class="caps">PC</span>或命令连接android - bugeasy - 开源中国社区</a></li>
</ul>
<p>经过快速的尝试,
明确 <code>SSHDroid</code> 最简洁可用, 那就上:</p>
<p><img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140127-qpy-sshdroid.jpg"/></p>
<ul>
<li>安装,配置都没有什么可说的</li>
<li>只是,非专业版,只能用口令登录,先忍着</li>
<li>扩展一点点儿从 <a href="http://onetimeblog.logdown.com/posts/2014/01/23/first-program-in-qpython">Hello, QPython! « one-time blog</a> 来的代码,成 <code>hollo.py</code></li>
</ul>
<div class="highlight"><pre><span class="n">import</span> <span class="n">androidhelper</span>
<span class="n">droid</span> <span class="o">=</span> <span class="n">androidhelper</span><span class="p">.</span><span class="n">Android</span><span class="p">()</span>
<span class="n">droid</span><span class="p">.</span><span class="n">makeToast</span><span class="p">(</span><span class="n">u</span><span class="err">'</span><span class="n">Hello</span><span class="p">,</span> <span class="n">Username</span><span class="o">!</span><span class="err">是也乎</span> <span class="p">;</span><span class="o">-</span><span class="p">)</span><span class="err">'</span><span class="p">)</span>
</pre></div>
<p>上传到哪儿呢?!</p>
<p>快速翻找一下,明确几个关键路径:</p>
<ul>
<li>
<p><code>SSHDroid</code>起始可写根:</p>
</li>
<li>
<p><code>/data/data/berserker.android.apps.sshdroid/home/</code></p>
</li>
<li>
<p>即: <code>cd ~</code> 回到的目录</p>
</li>
<li>
<p>QPython 环境分:</p>
</li>
<li>
<p>只读执行文件起点 <code>/data/data/com.hipipal.qpyplus/files/bin/</code></p>
</li>
<li>可写资源起点以及目录意义:</li>
</ul>
<div class="highlight"><pre><span class="o">/</span><span class="n">storage</span><span class="o">/</span><span class="n">sdcard0</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">hipipal</span><span class="p">.</span><span class="n">qpyplus</span><span class="o">/</span>
    <span class="o">+-</span> <span class="n">cache</span>         
    <span class="o">+-</span> <span class="n">lib</span>        <span class="err">各</span><span class="n">Python</span><span class="err">版本的库安装入口</span> 
    <span class="o">+-</span> <span class="n">projects</span>   <span class="err">俺的</span><span class="n">QPy</span> <span class="err">项目入口</span>
    <span class="o">+-</span> <span class="n">scripts</span>    <span class="err">俺的</span><span class="n">QPy</span> <span class="err">脚本入口</span>
</pre></div>
<h4 id="busybox">BusyBox<a class="headerlink" href="#busybox" title="Permanent link">¶</a></h4>
<p>等等! <span class="caps">SSH</span> 上来后,各种不适应,这什么 shell 环境哪,连 <code>less</code>, <code>tail</code>, <code>vi</code> 都没有
好意思说自个儿是 <code>Linux</code> 嘛?!</p>
<p>搜索才知道,这货叫 <code>ash</code></p>
<ul>
<li>躲在 <code>/system/bin/sh</code> 基本上什么也不会作</li>
<li>所以,程序猿有 <a href="http://www.busybox.net/">BusyBox</a></li>
<li>一安装,批量将大堆习惯的工具,灌到 <code>system/xbin/</code></li>
</ul>
<p><img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-busybox-tail.jpg"/></p>
<p>这样,才能远程观察, QPython 项目目录中,
若隐若现的 <code>.run.log</code> 明显发生什么问题, 快速增补一行:</p>
<div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>
<span class="kn">import</span> <span class="nn">androidhelper</span>
<span class="n">droid</span> <span class="o">=</span> <span class="n">androidhelper</span><span class="o">.</span><span class="n">Android</span><span class="p">()</span>
<span class="n">droid</span><span class="o">.</span><span class="n">makeToast</span><span class="p">(</span><span class="s">u'Hello, Username!是也乎 ;-)'</span><span class="p">)</span>
</pre></div>
<p>就能运行成功,跳出最简单的发布公告框了!</p>
<p><img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-hollo.jpg"/></p>
<h3 id="_7">运行<a class="headerlink" href="#_7" title="Permanent link">¶</a></h3>
<p>好了,进入下一个阶段: <code>怎么让 QPyhon 如系统命令一样在 ash 环境中调用我们的脚本?</code></p>
<p>目测,要依次解决:</p>
<ol>
<li>ash 环境变量是否兼容 QPython?</li>
<li>ash 环境变量如果不兼容 QPython 怎么配置?</li>
</ol>
<p>将刚刚测试明确可用的脚本从 shell 环境中调用一下:</p>
<div class="highlight"><pre><span class="c"># cd /storage/sdcard0/com.hipipal.qpyplus/projects/chaos/ </span>
<span class="c"># /data/data/com.hipipal.qpyplus/files/bin/python hollo.py</span>

Could not find platform independent libraries &lt;prefix&gt;
Consider setting <span class="nv">$PYTHONHOME</span> to &lt;prefix&gt;<span class="o">[</span>:&lt;exec_prefix&gt;<span class="o">]</span>
ImportError: No module named site
</pre></div>
<p>果断没有那么简单, 检查一下系统环境:</p>
<div class="highlight"><pre><span class="n">_</span><span class="o">=/</span><span class="n">system</span><span class="o">/</span><span class="n">xbin</span><span class="o">/</span><span class="n">env</span>
<span class="n">RANDOM</span><span class="o">=</span><span class="mi">25396</span>
<span class="n">ANDROID_DATA</span><span class="o">=/</span><span class="n">data</span>
<span class="n">BOOTCLASSPATH</span><span class="o">=/</span><span class="n">system</span><span class="o">/</span><span class="n">framework</span><span class="o">/</span><span class="n">core</span><span class="p">.</span><span class="n">jar</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">framework</span><span class="o">/</span><span class="n">core</span><span class="o">-</span><span class="n">junit</span><span class="p">.</span><span class="n">jar</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">framework</span><span class="o">/</span><span class="n">bouncycastle</span><span class="p">.</span><span class="n">jar</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">framework</span><span class="o">/</span><span class="n">ext</span><span class="p">.</span><span class="n">jar</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">framework</span><span class="o">/</span><span class="n">framework</span><span class="p">.</span><span class="n">jar</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">framework</span><span class="o">/</span><span class="n">framework2</span><span class="p">.</span><span class="n">jar</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">framework</span><span class="o">/</span><span class="n">android</span><span class="p">.</span><span class="n">policy</span><span class="p">.</span><span class="n">jar</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">framework</span><span class="o">/</span><span class="n">services</span><span class="p">.</span><span class="n">jar</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">framework</span><span class="o">/</span><span class="n">apache</span><span class="o">-</span><span class="n">xml</span><span class="p">.</span><span class="n">jar</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">framework</span><span class="o">/</span><span class="n">sec_edm</span><span class="p">.</span><span class="n">jar</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">framework</span><span class="o">/</span><span class="n">seccamera</span><span class="p">.</span><span class="n">jar</span>
<span class="n">PATH</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">berserker</span><span class="p">.</span><span class="n">android</span><span class="p">.</span><span class="n">apps</span><span class="p">.</span><span class="n">sshdroid</span><span class="o">/</span><span class="n">dropbear</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">:/</span><span class="n">bin</span><span class="o">:/</span><span class="n">sbin</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">sbin</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">xbin</span><span class="o">:/</span><span class="n">system</span><span class="o">/</span><span class="n">xbin</span><span class="o">/</span><span class="n">bb</span><span class="o">:/</span><span class="n">data</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span>
<span class="n">ANDROID_ROOT</span><span class="o">=/</span><span class="n">system</span>
<span class="n">USER</span><span class="o">=</span><span class="n">root</span>
<span class="n">LOGNAME</span><span class="o">=</span><span class="n">root</span>
<span class="n">ANDROID_PROPERTY_WORKSPACE</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span><span class="mi">66560</span>
<span class="n">EXTERNAL_STORAGE</span><span class="o">=/</span><span class="n">storage</span><span class="o">/</span><span class="n">sdcard0</span>
<span class="n">ANDROID_ASSETS</span><span class="o">=/</span><span class="n">system</span><span class="o">/</span><span class="n">app</span>
<span class="n">SHELL</span><span class="o">=/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sh</span>
<span class="n">TERM</span><span class="o">=</span><span class="n">vt100</span>
<span class="n">SSH_TTY</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">pts</span><span class="o">/</span><span class="mi">1</span>
<span class="n">SSH_CONNECTION</span><span class="o">=::</span><span class="n">ffff</span><span class="o">:</span><span class="mf">192.168.0.103</span> <span class="mi">64228</span> <span class="o">::</span><span class="n">ffff</span><span class="o">:</span><span class="mf">192.168.0.100</span> <span class="mi">22</span>
<span class="n">HOME</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">berserker</span><span class="p">.</span><span class="n">android</span><span class="p">.</span><span class="n">apps</span><span class="p">.</span><span class="n">sshdroid</span><span class="o">/</span><span class="n">home</span>
<span class="n">ANDROID_BOOTLOGO</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
<p>跟 Python 没一毛钱关系,怪不得跑不了;
吼了俩位爷,才知道: <a href="http://wiki.qpython.org/hacker/">QPython Hackers</a>
果断是依赖大堆系统环境变量的,
以往能在桌面运行起来,
也是通过 <code>大JAVA</code> 的相关接口,临时声明的!</p>
<p>那就好办了,照此办理:
<a href="https://gist.github.com/ZoomQuiet/8642464">gen_qpy_env.py</a></p>
<p><code>注意:</code> 这货一定要加载到 QPython 中,用脚本形式来跑,
如果也是从后台 shell 环境中跑,是获得不了主要关键参数的!</p>
<p><img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-gen-profile.jpg"/></p>
<p>然后!? 肿么,让 shell 环境每次都能自动加载上这堆配置?</p>
<p>综合,搜索来的相关说明:</p>
<ul>
<li><a href="http://www.cnblogs.com/shyang--TechBlogs/archive/2011/10/27/2226664.html">[转]linux虚拟内核文件系统介绍 - shy.ang - 博客园</a></li>
<li><a href="http://www.xdracco.net/mount-android-system-partition-with-readwrite-access/">Mount Android System Partition With Read/Rrite Access</a></li>
<li><a href="http://gailly.net/android/android-tips.html">Android tips</a> </li>
</ul>
<p>经过尝试,明确这么来:</p>
<div class="highlight"><pre><span class="c"># mount -o remount,rw /dev/block/mtdblock3 /system</span>
<span class="c"># ln -s /storage/sdcard0/com.hipipal.qpyplus/projects/qpy_profile /etc/profile</span>
<span class="c"># mount -o remount,ro /dev/block/mtdblock3 /system</span>
</pre></div>
<p>再关闭,重启 <code>SSHDroid</code> 后,远程登入,测试:</p>
<p><img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-this-zen.png"/></p>
<p>然后,远程人工从 shell 调用</p>
<div class="highlight"><pre><span class="c"># cd /storage/sdcard0/com.hipipal.qpyplus/projects/chaos/ </span>
<span class="c"># /data/data/com.hipipal.qpyplus/files/bin/python hollo.py</span>
</pre></div>
<p>手机无论在什么桌面,都能跳出来俺的 <code>hollo.py</code> 运行结果:</p>
<p><img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-console-hollo.jpg"/></p>
<p>然后,本地,习惯性的,就可以用 <a href="http://tmux.sourceforge.net/">tmux</a> 同时 观察/管理本地以及远程的开发/测试/运行情况了:</p>
<p><img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140127-qpy-tumx.png"/></p>
<h4 id="beta"><span class="caps">BETA</span>乱入<a class="headerlink" href="#beta" title="Permanent link">¶</a></h4>
<p>作者看俺这么努力的折腾从内部机密放送俺最新开发版本,兴奋的安装上:</p>
<p><img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140127-qpy-new-version.jpg"/></p>
<p>然后,再运行…</p>
<div class="highlight"><pre><span class="nx">Traceback</span> <span class="p">(</span><span class="nx">most</span> <span class="nx">recent</span> <span class="nb">call</span> <span class="nb">last</span><span class="p">):</span>
  <span class="nb">File</span> <span class="s2">"/storage/sdcard0/com.hipipal.qpyplus/projects/chaos/hollo.py"</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">3</span><span class="p">,</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nx">module</span><span class="o">&gt;</span>
    <span class="n">droid</span> <span class="o">=</span> <span class="nx">androidhelper.Android</span><span class="p">()</span>
  <span class="nb">File</span> <span class="s2">"tubelib/sl4a.py"</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">34</span><span class="p">,</span> <span class="k">in</span> <span class="nx">__init__</span>
    <span class="bp">self.</span><span class="nx">conn</span> <span class="o">=</span> <span class="nx">socket.create_connection</span><span class="p">(</span><span class="nx">addr</span><span class="p">)</span>
  <span class="nb">File</span> <span class="s2">"/home/river/android-sdk/workplace/python-for-android/build/python-install/lib/python2.7/socket.py"</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">571</span><span class="p">,</span> <span class="k">in</span> <span class="nx">create_connection</span>
<span class="nx">socket.error</span><span class="p">:</span> <span class="err">[</span><span class="nx">Errno</span> <span class="mi">111</span><span class="cp">]</span> Connection refused
</pre></div>
<p><code>/home/river/android-sdk/workplace</code> 囧rz…</p>
<p>什么东西?! 怎么超出来原作的本地目录了?!</p>
<p>再问,才知道:</p>
<ul>
<li><code>AP_HANDSHAKE=5873cf77-e70b-4887-a8b2-28b7db3c408e</code></li>
<li>类似 <code>AP_</code> 前缀的系列环境变量是随发行版,每次不同的,</li>
<li>必须匹配上,否则,系统找不到,就只能使用缓存的不知哪儿的路径了…</li>
</ul>
<p>所以,必须:</p>
<ul>
<li>
<p>从项目中打开脚本:
<img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140127-qpy-env-proj.jpg"/></p>
</li>
<li>
<p>从 QEditor 中运行
<img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140127-qpy-env-run.jpg"/></p>
</li>
<li>
<p>在 console 中生成:
<img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140127-qpy-env-gen-again.jpg"/></p>
</li>
</ul>
<h4 id="qpython">QPython头声明<a class="headerlink" href="#qpython" title="Permanent link">¶</a></h4>
<p>参考: <a href="http://wiki.qpython.org/doc/program_guide/#qpython-header">Programming Guide</a></p>
<p>脚本第一行的不同声明,将由 QPython 智能识别给予不同的运行环境,一定要理解:</p>
<ul>
<li><code>#qpy:console</code> , 是指运行环境为 QPython 的命令行环境</li>
<li><code>#qpy:2</code> 是指运行环境为 QPython 2 的命令行环境</li>
<li><code>#qpy:3</code> 是指运行环境为 QPython 3 的命令行环境</li>
<li>没有 <code>#qpy:*</code> 的是指基于 <a href="http://kylelk.github.io/html-examples/androidhelper.html"><span class="caps">SL4A</span></a> 的<span class="caps">GUI</span> 依赖环境</li>
<li>
<p>2014 追加支持的</p>
<h1 id="qpywebapp">qpy:webapp:<app title=""><a class="headerlink" href="#qpywebapp" title="Permanent link">¶</a></app></h1>
<h1 id="qpyfullscreen">qpy:fullscreen<a class="headerlink" href="#qpyfullscreen" title="Permanent link">¶</a></h1>
<h1 id="qpylocalhost8080">qpy://localhost:8080<a class="headerlink" href="#qpylocalhost8080" title="Permanent link">¶</a></h1>
<p><span class="dquo">“</span>””
Launching the web service on localhost:8080 
without android titlebar (fullscreen) “”“</p>
</li>
</ul>
<h3 id="_8">自动<a class="headerlink" href="#_8" title="Permanent link">¶</a></h3>
<p>好了,进入最后一个阶段: <code>怎么让所有的上传-&gt;配置-&gt;运行-&gt;日志收集 全部自动化一键完成?</code></p>
<p>目测,要依次解决:</p>
<ol>
<li>自动上传?!(怎么通过公匙的部署,来达到无口令远程登录手机?)</li>
<li>自动运行手机端的脚本?!</li>
<li>自动收集日志?</li>
</ol>
<p>问题一,参考:</p>
<ul>
<li><a href="http://stackoverflow.com/questions/8291380/how-to-get-fabric-to-automatically-instead-of-user-interactively-interact-with/10007635#10007635">python - How to get Fabric to automatically (instead of user-interactively) interact with shell commands? Combine with pexpect? - Stack Overflow</a></li>
<li><a href="http://ilogue.com/jasper/blog/fexpect--dealing-with-prompts-in-fabric-with-pexpect/">Fexpect adds answering to prompts to fabric with use of pexpect</a></li>
<li><a href="http://www.noah.org/wiki/pexpect">pexpect - Noah.org</a></li>
</ul>
<p>总之,对口令,没有什么好办法,大家都是通过获取反馈,匹配期待,自动输入…</p>
<p>只是,这样折腾,很扯蛋! 用口令登录的安全隐患怎么强调都不过份!</p>
<p>何况,通过 <span class="caps">RSA</span>/<span class="caps">DSA</span> 密匙对加密,公匙部署,自动双向加密, 安定,稳定,方便的用了多少年?!</p>
<p>没理由在 Android 这儿栽了哪! 果断的: </p>
<ul>
<li>先将本地公匙用口令登录的方式推上手机</li>
<li>然后,<a href="http://zoomq.qiniudn.com/CPyUG/QPython/apk/berserker.android.apps.sshdroid-cracked-signed.apk">sshdroid-cracked.apk</a></li>
<li>然后,就没有然后了 ;-)</li>
</ul>
<p>只是,唯一的问题:
- 因为 <span class="caps">SSH</span> 服务端切换了, 导致 <span class="caps">SSH</span> 认证冲突,要清除对应的配置行
- 每次都要全部清除,或是人工清除?
- 不用这么 Naive ,参考:<a href="http://floss.qiniudn.com/data/20130327153058/index.html"><span class="caps">SSH</span> Warning: the <span class="caps">RSA</span> host key for differs from the key for the <span class="caps">IP</span> address - zhangp专栏</a></p>
<p>一行解决:</p>
<div class="highlight"><pre><span class="nv">$ </span>sed -i -e <span class="s1">'36d'</span> ~/.ssh/known_hosts
</pre></div>
<h4 id="fabric"><a href="http://docs.fabfile.org/en/1.5/index.html#usage-documentation">Fabric</a><a class="headerlink" href="#fabric" title="Permanent link">¶</a></h4>
<p>非 <code>C/S</code> 结构的脚本化自动部署工具!</p>
<p>嘦在本地安装好<a href="http://docs.fabfile.org/en/1.5/index.html#usage-documentation">Fabric</a>
再在本地工程目录中放一个 <code>fabfile.py</code>, 就可以:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">fab</span> <span class="o">?</span>

<span class="nl">Warning:</span> <span class="n">Command</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">not</span> <span class="n">found</span><span class="o">:</span>
    <span class="o">?</span>

<span class="n">Available</span> <span class="n">commands</span><span class="o">:</span>

    <span class="n">env</span>         <span class="n">print</span> <span class="n">Android</span> <span class="n">sys</span><span class="p">.</span> <span class="n">env</span>
    <span class="n">genenv</span>      <span class="n">gen</span> <span class="n">qpy</span> <span class="n">need</span> <span class="n">env</span> <span class="n">into</span><span class="o">:</span> <span class="o">/</span><span class="n">storage</span><span class="o">/</span><span class="n">sdcard0</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">hipipal</span><span class="p">.</span><span class="n">qpyplus</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">qpy_profile</span>
    <span class="n">pushproj</span>    <span class="n">scp</span> <span class="n">all</span> <span class="p">.</span><span class="n">py</span> <span class="n">into</span> <span class="n">Android</span> <span class="n">QPython</span> <span class="n">projects</span> <span class="n">dir</span>
    <span class="n">qpy</span>         <span class="n">main</span> <span class="n">develop</span> <span class="n">tools</span><span class="p">,</span> <span class="k">auto</span> <span class="n">upload</span> <span class="n">and</span> <span class="n">running</span> <span class="n">in</span> <span class="n">Android</span>
    <span class="n">qpy_run_it</span>  <span class="n">fab</span> <span class="n">qpy_run_it</span><span class="o">:</span><span class="n">script</span><span class="o">=</span><span class="n">MY</span><span class="p">.</span><span class="n">py</span>
    <span class="n">uname</span>       <span class="n">print</span> <span class="n">Android</span> <span class="n">sys</span><span class="p">.</span> <span class="n">info</span><span class="p">.</span>
</pre></div>
<p>日常,无论折腾多少个项目,都可以统一部署此脚本到目录中,
<a href="https://gist.github.com/ZoomQuiet/8645207">Fabric for QPython auto upload/running script/collect log etc… from local through <span class="caps">SSH</span></a></p>
<p>只要定制一两只参数, 平时的开发流程就变成了:</p>
<ol>
<li>本地用喜爱的编辑环境进行代码撰写 (<a href="http://www.sublimetext.com">Sublime Text 2</a>, <a href="http://leoeditor.com/">Leo</a>, etc.)</li>
<li><code>fab qpy:script=当前调试的主脚本.py</code> 一键上传手机,并自动运行</li>
<li>在手机上真实操作,明确效果</li>
</ol>
<h4 id="_9">日志<a class="headerlink" href="#_9" title="Permanent link">¶</a></h4>
<p>目测同最初设想的理想开发流程相比:</p>
<div class="highlight"><pre>1. 本地用喜爱的编辑环境进行代码撰写
2. 一键上传手机,并自动运行
3. 在手机上真实操作,同时有远程日志可以实时观察,确认问题
</pre></div>
<p>只差一个运行日志的实时观察了哪,,,</p>
<p>本来想着很简洁的:</p>
<ul>
<li><a href="http://tmux.sourceforge.net/">tmux</a> 再多开个窗口</li>
<li><code>tail -f /PATH/2/MY/QPY/PROJECT/.run.log</code> 就完事儿的哪!</li>
</ul>
<p>结果,不得不提交个 Issue:</p>
<p><a href="https://github.com/qpython-android/QPython.org/issues/2">.run.log is odd · Issue #2 · qpython-android/QPython.org</a></p>
<h2 id="_10">结论<a class="headerlink" href="#_10" title="Permanent link">¶</a></h2>
<p>虽然, 最后集中成了一份儿 
<a href="https://gist.github.com/ZoomQuiet/8645207">fabfile.py</a>
脚本,但是涉及的工具还是很多的,
所以, 整体上,最终可用的组合关系是:</p>
<div class="highlight"><pre><span class="k">[[Android in mobile]]</span>
    <span class="err">+-</span> <span class="err">/etc/profile</span> <span class="err">-&gt;</span> <span class="err">ln</span> <span class="err">-s</span>
    <span class="err">|</span>                  <span class="err">V</span>
    <span class="err">|</span>                  <span class="err">V</span>
    <span class="err">|</span>    <span class="err">/storage/sdcard0/com.hipipal.qpyplus/projects/qpy_profil</span>
    <span class="err">|</span>                  <span class="err">^</span>
    <span class="err">|</span>                  <span class="err">^</span>
    <span class="err">+-</span> <span class="err">QPython</span> <span class="err">-&gt;</span> <span class="err">gen_qpy_env.py</span>
    <span class="err">|</span>    <span class="err">.../projects/MyProject</span>
    <span class="err">|</span>             <span class="err">^</span>
    <span class="err">|</span>             <span class="err">^</span>
    <span class="err">|</span>             <span class="err">^</span>
    <span class="err">`-</span> <span class="err">SSHDriod</span> <span class="err">+</span> <span class="err">id_rsa.pub</span>
              <span class="err">^</span>
              <span class="err">^</span>   <span class="err">scp,and</span> <span class="err">run()</span>
              <span class="err">^</span>
        <span class="err">/-&gt;</span> <span class="err">base</span> <span class="err">fabfile.py</span>
        <span class="err">|</span>
    <span class="err">+-</span> <span class="err">Fabric</span>
    <span class="err">+-</span> <span class="err">pip</span>
    <span class="err">+-</span> <span class="err">Python</span>
    <span class="err">|</span>
<span class="k">[[MBP in local]]</span>
<span class="err">all</span> <span class="err">in</span> <span class="err">same</span> <span class="err">wifi</span> <span class="err">net</span> <span class="err">domain</span>
</pre></div>
<h3 id="todo"><span class="caps">TODO</span><a class="headerlink" href="#todo" title="Permanent link">¶</a></h3>
<p>然后, 有个比较顺心的 QPython 折腾环境了, 就可以进一步的折腾各种想玩/能玩能玩的了!</p>
<h3 id="pip">pip<a class="headerlink" href="#pip" title="Permanent link">¶</a></h3>
<p>没有 pip 的世界是艰难的世界,所以,,,</p>
<p><a href="http://www.pip-installer.org/en/latest/installing.html">Installation — pip 1.5.2 documentation</a></p>
<div class="highlight"><pre><span class="c"># python get-pip.py</span>
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">"get-pip.py"</span>, line 21343, in &lt;module&gt;
    import bz2
ImportError: No module named bz2
</pre></div>
<p>那么回到老方式, <code>setuptools-&gt;easy_install pip-&gt;pip</code>
<a href="https://pypi.python.org/pypi/setuptools#installation-instructions">setuptools 2.1 : Python Package Index</a></p>
<div class="highlight"><pre><span class="c"># python ez_setup.py</span>
Downloading https://pypi.python.org/packages/source/s/setuptools/setuptools-2.1.tar.gz
Extracting in /storage/sdcard0/com.hipipal.qpyplus/cache/tmpCpG6N8
Now working in /storage/sdcard0/com.hipipal.qpyplus/cache/tmpCpG6N8/setuptools-2.1
Installing Setuptools
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">"setup.py"</span>, line 28, in &lt;module&gt;
    from setuptools.command.test import <span class="nb">test </span>as _test
  File <span class="s2">"/storage/sdcard0/com.hipipal.qpyplus/cache/tmpCpG6N8/setuptools-2.1/setuptools/command/test.py"</span>, line 6, in &lt;module&gt;
    from unittest import TestLoader, main
ImportError: No module named unittest
Something went wrong during the installation.
See the error message above.
</pre></div>
<p>好吧,只能先放下了, 
但是,没有 pip 怎么安装上 <a href="http://mercurial.selenic.com/">Mercurial</a> 呢?</p>
<p>有了 <a href="http://mercurial.selenic.com/">Hg</a> 才真正海阔天空了呢…</p>
<h3 id="restful-onering">RESTful “OneRing”<a class="headerlink" href="#restful-onering" title="Permanent link">¶</a></h3>
<p>不知道大家记得 <a href="http://code.google.com/p/onering-desktop/wiki/OneRing">OneRing</a> 卟?!</p>
<p>豆瓣首席架构师/布道官/<span class="caps">CTO</span> 洪教授 亲手玩的项目:</p>
<div class="highlight"><pre>跨平台的桌面应用开发库,
使用HTML5+CSS3制作用户界面,
用Javascript编写交互逻辑,
同时提供用写web后端的技术编写后台逻辑!
</pre></div>
<p>但素,现在有了 QPython 完全可以0成本山寨一个移动版的 MyRing 了哪:</p>
<p>呼应各种本地的 <a href="http://floss.qiniudn.com/data/20110818160723/index.html">RESTful</a>
请求,总是要有一个内置的web 服务的,</p>
<p>当然上 
<a href="http://bottlepy.org/">Bottle</a> 了,只有一个文件的越级微框架,不用安装,随项目目录发布就好.</p>
<div class="highlight"><pre><span class="c">#qpy:console</span>
<span class="kn">from</span> <span class="nn">bottle</span> <span class="kn">import</span> <span class="n">route</span><span class="p">,</span> <span class="n">run</span><span class="p">,</span> <span class="n">template</span>

<span class="nd">@route</span><span class="p">(</span><span class="s">'/hello/&lt;name&gt;'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">template</span><span class="p">(</span><span class="s">'&lt;b&gt;Hello {{name}}&lt;/b&gt;!'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>

<span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s">'localhost'</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">)</span>
</pre></div>
<p>因为是要守护在后台长期运行的,所以用 <code>#qpy:console</code> 标定</p>
<p>可惜:</p>
<p><img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-bottle-error.jpg"/></p>
<p>原来:</p>
<p><img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-install-wsgi.jpg"/></p>
<p>然后:</p>
<p><img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-bottle-running.jpg"/></p>
<p>没有然后:</p>
<p><img alt="snap4qpy" src="http://zoomq.qiniudn.com/CPyUG/QPython/snap/140126-qpy-bottle-hello.jpg"/></p>
<p>哈哈! 一切如愿!</p>
<h2 id="_11">专题体例:<a class="headerlink" href="#_11" title="Permanent link">¶</a></h2>
<p>QPy 的大妈们曰了: 每个专题应该包括 </p>
<div class="highlight"><pre><span class="n">Introduction</span><span class="p">,</span> 
<span class="n">getting</span> <span class="n">start</span><span class="p">(</span><span class="n">include</span> <span class="n">sample</span> <span class="n">better</span><span class="p">),</span> 
<span class="n">packages</span><span class="p">,</span> 
<span class="n">videos</span> <span class="p">(</span><span class="n">searched</span> <span class="n">result</span> <span class="n">from</span> <span class="n">youtube</span> <span class="n">or</span> <span class="n">directly</span> <span class="n">video</span> <span class="n">link</span> <span class="p">)</span>
</pre></div>
<p>好吧,慢慢来,,,下次专注 Bottle 结合 QPython 实现可用随身小工具.</p>
<h2 id="_12">时间帐单:<a class="headerlink" href="#_12" title="Permanent link">¶</a></h2>
<p>简单回顾一下整个从完全小白到折腾出当前扫盲文章的时间投入:</p>
<ul>
<li>1H: 动心,所有相关资料收集,概览</li>
<li>2H: <span class="caps">SSH</span> 登录成功, 不用口令,未果</li>
<li>2H: env 确认问题,解决问题</li>
<li>1H: BusyBox 熟悉手机上的shell 环境</li>
<li>8H: Fabric 打通, 还是env 问题,以及版本变化后要重新生成 env 配置</li>
<li>4H: 整理为文章</li>
</ul>
<p><code>18H</code> 总计可统计的大块时间, 其它基本有几乎相同的沟通时间,用在
通过 微信/邮件/github 等等方式沟通</p>
<h2 id="changelog">Changelog<a class="headerlink" href="#changelog" title="Permanent link">¶</a></h2>
<ul>
<li>171011 <span class="caps">ZQ</span> 迁移到 .io 私人域名中<ul>
<li>官方文档-&gt; <a href="http://www.qpython.org/document.html">Welcome to read the QPython guide! — QPython 0.9 documentation</a></li>
</ul>
</li>
<li>140127 <span class="caps">ZQ</span> 增补所有细节</li>
<li>140126 <span class="caps">ZQ</span> 创建</li>
</ul>
            </div>
            <!-- /.entry-content -->

    <hr />
    <section class="comments" id="comments">
        <h2>Comments</h2>

<script src="https://utteranc.es/client.js"
        repo="ZoomQuiet/ZoomQuiet.io"
        issue-term="url"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
    <hr />
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'blogzoomquietio'; // required: replace example with your forum shortname
            var disqus_identifier = 'Pythonic/14-01-26-init-my-qpy-env';
            var disqus_url = 'https://blog.zoomquiet.io/init-my-qpy-env.html';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>



    <hr/>
    <sub>
        © Copyright 2014 by Zoom.Quiet 
        <br/>
        Content licensed under the Creative Commons 
        <b>attribution-noncommercial-sharealike</b> License.
        <br/>
        Contact me via 
        , <code><a href="mailto:i@zoomquiet.io">mail</a> 
            </code>
        ,<code><a href="http://github.com/ZoomQuiet">github</a>
            </code>
        or
        <code><a href="http://gitlab.com/zoomquiet">gitlab</a>
            </code>.
        Tip me via 

<!--
<style>.bmc-button img{width: 35px !important;margin-bottom: 1px !important;box-shadow: none !important;border: none !important;vertical-align: middle !important;}.bmc-button{padding: 7px 10px 7px 10px !important;line-height: 35px !important;height:51px !important;min-width:217px !important;text-decoration: none !important;display:inline-flex !important;color:#ffffff !important;background-color:#FF813F !important;border-radius: 5px !important;border: 1px solid transparent !important;padding: 7px 10px 7px 10px !important;font-size: 28px !important;letter-spacing:0.6px !important;box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;margin: 0 auto !important;font-family:'Cookie', cursive !important;-webkit-box-sizing: border-box !important;box-sizing: border-box !important;-o-transition: 0.3s all linear !important;-webkit-transition: 0.3s all linear !important;-moz-transition: 0.3s all linear !important;-ms-transition: 0.3s all linear !important;transition: 0.3s all linear !important;}.bmc-button:hover, .bmc-button:active, .bmc-button:focus {-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;text-decoration: none !important;box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;opacity: 0.85 !important;color:#ffffff !important;}
</style>
<link href="https://fonts.lug.ustc.edu.cn/css?family=Cookie" rel="stylesheet">
<a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/zoomquiet"><img src="https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg" alt="Buy me a coffee"><span style="margin-left:15px;font-size:28px !important;">Buy me a coffee</span></a>
-->        

<style>.bmc-button img{width: 35px !important;margin-bottom: 1px !important;box-shadow: none !important;border: none !important;vertical-align: middle !important;}.bmc-button{padding: 7px 10px 7px 10px !important;line-height: 35px !important;height:51px !important;min-width:217px !important;text-decoration: none !important;display:inline-flex !important;color:#ffffff !important;background-color:#FF813F !important;border-radius: 5px !important;border: 1px solid transparent !important;padding: 7px 10px 7px 10px !important;font-size: 28px !important;letter-spacing:0.6px !important;box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;margin: 0 auto !important;font-family:'Cookie', cursive !important;-webkit-box-sizing: border-box !important;box-sizing: border-box !important;-o-transition: 0.3s all linear !important;-webkit-transition: 0.3s all linear !important;-moz-transition: 0.3s all linear !important;-ms-transition: 0.3s all linear !important;transition: 0.3s all linear !important;}.bmc-button:hover, .bmc-button:active, .bmc-button:focus {-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;text-decoration: none !important;box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;opacity: 0.85 !important;color:#ffffff !important;}
</style>
<link href="https://fonts.lug.ustc.edu.cn/css?family=Cookie" rel="stylesheet">
<a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/zoomquiet"><img src="https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg" alt="Buy me a coffee"><span style="margin-left:15px;font-size:28px !important;">Buy me a coffee</span></a>


<!--
    <code><a href="https://www.gittip.com/ZoomQuiet/">gittip</a>
            </code>.
-->        
||
        <a href="http://blog.zoomquiet.io/feeds/all.atom.xml">(feed)</a>
    </sub>


        </div>

        <div class="col-lg-3 well well-sm" id="sidebar">
<aside>
    <section>
        <ul class="list-group list-group-flush">

            <li class="list-group-item"><h4>
                <i class="icon-th icon-large"></i>Categories</h4></li>
                <li class="list-group-item">
                    <a href="https://blog.zoomquiet.io/category/author.html">
                        <i class="icon-folder-open icon-large"></i>Author
                    </a>
                    <a href="https://blog.zoomquiet.io/feeds/author.atom.xml">
                        <i class="icon-rss-sign"></i>
                    </a>
                </li>
                <li class="list-group-item">
                    <a href="https://blog.zoomquiet.io/category/chaos.html">
                        <i class="icon-folder-open icon-large"></i>Chaos
                    </a>
                    <a href="https://blog.zoomquiet.io/feeds/chaos.atom.xml">
                        <i class="icon-rss-sign"></i>
                    </a>
                </li>
                <li class="list-group-item">
                    <a href="https://blog.zoomquiet.io/category/elixir.html">
                        <i class="icon-folder-open icon-large"></i>Elixir
                    </a>
                    <a href="https://blog.zoomquiet.io/feeds/elixir.atom.xml">
                        <i class="icon-rss-sign"></i>
                    </a>
                </li>
                <li class="list-group-item">
                    <a href="https://blog.zoomquiet.io/category/imho.html">
                        <i class="icon-folder-open icon-large"></i>IMHO
                    </a>
                    <a href="https://blog.zoomquiet.io/feeds/imho.atom.xml">
                        <i class="icon-rss-sign"></i>
                    </a>
                </li>
                <li class="list-group-item">
                    <a href="https://blog.zoomquiet.io/category/livin.html">
                        <i class="icon-folder-open icon-large"></i>Livin
                    </a>
                    <a href="https://blog.zoomquiet.io/feeds/livin.atom.xml">
                        <i class="icon-rss-sign"></i>
                    </a>
                </li>
                <li class="list-group-item">
                    <a href="https://blog.zoomquiet.io/category/pythonic.html">
                        <i class="icon-folder-open icon-large"></i>Pythonic
                    </a>
                    <a href="https://blog.zoomquiet.io/feeds/pythonic.atom.xml">
                        <i class="icon-rss-sign"></i>
                    </a>
                </li>

                <li class="list-group-item"><h4><i class="icon-comment icon-large"></i>Social</h4></li>
                    <li class="list-group-item"><a href="https://ZoomQuiet.io"><i
                            class="icon-.io-sign icon-large"></i>.io
                    </a></li>
                    <li class="list-group-item"><a href="http://wiki.zoomquiet.io"><i
                            class="icon-Wiki-sign icon-large"></i>Wiki
                    </a></li>
                    <li class="list-group-item"><a href="http://blog.zoomquiet.org/pyblosxom/"><i
                            class="icon-旧曰-sign icon-large"></i>旧曰
                    </a></li>
                    <li class="list-group-item"><a href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><i
                            class="icon-啄木鸟-sign icon-large"></i>啄木鸟
                    </a></li>
                    <li class="list-group-item"><a href="https://github.com/ZoomQuiet"><i
                            class="icon-GitHub-sign icon-large"></i>GitHub
                    </a></li>
                    <li class="list-group-item"><a href="https://github.com/OpenBookProjects/wiki/blob/master/HowToBuildBookOnline.md"><i
                            class="icon-O.B.P-sign icon-large"></i>O.B.P
                    </a></li>
                    <li class="list-group-item"><a href="http://weekly.pychina.org/"><i
                            class="icon-Weekly-sign icon-large"></i>Weekly
                    </a></li>
                    <li class="list-group-item"><a href="http://weibo.com/zoomquiet"><i
                            class="icon-weibo-sign icon-large"></i>weibo
                    </a></li>

 

        </ul>
    </section>
<section>
<ul class="list-group-zip">
    <li class="list-group-item">
        <h4><i class="icon-tint icon-large"></i>Powerded By</h4></li>


    <li class="list-group-item-zip">
    已由
        <a href="http://qiniu.com/">
        <img src="https://www.qiniu.com/assets/logo-zh-dbef5f389fb045c60f710d4d4e6225e9015c1684b1a1f7b81e000b952581dcd4.png"
        width="90">
<!--
    <img src="http://docs.upyun.com/img/upyun_logo.png">
-->        
        </a>
    提供CDN及云存储服务
    </li>

    <li class="list-group-item-zip">
        <a href="http://docs.getpelican.com">
            Pelican
        </a>
    </li>
    <li class="list-group-item-zip">
        <sup>theme base</sup>
        <a href="https://github.com/DandyDev/pelican-bootstrap3">
             DandyDev
        </a>
    </li>
    <li class="list-group-item-zip">
        <a href="http://www.python.org/">
            Python
        </a>
    </li>
    <li class="list-group-item-zip">
        <a href="http://www.inkscape.org/">
            inkscape
        </a>
    </li>

    <li class="list-group-item-zip">
        <a href="http://git-scm.com/">
            Git
        </a>
    </li>
<!--
    <li class="list-group-item-zip">
        <a href="https://gitcafe.com/CPyUG">
            GitCafe
        </a>
    </li>

-->


    <li class="list-group-item-zip">
        <a href='http://www.catb.org/hacker-emblem/'>
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAIAAAD8q9/YAAAACXBIWXMAAAsSAAALEgHS3X78AAABj0lEQVR4nOWWMYqDQBSGBa1jEbxFwEKwM6VV8AIWWkis9RI5Q1JpYWGb0jLpBDtrc4BgkQMI+y+yQ3BmdBJiNsv+kOHNZJT3+X6fo2y3W+k/ScFvv9//dhpvUhiGisi+uq6zLHNdd7VaTd7xFYnNor6uQsCO41wulzzPm6aZOavZJQSsaRqAMc6dzRskBFwUxfl8tizroVvDQr3DSSD9+Ore+YMV+irSYpjTRyUErKrqZrNBcLvdbNu+Xq/H43HyfabFhKEfCj0dsDEvEZQQMBHqXJYlAvSw3W43uZ/u/7wvwgitxHKBNGuFieBq0zRRYXRskf0DEzJXet1DIpis8NOf0jHg0+kEM+u6Dif37zCmh8MB0yf8zBRJnYk0UlL6oQiKC5ymqe/7sixXVYXTGJyM2oLWMIyu65Ik8TxvEmYykDjvJ2/zyLqguMBt22IEG+oJDyPGiBgr5N+/KC5wEAQYl8vler1GTyYnLdQWtFEUvTHJV4oLvFgs4jjuY3CSnjzu5M8/ln8Df/IB+OX6Ah776L1W8pWtAAAAAElFTkSuQmCC"/>
        </a>
    </li>


    <li class="list-group-item-zip">
        <a href="http://zh.wikipedia.org/zh-cn/UTF-8">
<img src="data:image/jpeg;base64,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"/>
        </a>
    </li>
    <li class="list-group-item-zip">
        <a href='http://creativecommons.org/licenses/by-nc-sa/2.5/cn/'>
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAMAAABEF7i9AAAAllBMVEUAAAANDQwNDQ0NDg0ODg4PEA8REREZGRkgICAhISEiIiIkJSMnKCcuMC4xMzEzMzM5Ozk7PTtBQkFCQkJDQ0NERERLTEtVVVVbXltmZmZna2dydnF3d3d9gn2AgICGhoaHh4eIiIiPkI+UmZOZmZmqqqqrsaqzuLK6v7q7u7vFxsXGysbIzMjKzsrMzMzd3d3u7u7///+uXr4hAAAA1UlEQVR42q2T2Q6CMBBFR0VUXHCritQFgXGvnf//Oa2ZNEB4UXrTl97enkxmWnAvcioDRKMtJGwJL0V8duEvWWDqGR4TR4iXfUPgbEBWCjaIj1UzYCchFYDQAgJFYoL4PHF/OVTIG7sEMLEKcAdXCtYkpa+znGQH8XL7nvOyed7VGGVgDEqbqaxD+kh6iOc7V2hjfJfxVYNqKxSRr2VGsl2ukNO85/v1hu1hO6Hch0gLCF+0HBd6yLEfe4jTvuMpp62jBS6GDt4hxnBg3rzX9Kc4FTjXG9Q1UZbZlOQyAAAAAElFTkSuQmCC"/>
        </a>
    </li>

    <li>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1277940345'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1277940345%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script>

<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1277940345'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1277940345%26online%3D1' type='text/javascript'%3E%3C/script%3E"));</script>

    </li>

</ul>
</section>
<section>
<ul class="list-group-zip">
    <li class="list-group-item">
        <h4><i class="icon-asterisk icon-large"></i>Links</h4></li>

    <li class="list-group-item-zip">
        <a href="http://blog.zhgdg.org/about/">
            珠海GDG
        </a>
    </li>

    <li class="list-group-item-zip">
        <a href="http://techparty.org/about/">
            techpary.org
        </a>
    </li>

    <li class="list-group-item-zip">
        <a href="http://devrel.info/about/">
            DevRel.info
        </a>
    </li>
    
    <li class="list-group-item-zip">
        <a href="http://yuedulinju.com/">
            阅读邻居
        </a>
    </li>


</ul>
</section>

</aside>        </div>
    
    </div>
</div>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://blog.zoomquiet.io/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://blog.zoomquiet.io/theme/js/respond.min.js"></script>


<!--
    <script type="text/javascript">
        var disqus_shortname = 'blogzoomquietio';
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] ||
             document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
 
-->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'blogzoomquietio'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    


</body>
</html>